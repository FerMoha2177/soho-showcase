{"version":3,"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","settings","animate","scaleToView","scaleToFit","hotkeys","playbackRate","BaseContainer","constructor","width","height","this","padding","bounds","calculateBounds","containerWidth","Math","min","containerHeight","x","y","getRandomSpawnX","bubbleRadius","random","getSpawnY","handleCollisions","bubble","render2D","context","PopcornMakerContainer","super","type","currentRadius","velocityY","bounce","velocityX","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","fillStyle","fillRect","cornerSize","MigrationPathContainer","strokeRect","CurrentClimateContainer","createContainer","emotionColors","Fear","Anger","Sadness","Numbness","Anxiety","Guilt","Denial","Disappointment","Excitement","Relief","Hope","reasonsForLeaving","word","color","responses","emotionsDuringImmigration","currentClimateEmotions","canvasSketch","Phase1","console","log","currentPhase","handleKeyPress","event","key","document","addEventListener","render","time","resize","container","unload","removeEventListener","destroy","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","objectAssign","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","val","TypeError","toObject","s","arguments","browser","commonjsGlobal","performance","now","Date","isPromise_1","obj","then","isDom","window","Node","nodeType","nodeName","getClientAPI","defined","arguments$1","isBrowser","is2DContext","ctx","save","scale","restore","cache","shim","push","supportsArgumentsClass","toString","supported","object","unsupported","pSlice","Array","slice","deepEqual","actual","expected","opts","getTime","strict","b","isUndefinedOrNull","is_arguments","isBuffer","ka","kb","sort","objEquiv","value","copy","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","undefined","isArray","toLowerCase","test","isNaN","maskSlice","masks","_","d","D","m","H","M","L","getTimezoneOffset","W","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","floor","getWeek","N","dow","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","l","round","timeNames","tt","T","TT","Z","match","pop","replace","abs","S","len","default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","expiresHeaderFormat","res","repeatString","str","num","max","substr","link","noop","defaultExts","extension","prefix","suffix","supportedEncodings","stream","isStart","Promise","resolve","reject","filename","resolveFilename","frame","func","client","output","ev","saveDataURL","dataURL","splitIndex","indexOf","base64","byteString","atob","mimeMatch","exec","mime","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","Blob","createBlobFromDataURL","blob","saveBlob","createElement","style","visibility","download","href","URL","createObjectURL","body","appendChild","onclick","setTimeout","revokeObjectURL","parentElement","removeChild","removeAttribute","click","opt","file","totalFrames","ch","layerStr","isFinite","totalLayers","layer","filter","Boolean","name","timeStamp","hash","commonTypos","dimension","animated","animating","unit","P5","pixellated","looping","pixelPerInch","allKeys","checkSettings","warn","includes","paperSizes","reduce","dict","preset","item","units","dimensions","conversions","system","factor","cm","pt","pc","in","ft","anchors","metric","ratio","imperial","convertLength","fromUnit","toUnit","pixelsPerInch","defined$1","precision","roundPixel","toFactor","fromFactor","isToPixel","fromUnitData","toUnitData","anchor","result","decimals","Number","convertDistance$1","unitsFrom","unitsTo","resizeCanvas","props","styleWidth","styleHeight","canvasWidth","canvasHeight","hasDimensions","checkIfHasDimensions","exporting","pixelRatio","exportPixelRatio","bleed","devicePixelRatio","basePixelRatio","maxPixelRatio","trimWidth","trimHeight","ref","element","parent","innerWidth","innerHeight","getBoundingClientRect","getParentSize","parentWidth","parentHeight","getDimensionsFromPreset","highest","lowest","orientation","landscape","realWidth","realHeight","aspect","windowAspect","scaleToFitPadding","maxWidth","maxHeight","getCanvasContext_1","canvas","gl","attribs","names","getContext","createCanvas","ownsCanvas","newCanvas","createCanvasElement","attributes","pixelated","imageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","SketchManager","_settings","_props","_sketch","_raf","_recordTimeout","_lastRedrawResult","_isP5Resizing","_keyboardShortcuts","handler","enabled","keyCode","altKey","metaKey","ctrlKey","togglePlay","preventDefault","commit","keyboardShortcuts","this$1","shiftKey","recording","endRecord","run","record","exportFrame","playing","pause","play","_animateHandler","_resizeHandler","sketch","get","_computePlayhead","currentTime","duration","_computeFrame","playhead","fps","_computeCurrentFrame","_getSizeProps","viewportWidth","viewportHeight","dispose","started","_signalBegin","tick","_cancelTimeouts","cancelAnimationFrame","_lastTime","requestAnimationFrame","error","stop","deltaTime","exportOpts","_createExportOptions","frameInterval","_signalEnd","beginRecord","_wrapContextScale","catch","response","begin","end","wasRecording","sequence","encoding","encodingQuality","dateformat","all","preExport","commitOpts","_doExportFrame","drawResult","concat","hasDataObject","data","toDataURL","exportCanvas","layerList","curOpt","saveParam","k","savePromise","parts","saveFile","saveResult","savedEvents","eventWithOutput","find","outputName","isClient","some","isStreaming","ofSeq","postExport","cb","_preRender","_postRender","p5","scaleContext","scaleX","scaleY","flush","redraw","submitDrawCall","update","notYetSupported","oldCanvas","oldContext","timeOpts","timeProps","getTimeProps","_setupGLKey","_appendCanvasIfNeeded","draw","oldSizes","newProps","pixelDensity","styleCanvas","newSizes","changed","deepEqual_1","_sizeChanged","frameIntervalMS","deltaTimeMS","hasDuration","isNewFrame","newTime","timeScale","isFinished","isLoopStart","loop","lastFrame","dispatch","mount","unmount","detach","clear","clearColor","bufferData","hasTotalFrames","totalFramesFromDuration","durationFromTotalFrames","Infinity","startTime","startFrame","hasStartTime","hasStartFrame","setup","loadAndRun","newSettings","load","createSketch","preload","P5Constructor","p5Sketch","isGL","renderer","WEBGL","P2D","noLoop","setAttributes","_renderer","drawingContext","loader","attach","message","CACHE","runtimeCollisions","hotID","isHot","hot","id","isInjecting","previousData","cacheGet","next","oldManager","manager","cachePut","PaperSizes","ReasonBubble","EmotionBubble","BubblePhysics","reasonBubbles","emotionBubbles","nextBubbleTime","bubbleIndex","maxIterations","reasonsComplete","emotionsTriggered","emotionBubbleIndex","nextEmotionTime","setupMouseListener","handleClick","cleanup","createReasonBubble","wordData","createEmotionBubble","purgeReasonBubbles","purgeBubbles","purgeEmotionBubbles","dataIndex","emotionData","isDestroyed","allBubbles","checkCollisions","renderUI","font","textAlign","fillText","isComplete","Bubble","targetRadius","calculateRadius","gravity","friction","mass","age","spawnTime","animationOffset","PI","isPopping","popStartTime","popDuration","w","updatePhysics","popProgress","popScale","pow","progress","sin","startPop","hexToRgb","hex","g","parseInt","gradient","createRadialGradient","addColorStop","arc","fill","textBaseline","baseColor","animationTime","color1","color2","color3","outlineAlpha","angle","sparkleX","cos","sparkleY","sparkleAlpha","bubbles","j","bubble1","bubble2","dx","dy","distance","sqrt","minDistance","overlap","separationX","separationY","totalMass","velocityChangeX","velocityChangeY","global","CANVAS_SKETCH_DEFAULT_STORAGE_KEY","location"],"sources":["node_modules/browser-pack/_prelude.js","sketches/config/settings.js","sketches/containers/container-system.js","sketches/data/survey-data.js","sketches/main.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/object-assign/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/right-now/browser.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/is-promise/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/is-dom/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/util.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/repeat-string/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/deep-equal/lib/keys.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/deep-equal/lib/is_arguments.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/deep-equal/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/dateformat/lib/dateformat.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/pad-left/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/save.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/accessibility.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/paper-sizes.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/convert-length/convert-length.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/defined/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/distances.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/core/resizeCanvas.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/node_modules/get-canvas-context/index.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/core/createCanvas.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/core/SketchManager.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/core/keyboardShortcuts.js","sketches/node_modules/canvas-sketch/dist/sketches/node_modules/canvas-sketch/lib/canvas-sketch.js","sketches/phases/phase1-reasons-for-leaving.js","sketches/physics/bubble.js","canvas-sketch-cli/injected/storage-key.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\nconst settings = {\n  //p5: { p5, preload }, // Pass the p5 instance and preload function\n  animate: true, // Enable animation loop\n  scaleToView: true, // Full screen scaling\n  scaleToFit: true, // Fit everything on screen\n  hotkeys: false,\n  // Optional: For future audio reactivity\n  playbackRate: 'throttle'\n};\n\nmodule.exports = { settings };","// containers/container-system.js\n\nclass BaseContainer {\n    constructor(width, height) {\n      this.width = width;\n      this.height = height;\n      this.padding = 50;\n      this.bounds = this.calculateBounds();\n    }\n    \n    calculateBounds() {\n      // Center the container better\n      const containerWidth = Math.min(this.width - (this.padding * 2), this.width * 0.8);\n      const containerHeight = Math.min(this.height - (this.padding * 2), this.height * 0.8);\n      \n      return {\n        x: (this.width - containerWidth) / 2,\n        y: (this.height - containerHeight) / 2,\n        width: containerWidth,\n        height: containerHeight\n      };\n    }\n    \n    getRandomSpawnX(bubbleRadius = 50) {\n      return this.bounds.x + bubbleRadius + Math.random() * (this.bounds.width - bubbleRadius * 2);\n    }\n    \n    getSpawnY(bubbleRadius = 50) {\n      return this.bounds.y + this.bounds.height - bubbleRadius;\n    }\n    \n    handleCollisions(bubble) {\n      // Override in subclasses\n    }\n    \n    // For WebGL, we'll render the container using 2D overlay or separate render pass\n    render2D(context) {\n      // Override in subclasses for 2D overlay rendering\n    }\n  }\n  \n  // Phase 1: Popcorn Maker Container (U-shaped, open top)\n  class PopcornMakerContainer extends BaseContainer {\n    constructor(width, height) {\n      super(width, height);\n      this.type = 'popcorn-maker';\n    }\n    \n    handleCollisions(bubble) {\n      // Bottom collision\n      if (bubble.y + bubble.currentRadius > this.bounds.y + this.bounds.height) {\n        bubble.y = this.bounds.y + this.bounds.height - bubble.currentRadius;\n        bubble.velocityY *= -bubble.bounce;\n      }\n      \n      // Left wall collision\n      if (bubble.x - bubble.currentRadius < this.bounds.x) {\n        bubble.x = this.bounds.x + bubble.currentRadius;\n        bubble.velocityX *= -bubble.bounce;\n      }\n      \n      // Right wall collision\n      if (bubble.x + bubble.currentRadius > this.bounds.x + this.bounds.width) {\n        bubble.x = this.bounds.x + this.bounds.width - bubble.currentRadius;\n        bubble.velocityX *= -bubble.bounce;\n      }\n      \n      // No top collision - bubbles can escape upward like popcorn!\n    }\n    \n    // 2D overlay rendering for the container walls\n    render2D(context) {\n      context.strokeStyle = '#666'; // More visible gray\n      context.lineWidth = 4; // Thicker lines\n      context.beginPath();\n      \n      // Draw U-shape (left, bottom, right - no top)\n      context.moveTo(this.bounds.x, this.bounds.y);                              // Top-left\n      context.lineTo(this.bounds.x, this.bounds.y + this.bounds.height);         // Down left side\n      context.lineTo(this.bounds.x + this.bounds.width, this.bounds.y + this.bounds.height); // Across bottom\n      context.lineTo(this.bounds.x + this.bounds.width, this.bounds.y);          // Up right side\n      \n      context.stroke();\n      \n      // Add corner indicators to make it more visible\n      context.fillStyle = '#888';\n      const cornerSize = 8;\n      \n      // Bottom-left corner\n      context.fillRect(this.bounds.x - cornerSize/2, this.bounds.y + this.bounds.height - cornerSize/2, cornerSize, cornerSize);\n      \n      // Bottom-right corner  \n      context.fillRect(this.bounds.x + this.bounds.width - cornerSize/2, this.bounds.y + this.bounds.height - cornerSize/2, cornerSize, cornerSize);\n      \n      // Top-left corner\n      context.fillRect(this.bounds.x - cornerSize/2, this.bounds.y - cornerSize/2, cornerSize, cornerSize);\n      \n      // Top-right corner\n      context.fillRect(this.bounds.x + this.bounds.width - cornerSize/2, this.bounds.y - cornerSize/2, cornerSize, cornerSize);\n    }\n  }\n  \n  // Phase 2: Migration Path Container (for later)\n  class MigrationPathContainer extends BaseContainer {\n    constructor(width, height) {\n      super(width, height);\n      this.type = 'migration-path';\n      // Implementation for later phases\n    }\n    \n    handleCollisions(bubble) {\n      // For now, just basic boundaries\n      super.handleCollisions && super.handleCollisions(bubble);\n    }\n    \n    render2D(context) {\n      // Implementation for later\n      context.strokeStyle = '#444';\n      context.lineWidth = 2;\n      context.strokeRect(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);\n    }\n  }\n  \n  // Phase 3: Current Climate Container (for later)  \n  class CurrentClimateContainer extends BaseContainer {\n    constructor(width, height) {\n      super(width, height);\n      this.type = 'current-climate';\n      // Implementation for later phases\n    }\n    \n    handleCollisions(bubble) {\n      // For now, just basic boundaries\n      super.handleCollisions && super.handleCollisions(bubble);\n    }\n    \n    render2D(context) {\n      // Implementation for later\n      context.strokeStyle = '#444';\n      context.lineWidth = 2;\n      context.strokeRect(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);\n    }\n  }\n  \n  // Factory function\n  function createContainer(type, width, height) {\n    switch(type) {\n      case 'popcorn-maker':\n        return new PopcornMakerContainer(width, height);\n      case 'migration-path':\n        return new MigrationPathContainer(width, height);\n      case 'current-climate':\n        return new CurrentClimateContainer(width, height);\n      default:\n        return new BaseContainer(width, height);\n    }\n  }\n  \n  module.exports = {\n    BaseContainer,\n    PopcornMakerContainer,\n    MigrationPathContainer,\n    CurrentClimateContainer,\n    createContainer\n  };","\n// Survey emotion color mapping\nconst emotionColors = {\n  'Fear': '#DC2626',        // Red\n  'Anger': '#DC2626',       // Red  \n  'Sadness': '#1D4ED8',     // Blue\n  'Numbness': '#6B7280',    // Gray\n  'Anxiety': '#7C3AED',     // Purple\n  'Guilt': '#059669',       // Green\n  'Denial': '#000000',      // Black\n  'Disappointment': '#F59E0B', // Orange/Yellow\n  'Excitement': '#F59E0B',  // Orange\n  'Relief': '#1D4ED8',      // Blue\n  'Hope': '#059669'         // Green\n};\n\n// Phase 1: Reasons for leaving (black bubbles)\nconst reasonsForLeaving = [\n  { word: 'Lack\\nof\\nOpportunity', color: [0.1, 0.1, 0.1], responses: 12 },\n  { word: 'Corrupt Government', color: [0.1, 0.1, 0.1], responses: 6 },\n  { word: 'Violence', color: [0.1, 0.1, 0.1], responses: 4 },\n  { word: 'Economic Instability', color: [0.1, 0.1, 0.1], responses: 4 },\n  { word: 'Police Brutality', color: [0.1, 0.1, 0.1], responses: 2 },\n  { word: 'Decay of Educational System', color: [0.1, 0.1, 0.1], responses: 2 },\n  { word: 'Lack of Freedom of Speech', color: [0.1, 0.1, 0.1], responses: 2 },\n  { word: 'Disinformation', color: [0.1, 0.1, 0.1], responses: 1 },\n  { word: 'Decay of Healthcare System', color: [0.1, 0.1, 0.1], responses: 1 }\n];\n\n// Phase 1: Emotions during immigration (now with proper colors!)\nconst emotionsDuringImmigration = [\n  { word: 'Hope', color: emotionColors['Hope'], responses: 15 },\n  { word: 'Fear', color: emotionColors['Fear'], responses: 12 },\n  { word: 'Anxiety', color: emotionColors['Anxiety'], responses: 8 },\n  { word: 'Relief', color: emotionColors['Relief'], responses: 6 },\n  { word: 'Excitement', color: emotionColors['Excitement'], responses: 5 },\n  { word: 'Sadness', color: emotionColors['Sadness'], responses: 5 },\n  { word: 'Anger', color: emotionColors['Anger'], responses: 4 },\n  { word: 'Guilt', color: emotionColors['Guilt'], responses: 3 }\n];\n\n// Phase 3: Current climate (for later)\nconst currentClimateEmotions = [\n  { word: 'Concerned', color: [0.9, 0.4, 0.2], responses: 18 },\n  { word: 'Hopeful', color: [0.5, 0.8, 0.3], responses: 12 },\n  { word: 'Frustrated', color: [0.8, 0.2, 0.4], responses: 10 }\n];\n\nmodule.exports = {\n  emotionColors,\n  reasonsForLeaving,\n  emotionsDuringImmigration,\n  currentClimateEmotions\n};","\n\nconst canvasSketch = require('canvas-sketch');\nconst Phase1 = require('./phases/phase1-reasons-for-leaving');\nconst { settings } = require('./config/settings');\n\nconst sketch = ({ width, height }) => {\n  console.log('Sketch initialized with 2D context:', { width, height });\n  \n  // Initialize Phase 1 with canvas-sketch provided dimensions\n  const currentPhase = new Phase1(width, height);\n  let phaseStartTime = 0;\n  \n  // Add keyboard listener for testing\n  const handleKeyPress = (event) => {\n    if (currentPhase && currentPhase.handleKeyPress) {\n      currentPhase.handleKeyPress(event.key);\n    }\n  };\n  document.addEventListener('keydown', handleKeyPress);\n  \n  return {\n    render({ context, time, width, height }) {\n      // Let the current phase handle all the drawing\n      if (currentPhase && currentPhase.render) {\n        currentPhase.render({ \n          context, \n          time: time - phaseStartTime, \n          width, \n          height \n        });\n      }\n    },\n    \n    resize({ width, height }) {\n      // Handle resize - update phase dimensions\n      if (currentPhase) {\n        currentPhase.width = width;\n        currentPhase.height = height;\n        // Update container dimensions too\n        if (currentPhase.container) {\n          currentPhase.container.width = width;\n          currentPhase.container.height = height;\n        }\n      }\n    },\n    \n    unload() {\n      // Clean up phase and event listeners\n      document.removeEventListener('keydown', handleKeyPress);\n      if (currentPhase && currentPhase.destroy) {\n        currentPhase.destroy();\n      }\n    }\n  };\n};\n\n\ncanvasSketch(sketch, settings);\n\n\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports =\n  global.performance &&\n  global.performance.now ? function now() {\n    return performance.now()\n  } : Date.now || function now() {\n    return +new Date\n  }\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","module.exports = isNode\n\nfunction isNode (val) {\n  return (!val || typeof val !== 'object')\n    ? false\n    : (typeof window === 'object' && typeof window.Node === 'object')\n      ? (val instanceof window.Node)\n      : (typeof val.nodeType === 'number') &&\n        (typeof val.nodeName === 'string')\n}\n","// TODO: We can remove a huge chunk of bundle size by using a smaller\n// utility module for converting units.\nimport isDOM from \"is-dom\";\n\nexport function getClientAPI() {\n  return typeof window !== \"undefined\" && window[\"canvas-sketch-cli\"];\n}\n\nexport function defined() {\n  for (let i = 0; i < arguments.length; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n  return undefined;\n}\n\nexport function isBrowser() {\n  return typeof document !== \"undefined\";\n}\n\nexport function isWebGLContext(ctx) {\n  return (\n    ctx &&\n    typeof ctx.clear === \"function\" &&\n    typeof ctx.clearColor === \"function\" &&\n    typeof ctx.bufferData === \"function\"\n  );\n}\n\nexport function is2DContext(ctx) {\n  return (\n    ctx &&\n    typeof ctx.save === \"function\" &&\n    typeof ctx.scale === \"function\" &&\n    typeof ctx.restore === \"function\"\n  );\n}\n\nexport function isCanvas(element) {\n  return (\n    isDOM(element) &&\n    /canvas/i.test(element.nodeName) &&\n    typeof element.getContext === \"function\"\n  );\n}\n","/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\n/**\n * Results cache\n */\n\nvar res = '';\nvar cache;\n\n/**\n * Expose `repeat`\n */\n\nmodule.exports = repeat;\n\n/**\n * Repeat the given `string` the specified `number`\n * of times.\n *\n * **Example:**\n *\n * ```js\n * var repeat = require('repeat-string');\n * repeat('A', 5);\n * //=> AAAAA\n * ```\n *\n * @param {String} `string` The string to repeat\n * @param {Number} `number` The number of times to repeat the string\n * @return {String} Repeated string\n * @api public\n */\n\nfunction repeat(str, num) {\n  if (typeof str !== 'string') {\n    throw new TypeError('expected a string');\n  }\n\n  // cover common, quick use cases\n  if (num === 1) return str;\n  if (num === 2) return str + str;\n\n  var max = str.length * num;\n  if (cache !== str || typeof cache === 'undefined') {\n    cache = str;\n    res = '';\n  } else if (res.length >= max) {\n    return res.substr(0, max);\n  }\n\n  while (max > res.length && num > 1) {\n    if (num & 1) {\n      res += str;\n    }\n\n    num >>= 1;\n    str += str;\n  }\n\n  res += str;\n  res = res.substr(0, max);\n  return res;\n}\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","/*!\n * pad-left <https://github.com/jonschlinkert/pad-left>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar repeat = require('repeat-string');\n\nmodule.exports = function padLeft(str, num, ch) {\n  str = str.toString();\n\n  if (typeof num === 'undefined') {\n    return str;\n  }\n\n  if (ch === 0) {\n    ch = '0';\n  } else if (ch) {\n    ch = ch.toString();\n  } else {\n    ch = ' ';\n  }\n\n  return repeat(ch, num - str.length) + str;\n};\n","import dateformat from 'dateformat';\nimport assign from 'object-assign';\nimport padLeft from 'pad-left';\nimport { getClientAPI } from './util';\n\nconst noop = () => {};\nlet link;\nlet defaultExts = { extension: '', prefix: '', suffix: '' };\n\n// Alternative solution for saving files,\n// a bit slower and does not work in Safari\n// function fetchBlobFromDataURL (dataURL) {\n//   return window.fetch(dataURL).then(res => res.blob());\n// }\n\nconst supportedEncodings = [\n  'image/png',\n  'image/jpeg',\n  'image/webp'\n];\n\nfunction stream (isStart, opts = {}) {\n  return new Promise((resolve, reject) => {\n    opts = assign({}, defaultExts, opts);\n    const filename = resolveFilename(Object.assign({}, opts, {\n      extension: '',\n      frame: undefined\n    }));\n    const func = isStart ? 'streamStart' : 'streamEnd';\n    const client = getClientAPI();\n    if (client && client.output && typeof client[func] === 'function') {\n      return client[func](assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      return resolve({ filename, client: false });\n    }\n  });\n}\n\nexport function streamStart (opts = {}) {\n  return stream(true, opts);\n}\n\nexport function streamEnd (opts = {}) {\n  return stream(false, opts);\n}\n\nexport function exportCanvas (canvas, opt = {}) {\n  const encoding = opt.encoding || 'image/png';\n  if (!supportedEncodings.includes(encoding)) throw new Error(`Invalid canvas encoding ${encoding}`);\n  let extension = (encoding.split('/')[1] || '').replace(/jpeg/i, 'jpg');\n  if (extension) extension = `.${extension}`.toLowerCase();\n  return {\n    extension,\n    type: encoding,\n    dataURL: canvas.toDataURL(encoding, opt.encodingQuality)\n  };\n}\n\nfunction createBlobFromDataURL (dataURL) {\n  return new Promise((resolve) => {\n    const splitIndex = dataURL.indexOf(',');\n    if (splitIndex === -1) {\n      resolve(new window.Blob());\n      return;\n    }\n    const base64 = dataURL.slice(splitIndex + 1);\n    const byteString = window.atob(base64);\n    const type = dataURL.slice(0, splitIndex);\n    const mimeMatch = /data:([^;]+)/.exec(type);\n    const mime = (mimeMatch ? mimeMatch[1] : '') || undefined;\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    resolve(new window.Blob([ ab ], { type: mime }));\n  });\n}\n\nexport function saveDataURL (dataURL, opts = {}) {\n  return createBlobFromDataURL(dataURL)\n    .then(blob => saveBlob(blob, opts));\n}\n\nexport function saveBlob (blob, opts = {}) {\n  return new Promise(resolve => {\n    opts = assign({}, defaultExts, opts);\n    const filename = opts.filename;\n\n    const client = getClientAPI();\n    if (client && typeof client.saveBlob === 'function' && client.output) {\n      // native saving using a CLI tool\n      return client.saveBlob(blob, assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      // force download\n      if (!link) {\n        link = document.createElement('a');\n        link.style.visibility = 'hidden';\n        link.target = '_blank';\n      }\n      link.download = filename;\n      link.href = window.URL.createObjectURL(blob);\n      document.body.appendChild(link);\n      link.onclick = () => {\n        link.onclick = noop;\n        setTimeout(() => {\n          window.URL.revokeObjectURL(blob);\n          if (link.parentElement) link.parentElement.removeChild(link);\n          link.removeAttribute('href');\n          resolve({ filename, client: false });\n        });\n      };\n      link.click();\n    }\n  });\n}\n\nexport function saveFile (data, opts = {}) {\n  const parts = Array.isArray(data) ? data : [ data ];\n  const blob = new window.Blob(parts, { type: opts.type || '' });\n  return saveBlob(blob, opts);\n}\n\nexport function getTimeStamp () {\n  const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  return dateformat(new Date(), dateFormatStr);\n}\n\nexport function getDefaultFile (prefix = '', suffix = '', ext) {\n  // const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  const dateFormatStr = `yyyy-mm-dd 'at' h.MM.ss TT`;\n  return `${prefix}${dateformat(new Date(), dateFormatStr)}${suffix}${ext}`;\n}\n\nexport function resolveFilename (opt = {}) {\n  opt = assign({}, opt);\n\n  // Custom filename function\n  if (typeof opt.file === 'function') {\n    return opt.file(opt);\n  } else if (opt.file) {\n    return opt.file;\n  }\n\n  let frame = null;\n  let extension = '';\n  if (typeof opt.extension === 'string') extension = opt.extension;\n\n  if (typeof opt.frame === 'number') {\n    let totalFrames;\n    if (typeof opt.totalFrames === 'number') {\n      totalFrames = opt.totalFrames;\n    } else {\n      totalFrames = Math.max(10000, opt.frame);\n    }\n    frame = padLeft(String(opt.frame), String(totalFrames).length, '0');\n  }\n\n  const layerStr = isFinite(opt.totalLayers) && isFinite(opt.layer) && opt.totalLayers > 1 ? `${opt.layer}` : '';\n  if (frame != null) {\n    return [ layerStr, frame ].filter(Boolean).join('-') + extension;\n  } else {\n    const defaultFileName = opt.timeStamp;\n    return [ opt.prefix, opt.name || defaultFileName, layerStr, opt.hash, opt.suffix ].filter(Boolean).join('-') + extension;\n  }\n}\n","// Handle some common typos\nconst commonTypos = {\n  dimension: 'dimensions',\n  animated: 'animate',\n  animating: 'animate',\n  unit: 'units',\n  P5: 'p5',\n  pixellated: 'pixelated',\n  looping: 'loop',\n  pixelPerInch: 'pixels'\n};\n\n// Handle all other typos\nconst allKeys = [\n  'dimensions', 'units', 'pixelsPerInch', 'orientation',\n  'scaleToFit', 'scaleToView', 'bleed', 'pixelRatio',\n  'exportPixelRatio', 'maxPixelRatio', 'scaleContext',\n  'resizeCanvas', 'styleCanvas', 'canvas', 'context', 'attributes',\n  'parent', 'file', 'name', 'prefix', 'suffix', 'animate', 'playing',\n  'loop', 'duration', 'totalFrames', 'fps', 'playbackRate', 'timeScale',\n  'frame', 'time', 'flush', 'pixelated', 'hotkeys', 'p5', 'id',\n  'scaleToFitPadding', 'data', 'params', 'encoding', 'encodingQuality'\n];\n\n// This is fairly opinionated and forces users to use the 'data' parameter\n// if they want to pass along non-setting objects...\nexport const checkSettings = (settings) => {\n  const keys = Object.keys(settings);\n  keys.forEach(key => {\n    if (key in commonTypos) {\n      const actual = commonTypos[key];\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\", did you mean \"${actual}\"?`);\n    } else if (!allKeys.includes(key)) {\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\"`);\n    }\n  });\n};\n","const defaultUnits = 'mm';\n\nconst data = [\n  // Common Paper Sizes\n  // (Mostly North-American based)\n  [ 'postcard', 101.6, 152.4 ],\n  [ 'poster-small', 280, 430 ],\n  [ 'poster', 460, 610 ],\n  [ 'poster-large', 610, 910 ],\n  [ 'business-card', 50.8, 88.9 ],\n\n  // Photographic Print Paper Sizes\n  [ '2r', 64, 89 ],\n  [ '3r', 89, 127 ],\n  [ '4r', 102, 152 ],\n  [ '5r', 127, 178 ], // 5″x7″\n  [ '6r', 152, 203 ], // 6″x8″\n  [ '8r', 203, 254 ], // 8″x10″\n  [ '10r', 254, 305 ], // 10″x12″\n  [ '11r', 279, 356 ], // 11″x14″\n  [ '12r', 305, 381 ],\n\n  // Standard Paper Sizes\n  [ 'a0', 841, 1189 ],\n  [ 'a1', 594, 841 ],\n  [ 'a2', 420, 594 ],\n  [ 'a3', 297, 420 ],\n  [ 'a4', 210, 297 ],\n  [ 'a5', 148, 210 ],\n  [ 'a6', 105, 148 ],\n  [ 'a7', 74, 105 ],\n  [ 'a8', 52, 74 ],\n  [ 'a9', 37, 52 ],\n  [ 'a10', 26, 37 ],\n  [ '2a0', 1189, 1682 ],\n  [ '4a0', 1682, 2378 ],\n  [ 'b0', 1000, 1414 ],\n  [ 'b1', 707, 1000 ],\n  [ 'b1+', 720, 1020 ],\n  [ 'b2', 500, 707 ],\n  [ 'b2+', 520, 720 ],\n  [ 'b3', 353, 500 ],\n  [ 'b4', 250, 353 ],\n  [ 'b5', 176, 250 ],\n  [ 'b6', 125, 176 ],\n  [ 'b7', 88, 125 ],\n  [ 'b8', 62, 88 ],\n  [ 'b9', 44, 62 ],\n  [ 'b10', 31, 44 ],\n  [ 'b11', 22, 32 ],\n  [ 'b12', 16, 22 ],\n  [ 'c0', 917, 1297 ],\n  [ 'c1', 648, 917 ],\n  [ 'c2', 458, 648 ],\n  [ 'c3', 324, 458 ],\n  [ 'c4', 229, 324 ],\n  [ 'c5', 162, 229 ],\n  [ 'c6', 114, 162 ],\n  [ 'c7', 81, 114 ],\n  [ 'c8', 57, 81 ],\n  [ 'c9', 40, 57 ],\n  [ 'c10', 28, 40 ],\n  [ 'c11', 22, 32 ],\n  [ 'c12', 16, 22 ],\n\n  // Use inches for North American sizes,\n  // as it produces less float precision errors\n  [ 'half-letter', 5.5, 8.5, 'in' ],\n  [ 'letter', 8.5, 11, 'in' ],\n  [ 'legal', 8.5, 14, 'in' ],\n  [ 'junior-legal', 5, 8, 'in' ],\n  [ 'ledger', 11, 17, 'in' ],\n  [ 'tabloid', 11, 17, 'in' ],\n  [ 'ansi-a', 8.5, 11.0, 'in' ],\n  [ 'ansi-b', 11.0, 17.0, 'in' ],\n  [ 'ansi-c', 17.0, 22.0, 'in' ],\n  [ 'ansi-d', 22.0, 34.0, 'in' ],\n  [ 'ansi-e', 34.0, 44.0, 'in' ],\n  [ 'arch-a', 9, 12, 'in' ],\n  [ 'arch-b', 12, 18, 'in' ],\n  [ 'arch-c', 18, 24, 'in' ],\n  [ 'arch-d', 24, 36, 'in' ],\n  [ 'arch-e', 36, 48, 'in' ],\n  [ 'arch-e1', 30, 42, 'in' ],\n  [ 'arch-e2', 26, 38, 'in' ],\n  [ 'arch-e3', 27, 39, 'in' ]\n];\n\nexport default data.reduce((dict, preset) => {\n  const item = {\n    units: preset[3] || defaultUnits,\n    dimensions: [ preset[1], preset[2] ]\n  };\n  dict[preset[0]] = item;\n  dict[preset[0].replace(/-/g, ' ')] = item;\n  return dict;\n}, {});\n","var defined = require('defined');\nvar units = [ 'mm', 'cm', 'm', 'pc', 'pt', 'in', 'ft', 'px' ];\n\nvar conversions = {\n  // metric\n  m: {\n    system: 'metric',\n    factor: 1\n  },\n  cm: {\n    system: 'metric',\n    factor: 1 / 100\n  },\n  mm: {\n    system: 'metric',\n    factor: 1 / 1000\n  },\n  // imperial\n  pt: {\n    system: 'imperial',\n    factor: 1 / 72\n  },\n  pc: {\n    system: 'imperial',\n    factor: 1 / 6\n  },\n  in: {\n    system: 'imperial',\n    factor: 1\n  },\n  ft: {\n    system: 'imperial',\n    factor: 12\n  }\n};\n\nconst anchors = {\n  metric: {\n    unit: 'm',\n    ratio: 1 / 0.0254\n  },\n  imperial: {\n    unit: 'in',\n    ratio: 0.0254\n  }\n};\n\nfunction round (value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nfunction convertDistance (value, fromUnit, toUnit, opts) {\n  if (typeof value !== 'number' || !isFinite(value)) throw new Error('Value must be a finite number');\n  if (!fromUnit || !toUnit) throw new Error('Must specify from and to units');\n\n  opts = opts || {};\n  var pixelsPerInch = defined(opts.pixelsPerInch, 96);\n  var precision = opts.precision;\n  var roundPixel = opts.roundPixel !== false;\n\n  fromUnit = fromUnit.toLowerCase();\n  toUnit = toUnit.toLowerCase();\n\n  if (units.indexOf(fromUnit) === -1) throw new Error('Invalid from unit \"' + fromUnit + '\", must be one of: ' + units.join(', '));\n  if (units.indexOf(toUnit) === -1) throw new Error('Invalid from unit \"' + toUnit + '\", must be one of: ' + units.join(', '));\n\n  if (fromUnit === toUnit) {\n    // We don't need to convert from A to B since they are the same already\n    return value;\n  }\n\n  var toFactor = 1;\n  var fromFactor = 1;\n  var isToPixel = false;\n\n  if (fromUnit === 'px') {\n    fromFactor = 1 / pixelsPerInch;\n    fromUnit = 'in';\n  }\n  if (toUnit === 'px') {\n    isToPixel = true;\n    toFactor = pixelsPerInch;\n    toUnit = 'in';\n  }\n\n  var fromUnitData = conversions[fromUnit];\n  var toUnitData = conversions[toUnit];\n\n  // source to anchor inside source's system\n  var anchor = value * fromUnitData.factor * fromFactor;\n\n  // if systems differ, convert one to another\n  if (fromUnitData.system !== toUnitData.system) {\n    // regular 'm' to 'in' and so forth\n    anchor *= anchors[fromUnitData.system].ratio;\n  }\n\n  var result = anchor / toUnitData.factor * toFactor;\n  if (isToPixel && roundPixel) {\n    result = Math.round(result);\n  } else if (typeof precision === 'number' && isFinite(precision)) {\n    result = round(result, precision);\n  }\n  return result;\n}\n\nmodule.exports = convertDistance;\nmodule.exports.units = units;\n","module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n","import paperSizes from './paper-sizes';\nimport convertLength from 'convert-length';\n\nexport function getDimensionsFromPreset (dimensions, unitsTo = 'px', pixelsPerInch = 72) {\n  if (typeof dimensions === 'string') {\n    const key = dimensions.toLowerCase();\n    if (!(key in paperSizes)) {\n      throw new Error(`The dimension preset \"${dimensions}\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.`)\n    }\n    const preset = paperSizes[key];\n    return preset.dimensions.map(d => {\n      return convertDistance(d, preset.units, unitsTo, pixelsPerInch);\n    });\n  } else {\n    return dimensions;\n  }\n}\n\nexport function convertDistance (dimension, unitsFrom = 'px', unitsTo = 'px', pixelsPerInch = 72) {\n  return convertLength(dimension, unitsFrom, unitsTo, {\n    pixelsPerInch,\n    precision: 4,\n    roundPixel: true\n  });\n}\n","import { getDimensionsFromPreset, convertDistance } from '../distances';\nimport { isBrowser, defined } from '../util';\n\nfunction checkIfHasDimensions (settings) {\n  if (!settings.dimensions) return false;\n  if (typeof settings.dimensions === 'string') return true;\n  if (Array.isArray(settings.dimensions) && settings.dimensions.length >= 2) return true;\n  return false;\n}\n\nfunction getParentSize (props, settings) {\n  // When no { dimension } is passed in node, we default to HTML canvas size\n  if (!isBrowser()) {\n    return [ 300, 150 ];\n  }\n\n  let element = settings.parent || window;\n\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return [ window.innerWidth, window.innerHeight ];\n  } else {\n    const { width, height } = element.getBoundingClientRect();\n    return [ width, height ];\n  }\n}\n\nexport default function resizeCanvas (props, settings) {\n  let width, height;\n  let styleWidth, styleHeight;\n  let canvasWidth, canvasHeight;\n\n  const browser = isBrowser();\n  const dimensions = settings.dimensions;\n  const hasDimensions = checkIfHasDimensions(settings);\n  const exporting = props.exporting;\n  let scaleToFit = hasDimensions ? settings.scaleToFit !== false : false;\n  let scaleToView = (!exporting && hasDimensions) ? settings.scaleToView : true;\n  // in node, cancel both of these options\n  if (!browser) scaleToFit = scaleToView = false;\n  const units = settings.units;\n  const pixelsPerInch = (typeof settings.pixelsPerInch === 'number' && isFinite(settings.pixelsPerInch)) ? settings.pixelsPerInch : 72;\n  const bleed = defined(settings.bleed, 0);\n\n  const devicePixelRatio = browser ? window.devicePixelRatio : 1;\n  const basePixelRatio = scaleToView ? devicePixelRatio : 1;\n\n  let pixelRatio, exportPixelRatio;\n\n  // If a pixel ratio is specified, we will use it.\n  // Otherwise:\n  //  -> If dimension is specified, use base ratio (i.e. size for export)\n  //  -> If no dimension is specified, use device ratio (i.e. size for screen)\n  if (typeof settings.pixelRatio === 'number' && isFinite(settings.pixelRatio)) {\n    // When { pixelRatio } is specified, it's also used as default exportPixelRatio.\n    pixelRatio = settings.pixelRatio;\n    exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n  } else {\n    if (hasDimensions) {\n      // When a dimension is specified, use the base ratio rather than screen ratio\n      pixelRatio = basePixelRatio;\n      // Default to a pixel ratio of 1 so that you end up with the same dimension\n      // you specified, i.e. [ 500, 500 ] is exported as 500x500 px\n      exportPixelRatio = defined(settings.exportPixelRatio, 1);\n    } else {\n      // No dimension is specified, assume full-screen retina sizing\n      pixelRatio = devicePixelRatio;\n      // Default to screen pixel ratio, so that it's like taking a device screenshot\n      exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n    }\n  }\n\n  // Clamp pixel ratio\n  if (typeof settings.maxPixelRatio === 'number' && isFinite(settings.maxPixelRatio)) {\n    pixelRatio = Math.min(settings.maxPixelRatio, pixelRatio);\n  }\n\n  // Handle export pixel ratio\n  if (exporting) {\n    pixelRatio = exportPixelRatio;\n  }\n\n  // parentWidth = typeof parentWidth === 'undefined' ? defaultNodeSize[0] : parentWidth;\n  // parentHeight = typeof parentHeight === 'undefined' ? defaultNodeSize[1] : parentHeight;\n\n  let [ parentWidth, parentHeight ] = getParentSize(props, settings);\n  let trimWidth, trimHeight;\n\n  // You can specify a dimensions in pixels or cm/m/in/etc\n  if (hasDimensions) {\n    const result = getDimensionsFromPreset(dimensions, units, pixelsPerInch);\n    const highest = Math.max(result[0], result[1]);\n    const lowest = Math.min(result[0], result[1]);\n    if (settings.orientation) {\n      const landscape = settings.orientation === 'landscape';\n      width = landscape ? highest : lowest;\n      height = landscape ? lowest : highest;\n    } else {\n      width = result[0];\n      height = result[1];\n    }\n\n    trimWidth = width;\n    trimHeight = height;\n\n    // Apply bleed which is assumed to be in the same units\n    width += bleed * 2;\n    height += bleed * 2;\n  } else {\n    width = parentWidth;\n    height = parentHeight;\n    trimWidth = width;\n    trimHeight = height;\n  }\n\n  // Real size in pixels after PPI is taken into account\n  let realWidth = width;\n  let realHeight = height;\n  if (hasDimensions && units) {\n    // Convert to digital/pixel units if necessary\n    realWidth = convertDistance(width, units, 'px', pixelsPerInch);\n    realHeight = convertDistance(height, units, 'px', pixelsPerInch);\n  }\n\n  // How big to set the 'view' of the canvas in the browser (i.e. style)\n  styleWidth = Math.round(realWidth);\n  styleHeight = Math.round(realHeight);\n\n  // If we wish to scale the view to the browser window\n  if (scaleToFit && !exporting && hasDimensions) {\n    const aspect = width / height;\n    const windowAspect = parentWidth / parentHeight;\n    const scaleToFitPadding = defined(settings.scaleToFitPadding, 40);\n    const maxWidth = Math.round(parentWidth - scaleToFitPadding * 2);\n    const maxHeight = Math.round(parentHeight - scaleToFitPadding * 2);\n    if (styleWidth > maxWidth || styleHeight > maxHeight) {\n      if (windowAspect > aspect) {\n        styleHeight = maxHeight;\n        styleWidth = Math.round(styleHeight * aspect);\n      } else {\n        styleWidth = maxWidth;\n        styleHeight = Math.round(styleWidth / aspect);\n      }\n    }\n  }\n\n  canvasWidth = scaleToView ? Math.round(pixelRatio * styleWidth) : Math.round(pixelRatio * realWidth);\n  canvasHeight = scaleToView ? Math.round(pixelRatio * styleHeight) : Math.round(pixelRatio * realHeight);\n\n  const viewportWidth = scaleToView ? Math.round(styleWidth) : Math.round(realWidth);\n  const viewportHeight = scaleToView ? Math.round(styleHeight) : Math.round(realHeight);\n\n  const scaleX = canvasWidth / width;\n  const scaleY = canvasHeight / height;\n\n  // Assign to current props\n  return {\n    bleed,\n    pixelRatio,\n    width,\n    height,\n    dimensions: [ width, height ],\n    units: units || 'px',\n    scaleX,\n    scaleY,\n    pixelsPerInch,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    trimWidth,\n    trimHeight,\n    styleWidth,\n    styleHeight\n  };\n}\n","module.exports = getCanvasContext\nfunction getCanvasContext (type, opts) {\n  if (typeof type !== 'string') {\n    throw new TypeError('must specify type string')\n  }\n\n  opts = opts || {}\n\n  if (typeof document === 'undefined' && !opts.canvas) {\n    return null // check for Node\n  }\n\n  var canvas = opts.canvas || document.createElement('canvas')\n  if (typeof opts.width === 'number') {\n    canvas.width = opts.width\n  }\n  if (typeof opts.height === 'number') {\n    canvas.height = opts.height\n  }\n\n  var attribs = opts\n  var gl\n  try {\n    var names = [ type ]\n    // prefix GL contexts\n    if (type.indexOf('webgl') === 0) {\n      names.push('experimental-' + type)\n    }\n\n    for (var i = 0; i < names.length; i++) {\n      gl = canvas.getContext(names[i], attribs)\n      if (gl) return gl\n    }\n  } catch (e) {\n    gl = null\n  }\n  return (gl || null) // ensure null on fail\n}\n","import assign from 'object-assign';\nimport getCanvasContext from 'get-canvas-context';\nimport { isBrowser } from '../util';\n\nfunction createCanvasElement () {\n  if (!isBrowser()) {\n    throw new Error('It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.');\n  }\n  return document.createElement('canvas');\n}\n\nexport default function createCanvas (settings = {}) {\n  let context, canvas;\n  let ownsCanvas = false;\n  if (settings.canvas !== false) {\n    // Determine the canvas and context to create\n    context = settings.context;\n    if (!context || typeof context === 'string') {\n      let newCanvas = settings.canvas;\n      if (!newCanvas) {\n        newCanvas = createCanvasElement();\n        ownsCanvas = true;\n      }\n      const type = context || '2d';\n      if (typeof newCanvas.getContext !== 'function') {\n        throw new Error(`The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?`);\n      }\n      context = getCanvasContext(type, assign({}, settings.attributes, { canvas: newCanvas }));\n      if (!context) {\n        throw new Error(`Failed at canvas.getContext('${type}') - the browser may not support this context, or a different context may already be in use with this canvas.`);\n      }\n    }\n\n    canvas = context.canvas;\n    // Ensure context matches user's canvas expectations\n    if (settings.canvas && canvas !== settings.canvas) {\n      throw new Error('The { canvas } and { context } settings must point to the same underlying canvas element');\n    }\n\n    // Apply pixelation to canvas if necessary, this is mostly a convenience utility\n    if (settings.pixelated) {\n      context.imageSmoothingEnabled = false;\n      context.mozImageSmoothingEnabled = false;\n      context.oImageSmoothingEnabled = false;\n      context.webkitImageSmoothingEnabled = false;\n      context.msImageSmoothingEnabled = false;\n      canvas.style['image-rendering'] = 'pixelated';\n    }\n  }\n  return { canvas, context, ownsCanvas };\n}\n","import assign from \"object-assign\";\nimport rightNow from \"right-now\";\nimport isPromise from \"is-promise\";\nimport {\n  isBrowser,\n  defined,\n  isWebGLContext,\n  is2DContext,\n  isCanvas,\n  getClientAPI,\n} from \"../util\";\nimport deepEqual from \"deep-equal\";\nimport {\n  resolveFilename,\n  saveFile,\n  saveDataURL,\n  getTimeStamp,\n  exportCanvas,\n  streamStart,\n  streamEnd,\n} from \"../save\";\nimport { checkSettings } from \"../accessibility\";\n\nimport keyboardShortcuts from \"./keyboardShortcuts\";\nimport resizeCanvas from \"./resizeCanvas\";\nimport createCanvas from \"./createCanvas\";\n\nclass SketchManager {\n  constructor() {\n    this._settings = {};\n    this._props = {};\n    this._sketch = undefined;\n    this._raf = null;\n    this._recordTimeout = null;\n\n    // Some hacky things required to get around p5.js structure\n    this._lastRedrawResult = undefined;\n    this._isP5Resizing = false;\n\n    this._keyboardShortcuts = keyboardShortcuts({\n      enabled: () => this.settings.hotkeys !== false,\n      save: (ev) => {\n        if (ev.shiftKey) {\n          if (this.props.recording) {\n            this.endRecord();\n            this.run();\n          } else this.record();\n        } else if (!this.props.recording) {\n          this.exportFrame();\n        }\n      },\n      togglePlay: () => {\n        if (this.props.playing) this.pause();\n        else this.play();\n      },\n      commit: (ev) => {\n        this.exportFrame({ commit: true });\n      },\n    });\n\n    this._animateHandler = () => this.animate();\n\n    this._resizeHandler = () => {\n      const changed = this.resize();\n      // Only re-render when size actually changes\n      if (changed) {\n        this.render();\n      }\n    };\n  }\n\n  get sketch() {\n    return this._sketch;\n  }\n\n  get settings() {\n    return this._settings;\n  }\n\n  get props() {\n    return this._props;\n  }\n\n  _computePlayhead(currentTime, duration) {\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n    return hasDuration ? currentTime / duration : 0;\n  }\n\n  _computeFrame(playhead, time, totalFrames, fps) {\n    return isFinite(totalFrames) && totalFrames > 1\n      ? Math.floor(playhead * (totalFrames - 1))\n      : Math.floor(fps * time);\n  }\n\n  _computeCurrentFrame() {\n    return this._computeFrame(\n      this.props.playhead,\n      this.props.time,\n      this.props.totalFrames,\n      this.props.fps\n    );\n  }\n\n  _getSizeProps() {\n    const props = this.props;\n    return {\n      width: props.width,\n      height: props.height,\n      pixelRatio: props.pixelRatio,\n      canvasWidth: props.canvasWidth,\n      canvasHeight: props.canvasHeight,\n      viewportWidth: props.viewportWidth,\n      viewportHeight: props.viewportHeight,\n    };\n  }\n\n  run() {\n    if (!this.sketch)\n      throw new Error(\n        \"should wait until sketch is loaded before trying to play()\"\n      );\n\n    // Start an animation frame loop if necessary\n    if (this.settings.playing !== false) {\n      this.play();\n    }\n\n    // Let's let this warning hang around for a few versions...\n    if (typeof this.sketch.dispose === \"function\") {\n      console.warn(\n        \"In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()\"\n      );\n    }\n\n    // In case we aren't playing or animated, make sure we still trigger begin message...\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Render an initial frame\n    this.tick();\n    this.render();\n    return this;\n  }\n\n  _cancelTimeouts() {\n    if (\n      this._raf != null &&\n      typeof window !== \"undefined\" &&\n      typeof window.cancelAnimationFrame === \"function\"\n    ) {\n      window.cancelAnimationFrame(this._raf);\n      this._raf = null;\n    }\n    if (this._recordTimeout != null) {\n      clearTimeout(this._recordTimeout);\n      this._recordTimeout = null;\n    }\n  }\n\n  play() {\n    let animate = this.settings.animate;\n    if (\"animation\" in this.settings) {\n      animate = true;\n      console.warn(\n        \"[canvas-sketch] { animation } has been renamed to { animate }\"\n      );\n    }\n    if (!animate) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported\"\n      );\n      return;\n    }\n    if (this.props.playing) return;\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // console.log('play', this.props.time)\n\n    // Start a render loop\n    this.props.playing = true;\n    this._cancelTimeouts();\n    this._lastTime = rightNow();\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n  }\n\n  pause() {\n    if (this.props.recording) this.endRecord();\n    this.props.playing = false;\n\n    this._cancelTimeouts();\n  }\n\n  togglePlay() {\n    if (this.props.playing) this.pause();\n    else this.play();\n  }\n\n  // Stop and reset to frame zero\n  stop() {\n    this.pause();\n    this.props.frame = 0;\n    this.props.playhead = 0;\n    this.props.time = 0;\n    this.props.deltaTime = 0;\n    this.props.started = false;\n    this.render();\n  }\n\n  record() {\n    if (this.props.recording) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Recording from Node.js is not yet supported\"\n      );\n      return;\n    }\n\n    this.stop();\n    this.props.playing = true;\n    this.props.recording = true;\n\n    const exportOpts = this._createExportOptions({ sequence: true });\n\n    const frameInterval = 1 / this.props.fps;\n    // Render each frame in the sequence\n    this._cancelTimeouts();\n    const tick = () => {\n      if (!this.props.recording) return Promise.resolve();\n      this.props.deltaTime = frameInterval;\n      this.tick();\n      return this.exportFrame(exportOpts).then(() => {\n        if (!this.props.recording) return; // was cancelled before\n        this.props.deltaTime = 0;\n        this.props.frame++;\n        if (this.props.frame < this.props.totalFrames) {\n          this.props.time += frameInterval;\n          this.props.playhead = this._computePlayhead(\n            this.props.time,\n            this.props.duration\n          );\n          this._recordTimeout = setTimeout(tick, 0);\n        } else {\n          console.log(\"Finished recording\");\n          this._signalEnd();\n          this.endRecord();\n          this.stop();\n          this.run();\n        }\n      });\n    };\n\n    // Trigger a start event before we begin recording\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Trigger 'begin record' event\n    if (this.sketch && typeof this.sketch.beginRecord === \"function\") {\n      this._wrapContextScale((props) => this.sketch.beginRecord(props));\n    }\n\n    // Initiate a streaming start if necessary\n    streamStart(exportOpts)\n      .catch((err) => {\n        console.error(err);\n      })\n      .then((response) => {\n        this._raf = window.requestAnimationFrame(tick);\n      });\n  }\n\n  _signalBegin() {\n    if (this.sketch && typeof this.sketch.begin === \"function\") {\n      this._wrapContextScale((props) => this.sketch.begin(props));\n    }\n  }\n\n  _signalEnd() {\n    if (this.sketch && typeof this.sketch.end === \"function\") {\n      this._wrapContextScale((props) => this.sketch.end(props));\n    }\n  }\n\n  endRecord() {\n    const wasRecording = this.props.recording;\n\n    this._cancelTimeouts();\n    this.props.recording = false;\n    this.props.deltaTime = 0;\n    this.props.playing = false;\n\n    // tell CLI that stream has finished\n    return streamEnd()\n      .catch((err) => {\n        console.error(err);\n      })\n      .then(() => {\n        // Trigger 'end record' event\n        if (\n          wasRecording &&\n          this.sketch &&\n          typeof this.sketch.endRecord === \"function\"\n        ) {\n          this._wrapContextScale((props) => this.sketch.endRecord(props));\n        }\n      });\n  }\n\n  _createExportOptions(opt = {}) {\n    return {\n      sequence: opt.sequence,\n      save: opt.save,\n      fps: this.props.fps,\n      frame: opt.sequence ? this.props.frame : undefined,\n      file: this.settings.file,\n      name: this.settings.name,\n      prefix: this.settings.prefix,\n      suffix: this.settings.suffix,\n      encoding: this.settings.encoding,\n      encodingQuality: this.settings.encodingQuality,\n      timeStamp: opt.timeStamp || getTimeStamp(),\n      totalFrames: isFinite(this.props.totalFrames)\n        ? Math.max(0, this.props.totalFrames)\n        : 1000,\n    };\n  }\n\n  exportFrame(opt = {}) {\n    if (!this.sketch) return Promise.all([]);\n    if (typeof this.sketch.preExport === \"function\") {\n      this.sketch.preExport();\n    }\n\n    // Options for export function\n    let exportOpts = this._createExportOptions(opt);\n\n    const client = getClientAPI();\n    let p = Promise.resolve();\n    if (client && opt.commit && typeof client.commit === \"function\") {\n      const commitOpts = assign({}, exportOpts);\n      const hash = client.commit(commitOpts);\n      if (isPromise(hash)) p = hash;\n      else p = Promise.resolve(hash);\n    }\n\n    return p\n      .then((hash) => {\n        return this._doExportFrame(\n          assign({}, exportOpts, { hash: hash || \"\" })\n        );\n      })\n      .then((result) => {\n        // Most common usecase is to export a single layer,\n        // so let's optimize the user experience for that.\n        if (result.length === 1) return result[0];\n        else return result;\n      });\n  }\n\n  _doExportFrame(exportOpts = {}) {\n    this._props.exporting = true;\n\n    // Resize to output resolution\n    this.resize();\n\n    // Draw at this output resolution\n    let drawResult = this.render();\n\n    // The self owned canvas (may be undefined...!)\n    const canvas = this.props.canvas;\n\n    // Get list of results from render\n    if (typeof drawResult === \"undefined\") {\n      drawResult = [canvas];\n    }\n    drawResult = [].concat(drawResult).filter(Boolean);\n\n    // Transform the canvas/file descriptors into a consistent format,\n    // and pull out any data URLs from canvas elements\n    drawResult = drawResult.map((result) => {\n      const hasDataObject =\n        typeof result === \"object\" &&\n        result &&\n        (\"data\" in result || \"dataURL\" in result);\n      const data = hasDataObject ? result.data : result;\n      const opts = hasDataObject ? assign({}, result, { data }) : { data };\n      if (isCanvas(data)) {\n        const encoding = opts.encoding || exportOpts.encoding;\n        const encodingQuality = defined(\n          opts.encodingQuality,\n          exportOpts.encodingQuality,\n          0.95\n        );\n        const { dataURL, extension, type } = exportCanvas(data, {\n          encoding,\n          encodingQuality,\n        });\n        return Object.assign(opts, { dataURL, extension, type });\n      } else {\n        return opts;\n      }\n    });\n\n    // Now return to regular rendering mode\n    this._props.exporting = false;\n    this.resize();\n    this.render();\n\n    // And now we can save each result\n    return Promise.all(\n      drawResult.map((result, i, layerList) => {\n        // By default, if rendering multiple layers we will give them indices\n        const curOpt = assign(\n          {\n            extension: \"\",\n            prefix: \"\",\n            suffix: \"\",\n          },\n          exportOpts,\n          result,\n          {\n            layer: i,\n            totalLayers: layerList.length,\n          }\n        );\n\n        // If export is explicitly not saving, make sure nothing saves\n        // Otherwise default to the layer save option, or fallback to true\n        const saveParam = exportOpts.save === false ? false : result.save;\n        curOpt.save = saveParam !== false;\n\n        // Resolve a full filename from all the options\n        curOpt.filename = resolveFilename(curOpt);\n\n        // Clean up some parameters that may be ambiguous to the user\n        delete curOpt.encoding;\n        delete curOpt.encodingQuality;\n\n        // Clean it up further by just removing undefined values\n        for (let k in curOpt) {\n          if (typeof curOpt[k] === \"undefined\") delete curOpt[k];\n        }\n\n        let savePromise = Promise.resolve({});\n        if (curOpt.save) {\n          // Whether to actually save (download) this fragment\n          const data = curOpt.data;\n          if (curOpt.dataURL) {\n            const dataURL = curOpt.dataURL;\n            savePromise = saveDataURL(dataURL, curOpt);\n          } else {\n            savePromise = saveFile(data, curOpt);\n          }\n        }\n        return savePromise.then((saveResult) => {\n          return Object.assign({}, curOpt, saveResult);\n        });\n      })\n    ).then((ev) => {\n      const savedEvents = ev.filter((e) => e.save);\n      if (savedEvents.length > 0) {\n        // Log the saved exports\n        const eventWithOutput = savedEvents.find((e) => e.outputName);\n        const isClient = savedEvents.some((e) => e.client);\n        const isStreaming = savedEvents.some((e) => e.stream);\n        let item;\n        // many files, just log how many were exported\n        if (savedEvents.length > 1) item = savedEvents.length;\n        // in CLI, we know exact path dirname\n        else if (eventWithOutput)\n          item = `${eventWithOutput.outputName}/${savedEvents[0].filename}`;\n        // in browser, we can only know it went to \"browser download folder\"\n        else item = `${savedEvents[0].filename}`;\n        let ofSeq = \"\";\n        if (exportOpts.sequence) {\n          const hasTotalFrames = isFinite(this.props.totalFrames);\n          ofSeq = hasTotalFrames\n            ? ` (frame ${exportOpts.frame + 1} / ${this.props.totalFrames})`\n            : ` (frame ${exportOpts.frame})`;\n        } else if (savedEvents.length > 1) {\n          ofSeq = ` files`;\n        }\n        const client = isClient ? \"canvas-sketch-cli\" : \"canvas-sketch\";\n        const action = isStreaming ? \"Streaming into\" : \"Exported\";\n        console.log(\n          `%c[${client}]%c ${action} %c${item}%c${ofSeq}`,\n          \"color: #8e8e8e;\",\n          \"color: initial;\",\n          \"font-weight: bold;\",\n          \"font-weight: initial;\"\n        );\n      }\n      if (typeof this.sketch.postExport === \"function\") {\n        this.sketch.postExport();\n      }\n      return ev;\n    });\n  }\n\n  _wrapContextScale(cb) {\n    this._preRender();\n    cb(this.props);\n    this._postRender();\n  }\n\n  _preRender() {\n    const props = this.props;\n\n    // Scale context for unit sizing\n    if (is2DContext(props.context) && !props.p5) {\n      props.context.save();\n      if (this.settings.scaleContext !== false) {\n        props.context.scale(props.scaleX, props.scaleY);\n      }\n    } else if (props.p5) {\n      props.p5.scale(\n        props.scaleX / props.pixelRatio,\n        props.scaleY / props.pixelRatio\n      );\n    }\n  }\n\n  _postRender() {\n    const props = this.props;\n\n    if (is2DContext(props.context) && !props.p5) {\n      props.context.restore();\n    }\n\n    // Flush by default, this may be revisited at a later point.\n    // We do this to ensure toDataURL can be called immediately after.\n    // Most likely browsers already handle this, so we may revisit this and\n    // remove it if it improves performance without any usability issues.\n    if (props.gl && this.settings.flush !== false && !props.p5) {\n      props.gl.flush();\n    }\n  }\n\n  tick() {\n    if (this.sketch && typeof this.sketch.tick === \"function\") {\n      this._preRender();\n      this.sketch.tick(this.props);\n      this._postRender();\n    }\n  }\n\n  render() {\n    if (this.props.p5) {\n      this._lastRedrawResult = undefined;\n      this.props.p5.redraw();\n      return this._lastRedrawResult;\n    } else {\n      return this.submitDrawCall();\n    }\n  }\n\n  submitDrawCall() {\n    if (!this.sketch) return;\n\n    const props = this.props;\n    this._preRender();\n\n    let drawResult;\n\n    if (typeof this.sketch === \"function\") {\n      drawResult = this.sketch(props);\n    } else if (typeof this.sketch.render === \"function\") {\n      drawResult = this.sketch.render(props);\n    }\n\n    this._postRender();\n\n    return drawResult;\n  }\n\n  update(opt = {}) {\n    // Currently update() is only focused on resizing,\n    // but later we will support other options like switching\n    // frames and such.\n    const notYetSupported = [\"animate\"];\n\n    Object.keys(opt).forEach((key) => {\n      if (notYetSupported.indexOf(key) >= 0) {\n        throw new Error(\n          `Sorry, the { ${key} } option is not yet supported with update().`\n        );\n      }\n    });\n\n    const oldCanvas = this._settings.canvas;\n    const oldContext = this._settings.context;\n\n    // Merge new options into settings\n    for (let key in opt) {\n      const value = opt[key];\n      if (typeof value !== \"undefined\") {\n        // ignore undefined\n        this._settings[key] = value;\n      }\n    }\n\n    // Merge in time props\n    const timeOpts = Object.assign({}, this._settings, opt);\n    if (\"time\" in opt && \"frame\" in opt)\n      throw new Error(\"You should specify { time } or { frame } but not both\");\n    else if (\"time\" in opt) delete timeOpts.frame;\n    else if (\"frame\" in opt) delete timeOpts.time;\n    if (\"duration\" in opt && \"totalFrames\" in opt)\n      throw new Error(\n        \"You should specify { duration } or { totalFrames } but not both\"\n      );\n    else if (\"duration\" in opt) delete timeOpts.totalFrames;\n    else if (\"totalFrames\" in opt) delete timeOpts.duration;\n\n    // Merge in user data without copying\n    if (\"data\" in opt) this._props.data = opt.data;\n\n    const timeProps = this.getTimeProps(timeOpts);\n    Object.assign(this._props, timeProps);\n\n    // If either canvas or context is changed, we should re-update\n    if (\n      oldCanvas !== this._settings.canvas ||\n      oldContext !== this._settings.context\n    ) {\n      const { canvas, context } = createCanvas(this._settings);\n\n      this.props.canvas = canvas;\n      this.props.context = context;\n\n      // Delete or add a 'gl' prop for convenience\n      this._setupGLKey();\n\n      // Re-mount the new canvas if it has no parent\n      this._appendCanvasIfNeeded();\n    }\n\n    // Special case to support P5.js\n    if (opt.p5 && typeof opt.p5 !== \"function\") {\n      this.props.p5 = opt.p5;\n      this.props.p5.draw = () => {\n        if (this._isP5Resizing) return;\n        this._lastRedrawResult = this.submitDrawCall();\n      };\n    }\n\n    // Update playing state if necessary\n    if (\"playing\" in opt) {\n      if (opt.playing) this.play();\n      else this.pause();\n    }\n\n    checkSettings(this._settings);\n\n    // Draw new frame\n    this.resize();\n    this.render();\n    return this.props;\n  }\n\n  resize() {\n    const oldSizes = this._getSizeProps();\n\n    const settings = this.settings;\n    const props = this.props;\n\n    // Recompute new properties based on current setup\n    const newProps = resizeCanvas(props, settings);\n\n    // Assign to current props\n    Object.assign(this._props, newProps);\n\n    // Now we actually update the canvas width/height and style props\n    const { pixelRatio, canvasWidth, canvasHeight, styleWidth, styleHeight } =\n      this.props;\n\n    // Update canvas settings\n    const canvas = this.props.canvas;\n    if (canvas && settings.resizeCanvas !== false) {\n      if (props.p5) {\n        // P5.js specific edge case\n        if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\n          this._isP5Resizing = true;\n          // This causes a re-draw :\\ so we ignore draws in the mean time... sorta hacky\n          props.p5.pixelDensity(pixelRatio);\n          props.p5.resizeCanvas(\n            canvasWidth / pixelRatio,\n            canvasHeight / pixelRatio,\n            false\n          );\n          this._isP5Resizing = false;\n        }\n      } else {\n        // Force canvas size\n        if (canvas.width !== canvasWidth) canvas.width = canvasWidth;\n        if (canvas.height !== canvasHeight) canvas.height = canvasHeight;\n      }\n      // Update canvas style\n      if (isBrowser() && settings.styleCanvas !== false) {\n        canvas.style.width = `${styleWidth}px`;\n        canvas.style.height = `${styleHeight}px`;\n      }\n    }\n\n    const newSizes = this._getSizeProps();\n    let changed = !deepEqual(oldSizes, newSizes);\n    if (changed) {\n      this._sizeChanged();\n    }\n    return changed;\n  }\n\n  _sizeChanged() {\n    // Send resize event to sketch\n    if (this.sketch && typeof this.sketch.resize === \"function\") {\n      this.sketch.resize(this.props);\n    }\n  }\n\n  animate() {\n    if (!this.props.playing) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Animation in Node.js is not yet supported\"\n      );\n      return;\n    }\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n\n    let now = rightNow();\n\n    const fps = this.props.fps;\n    const frameIntervalMS = 1000 / fps;\n    let deltaTimeMS = now - this._lastTime;\n\n    const duration = this.props.duration;\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n\n    let isNewFrame = true;\n    const playbackRate = this.settings.playbackRate;\n    if (playbackRate === \"fixed\") {\n      deltaTimeMS = frameIntervalMS;\n    } else if (playbackRate === \"throttle\") {\n      if (deltaTimeMS > frameIntervalMS) {\n        now = now - (deltaTimeMS % frameIntervalMS);\n        this._lastTime = now;\n      } else {\n        isNewFrame = false;\n      }\n    } else {\n      this._lastTime = now;\n    }\n\n    const deltaTime = deltaTimeMS / 1000;\n    let newTime = this.props.time + deltaTime * this.props.timeScale;\n\n    // Handle reverse time scale\n    if (newTime < 0 && hasDuration) {\n      newTime = duration + newTime;\n    }\n\n    // Re-start animation\n    let isFinished = false;\n    let isLoopStart = false;\n\n    const looping = this.settings.loop !== false;\n\n    if (hasDuration && newTime >= duration) {\n      // Re-start animation\n      if (looping) {\n        isNewFrame = true;\n        newTime = newTime % duration;\n        isLoopStart = true;\n      } else {\n        isNewFrame = false;\n        newTime = duration;\n        isFinished = true;\n      }\n\n      this._signalEnd();\n    }\n\n    if (isNewFrame) {\n      this.props.deltaTime = deltaTime;\n      this.props.time = newTime;\n      this.props.playhead = this._computePlayhead(newTime, duration);\n      const lastFrame = this.props.frame;\n      this.props.frame = this._computeCurrentFrame();\n      if (isLoopStart) this._signalBegin();\n      if (lastFrame !== this.props.frame) this.tick();\n      this.render();\n      this.props.deltaTime = 0;\n    }\n\n    if (isFinished) {\n      this.pause();\n    }\n  }\n\n  dispatch(cb) {\n    if (typeof cb !== \"function\")\n      throw new Error(\"must pass function into dispatch()\");\n    cb(this.props);\n    this.render();\n  }\n\n  mount() {\n    this._appendCanvasIfNeeded();\n  }\n\n  unmount() {\n    if (isBrowser()) {\n      window.removeEventListener(\"resize\", this._resizeHandler);\n      this._keyboardShortcuts.detach();\n    }\n    if (this.props.canvas.parentElement) {\n      this.props.canvas.parentElement.removeChild(this.props.canvas);\n    }\n  }\n\n  _appendCanvasIfNeeded() {\n    if (!isBrowser()) return;\n    if (\n      this.settings.parent !== false &&\n      this.props.canvas &&\n      !this.props.canvas.parentElement\n    ) {\n      const defaultParent = this.settings.parent || document.body;\n      defaultParent.appendChild(this.props.canvas);\n    }\n  }\n\n  _setupGLKey() {\n    if (this.props.context) {\n      if (isWebGLContext(this.props.context)) {\n        this._props.gl = this.props.context;\n      } else {\n        delete this._props.gl;\n      }\n    }\n  }\n\n  getTimeProps(settings = {}) {\n    // Get timing data\n    let duration = settings.duration;\n    let totalFrames = settings.totalFrames;\n    const timeScale = defined(settings.timeScale, 1);\n    const fps = defined(settings.fps, 24);\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n    const hasTotalFrames =\n      typeof totalFrames === \"number\" && isFinite(totalFrames);\n\n    const totalFramesFromDuration = hasDuration\n      ? Math.floor(fps * duration)\n      : undefined;\n    const durationFromTotalFrames = hasTotalFrames\n      ? totalFrames / fps\n      : undefined;\n    if (\n      hasDuration &&\n      hasTotalFrames &&\n      totalFramesFromDuration !== totalFrames\n    ) {\n      throw new Error(\n        \"You should specify either duration or totalFrames, but not both. Or, they must match exactly.\"\n      );\n    }\n\n    if (\n      typeof settings.dimensions === \"undefined\" &&\n      typeof settings.units !== \"undefined\"\n    ) {\n      console.warn(\n        `You've specified a { units } setting but no { dimension }, so the units will be ignored.`\n      );\n    }\n\n    totalFrames = defined(totalFrames, totalFramesFromDuration, Infinity);\n    duration = defined(duration, durationFromTotalFrames, Infinity);\n\n    const startTime = settings.time;\n    const startFrame = settings.frame;\n    const hasStartTime = typeof startTime === \"number\" && isFinite(startTime);\n    const hasStartFrame =\n      typeof startFrame === \"number\" && isFinite(startFrame);\n\n    // start at zero unless user specifies frame or time (but not both mismatched)\n    let time = 0;\n    let frame = 0;\n    let playhead = 0;\n    if (hasStartTime && hasStartFrame) {\n      throw new Error(\n        \"You should specify either start frame or time, but not both.\"\n      );\n    } else if (hasStartTime) {\n      // User specifies time, we infer frames from FPS\n      time = startTime;\n      playhead = this._computePlayhead(time, duration);\n      frame = this._computeFrame(playhead, time, totalFrames, fps);\n    } else if (hasStartFrame) {\n      // User specifies frame number, we infer time from FPS\n      frame = startFrame;\n      time = frame / fps;\n      playhead = this._computePlayhead(time, duration);\n    }\n\n    return {\n      playhead,\n      time,\n      frame,\n      duration,\n      totalFrames,\n      fps,\n      timeScale,\n    };\n  }\n\n  setup(settings = {}) {\n    if (this.sketch)\n      throw new Error(\"Multiple setup() calls not yet supported.\");\n\n    this._settings = Object.assign({}, settings, this._settings);\n\n    checkSettings(this._settings);\n\n    // Get initial canvas & context\n    const { context, canvas } = createCanvas(this._settings);\n\n    const timeProps = this.getTimeProps(this._settings);\n\n    // Initial render state features\n    this._props = {\n      ...timeProps,\n      canvas,\n      context,\n      deltaTime: 0,\n      started: false,\n      exporting: false,\n      playing: false,\n      recording: false,\n      settings: this.settings,\n      data: this.settings.data,\n\n      // Export some specific actions to the sketch\n      render: () => this.render(),\n      togglePlay: () => this.togglePlay(),\n      dispatch: (cb) => this.dispatch(cb),\n      tick: () => this.tick(),\n      resize: () => this.resize(),\n      update: (opt) => this.update(opt),\n      exportFrame: (opt) => this.exportFrame(opt),\n      record: () => this.record(),\n      play: () => this.play(),\n      pause: () => this.pause(),\n      stop: () => this.stop(),\n    };\n\n    // For WebGL sketches, a gl variable reads a bit better\n    this._setupGLKey();\n\n    // Trigger initial resize now so that canvas is already sized\n    // by the time we load the sketch\n    this.resize();\n  }\n\n  loadAndRun(canvasSketch, newSettings) {\n    return this.load(canvasSketch, newSettings).then(() => {\n      this.run();\n      return this;\n    });\n  }\n\n  unload() {\n    this.pause();\n    if (!this.sketch) return;\n    if (typeof this.sketch.unload === \"function\") {\n      this._wrapContextScale((props) => this.sketch.unload(props));\n    }\n    this._sketch = null;\n  }\n\n  destroy() {\n    this.unload();\n    this.unmount();\n  }\n\n  load(createSketch, newSettings) {\n    // User didn't specify a function\n    if (typeof createSketch !== \"function\") {\n      throw new Error(\n        \"The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)\"\n      );\n    }\n\n    if (this.sketch) {\n      this.unload();\n    }\n\n    if (typeof newSettings !== \"undefined\") {\n      this.update(newSettings);\n    }\n\n    // This is a bit of a tricky case; we set up the auto-scaling here\n    // in case the user decides to render anything to the context *before* the\n    // render() function... However, users should instead use begin() function for that.\n    this._preRender();\n\n    let preload = Promise.resolve();\n\n    // Because of P5.js's unusual structure, we have to do a bit of\n    // library-specific changes to support it properly.\n    if (this.settings.p5) {\n      if (!isBrowser()) {\n        throw new Error(\n          \"[canvas-sketch] ERROR: Using p5.js in Node.js is not supported\"\n        );\n      }\n      preload = new Promise((resolve) => {\n        let P5Constructor = this.settings.p5;\n        let preload;\n        if (P5Constructor.p5) {\n          preload = P5Constructor.preload;\n          P5Constructor = P5Constructor.p5;\n        }\n\n        // The sketch setup; disable loop, set sizing, etc.\n        const p5Sketch = (p5) => {\n          // Hook in preload if necessary\n          if (preload) p5.preload = () => preload(p5);\n          p5.setup = () => {\n            const props = this.props;\n            const isGL = this.settings.context === \"webgl\";\n            const renderer = isGL ? p5.WEBGL : p5.P2D;\n            p5.noLoop();\n            p5.pixelDensity(props.pixelRatio);\n            p5.createCanvas(\n              props.viewportWidth,\n              props.viewportHeight,\n              renderer\n            );\n            if (isGL && this.settings.attributes) {\n              p5.setAttributes(this.settings.attributes);\n            }\n\n            this.update({\n              p5,\n              canvas: p5.canvas,\n              context: p5._renderer.drawingContext,\n            });\n            resolve();\n          };\n        };\n\n        // Support global and instance P5.js modes\n        if (typeof P5Constructor === \"function\") {\n          new P5Constructor(p5Sketch);\n        } else {\n          if (typeof window.createCanvas !== \"function\") {\n            throw new Error(\n              \"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\"\n            );\n          }\n          p5Sketch(window);\n        }\n      });\n    }\n\n    return preload\n      .then(() => {\n        // Load the user's sketch\n        let loader = createSketch(this.props);\n        if (!isPromise(loader)) {\n          loader = Promise.resolve(loader);\n        }\n        return loader;\n      })\n      .then((sketch) => {\n        if (!sketch) sketch = {};\n        this._sketch = sketch;\n\n        // Once the sketch is loaded we can add the events\n        if (isBrowser()) {\n          this._keyboardShortcuts.attach();\n          window.addEventListener(\"resize\", this._resizeHandler);\n        }\n\n        this._postRender();\n\n        // The initial resize() in the constructor will not have\n        // triggered a resize() event on the sketch, since it was before\n        // the sketch was loaded. So we send the signal here, allowing\n        // users to react to the initial size before first render.\n        this._sizeChanged();\n        return this;\n      })\n      .catch((err) => {\n        console.warn(\n          \"Could not start sketch, the async loading function rejected with an error:\\n    Error: \" +\n            err.message\n        );\n        throw err;\n      });\n  }\n}\n\nexport default SketchManager;\n","import { getClientAPI } from '../util';\n\nexport default function (opt = {}) {\n  const handler = ev => {\n    if (!opt.enabled()) return;\n\n    const client = getClientAPI();\n    if (ev.keyCode === 83 && !ev.altKey && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + S\n      ev.preventDefault();\n      opt.save(ev);\n    } else if (ev.keyCode === 32) {\n      // Space\n      // TODO: what to do with this? keep it, or remove it?\n      opt.togglePlay(ev);\n    } else if (client && !ev.altKey && ev.keyCode === 75 && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + K, only when canvas-sketch-cli is used\n      ev.preventDefault();\n      opt.commit(ev);\n    }\n  };\n\n  const attach = () => {\n    window.addEventListener('keydown', handler);\n  };\n\n  const detach = () => {\n    window.removeEventListener('keydown', handler);\n  };\n\n  return {\n    attach,\n    detach\n  };\n}\n","import SketchManager from './core/SketchManager';\nimport PaperSizes from './paper-sizes';\nimport { getClientAPI, defined } from './util';\n\nconst CACHE = 'hot-id-cache';\nconst runtimeCollisions = [];\n\nfunction isHotReload () {\n  const client = getClientAPI();\n  return client && client.hot;\n}\n\nfunction cacheGet (id) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  return client[CACHE][id];\n}\n\nfunction cachePut (id, data) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  client[CACHE][id] = data;\n}\n\nfunction getTimeProp (oldManager, newSettings) {\n  // Static sketches ignore the time persistency\n  return newSettings.animate ? { time: oldManager.props.time } : undefined;\n}\n\nfunction canvasSketch (sketch, settings = {}) {\n  if (settings.p5) {\n    if (settings.canvas || (settings.context && typeof settings.context !== 'string')) {\n      throw new Error(`In { p5 } mode, you can't pass your own canvas or context, unless the context is a \"webgl\" or \"2d\" string`);\n    }\n\n    // Do not create a canvas on startup, since P5.js does that for us\n    const context = typeof settings.context === 'string' ? settings.context : false;\n    settings = Object.assign({}, settings, { canvas: false, context });\n  }\n\n  const isHot = isHotReload();\n  let hotID;\n  if (isHot) {\n    // Use a magic name by default, force user to define each sketch if they\n    // require more than one in an application. Open to other ideas on how to tackle\n    // this as well...\n    hotID = defined(settings.id, '$__DEFAULT_CANVAS_SKETCH_ID__$');\n  }\n  let isInjecting = isHot && typeof hotID === 'string';\n\n  if (isInjecting && runtimeCollisions.includes(hotID)) {\n    console.warn(`Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. `, hotID);\n    isInjecting = false;\n  }\n\n  let preload = Promise.resolve();\n\n  if (isInjecting) {\n    // Mark this as already spotted in this runtime instance\n    runtimeCollisions.push(hotID);\n\n    const previousData = cacheGet(hotID);\n    if (previousData) {\n      const next = () => {\n        // Grab new props from old sketch instance\n        const newProps = getTimeProp(previousData.manager, settings);\n        // Destroy the old instance\n        previousData.manager.destroy();\n        // Pass along new props\n        return newProps;\n      };\n\n      // Move along the next data...\n      preload = previousData.load.then(next).catch(next);\n    }\n  }\n\n  return preload.then(newProps => {\n    const manager = new SketchManager();\n    let result;\n    if (sketch) {\n      // Merge with incoming data\n      settings = Object.assign({}, settings, newProps);\n\n      // Apply settings and create a canvas\n      manager.setup(settings);\n\n      // Mount to DOM\n      manager.mount();\n\n      // load the sketch first\n      result = manager.loadAndRun(sketch);\n    } else {\n      result = Promise.resolve(manager);\n    }\n    if (isInjecting) {\n      cachePut(hotID, { load: result, manager });\n    }\n    return result;\n  });\n}\n\n// TODO: Figure out a nice way to export things.\ncanvasSketch.canvasSketch = canvasSketch;\ncanvasSketch.PaperSizes = PaperSizes;\n\nexport default canvasSketch;\n","// phases/phase1-reasons-for-leaving.js\nconst { createContainer } = require('../containers/container-system');\nconst { reasonsForLeaving, emotionsDuringImmigration } = require('../data/survey-data');\nconst { ReasonBubble, EmotionBubble, BubblePhysics } = require('../physics/bubble');\n\nclass Phase1 {\n  constructor(width, height) {\n    this.width = width;\n    this.height = height;\n    this.container = createContainer('popcorn-maker', width, height);\n    \n    // Bubble management\n    this.reasonBubbles = [];\n    this.emotionBubbles = [];\n    \n    // Timing and state\n    this.nextBubbleTime = 1.0;\n    this.bubbleIndex = 0;\n    this.maxIterations = 2;\n    \n    // Phase states\n    this.reasonsComplete = false;\n    this.emotionsTriggered = false;\n    this.emotionBubbleIndex = 0;\n    this.nextEmotionTime = 0;\n    \n    console.log('Phase 1 initialized with cleaned bubble system');\n    \n    // Add mouse click listener\n    this.setupMouseListener();\n  }\n  \n  setupMouseListener() {\n    const handleClick = () => {\n      if (this.reasonsComplete && !this.emotionsTriggered) {\n        this.emotionsTriggered = true;\n        this.nextEmotionTime = 0;\n        console.log('Emotions triggered by mouse click!');\n      }\n    };\n    \n    document.addEventListener('click', handleClick);\n    this.cleanup = () => document.removeEventListener('click', handleClick);\n  }\n  \n  // Create reason bubble using ReasonBubble class\n  createReasonBubble(wordData) {\n    return new ReasonBubble(wordData, this.container);\n  }\n  \n  // Create emotion bubble using EmotionBubble class\n  createEmotionBubble(wordData) {\n    return new EmotionBubble(wordData, this.container);\n  }\n  \n  // Purge all reason bubbles with pop animation\n  purgeReasonBubbles() {\n    console.log('Purging reason bubbles with pop animation...');\n    this.reasonBubbles = BubblePhysics.purgeBubbles(this.reasonBubbles);\n    this.bubbleIndex = 0;\n    this.reasonsComplete = false;\n  }\n  \n  // Purge all emotion bubbles with pop animation\n  purgeEmotionBubbles() {\n    console.log('Purging emotion bubbles with pop animation...');\n    this.emotionBubbles = BubblePhysics.purgeBubbles(this.emotionBubbles);\n    this.emotionBubbleIndex = 0;\n    this.emotionsTriggered = false;\n  }\n  \n  render({ context, time, width, height }) {\n    const deltaTime = 1/60;\n    \n    // Add reason bubbles\n    if (!this.reasonsComplete && time > this.nextBubbleTime) {\n      const totalReasonBubbles = reasonsForLeaving.length * this.maxIterations;\n      if (this.reasonBubbles.length < totalReasonBubbles) {\n        const dataIndex = this.bubbleIndex % reasonsForLeaving.length;\n        this.reasonBubbles.push(this.createReasonBubble(reasonsForLeaving[dataIndex]));\n        this.bubbleIndex++;\n        this.nextBubbleTime = time + 0.5 + Math.random() * 0.3;\n        console.log(`Added reason bubble: ${reasonsForLeaving[dataIndex].word}`);\n      } else {\n        this.reasonsComplete = true;\n        console.log('All reason bubbles complete! Click to trigger emotions.');\n      }\n    }\n    \n    // Add emotion bubbles (triggered by mouse click)\n    if (this.emotionsTriggered && time > this.nextEmotionTime) {\n      if (this.emotionBubbleIndex < emotionsDuringImmigration.length) {\n        const emotionData = emotionsDuringImmigration[this.emotionBubbleIndex];\n        this.emotionBubbles.push(this.createEmotionBubble(emotionData));\n        this.emotionBubbleIndex++;\n        this.nextEmotionTime = time + 0.8 + Math.random() * 0.4;\n        console.log(`Added emotion bubble: ${emotionData.word}`);\n      }\n    }\n    \n    // Update all bubbles using their own update methods\n    this.reasonBubbles.forEach(bubble => bubble.update(deltaTime));\n    this.emotionBubbles.forEach(bubble => bubble.update(deltaTime));\n    \n    // Remove destroyed bubbles (those that finished popping)\n    this.reasonBubbles = this.reasonBubbles.filter(bubble => !bubble.isDestroyed());\n    this.emotionBubbles = this.emotionBubbles.filter(bubble => !bubble.isDestroyed());\n    \n    // Handle collisions using BubblePhysics\n    const allBubbles = [...this.reasonBubbles, ...this.emotionBubbles];\n    BubblePhysics.checkCollisions(allBubbles);\n    \n    // Clear with dark background\n    context.fillStyle = '#1a1a1a';\n    context.fillRect(0, 0, width, height);\n    \n    // Draw container\n    this.container.render2D(context);\n    \n    // Draw all bubbles using their own render methods\n    this.reasonBubbles.forEach(bubble => bubble.render(context, time));\n    this.emotionBubbles.forEach(bubble => bubble.render(context, time));\n    \n    // UI overlay\n    this.renderUI(context, width, height);\n  }\n  \n  renderUI(context, width, height) {\n    // Stats\n    context.fillStyle = 'rgba(255, 255, 255, 0.8)';\n    context.font = '16px Arial';\n    context.textAlign = 'left';\n    context.fillText(`Reason Bubbles: ${this.reasonBubbles.length}`, 20, 30);\n    context.fillText(`Emotion Bubbles: ${this.emotionBubbles.length}`, 20, 50);\n    context.fillText(`Canvas: ${width} x ${height}`, 20, 70);\n    \n    // Title\n    context.fillStyle = 'rgba(255, 255, 255, 0.9)';\n    context.font = 'bold 28px Arial';\n    context.textAlign = 'center';\n    context.fillText('Part 1: The Decision - Reasons for Leaving & Emotions', width / 2, 40);\n    \n    // Interaction prompts\n    if (this.reasonsComplete && !this.emotionsTriggered) {\n      context.fillStyle = '#FFD700';\n      context.font = 'bold 32px Arial';\n      context.textAlign = 'center';\n      context.fillText('🖱️ CLICK TO TRIGGER EMOTIONS', width / 2, height - 60);\n    } else if (this.emotionsTriggered) {\n      context.fillStyle = '#90EE90';\n      context.font = 'bold 24px Arial';\n      context.textAlign = 'center';\n      context.fillText('✨ Emotions Activated!', width / 2, height - 60);\n    }\n    \n    // Debug buttons (optional - could be removed for production)\n    if (this.reasonBubbles.length > 0) {\n      context.fillStyle = 'rgba(255, 0, 0, 0.7)';\n      context.font = '14px Arial';\n      context.textAlign = 'right';\n      context.fillText('Press R to purge reasons', width - 20, height - 100);\n    }\n    \n    if (this.emotionBubbles.length > 0) {\n      context.fillStyle = 'rgba(0, 255, 0, 0.7)';\n      context.font = '14px Arial';\n      context.textAlign = 'right';\n      context.fillText('Press E to purge emotions', width - 20, height - 80);\n    }\n  }\n  \n  // Handle keyboard inputs for debugging\n  handleKeyPress(key) {\n    switch(key.toLowerCase()) {\n      case 'r':\n        this.purgeReasonBubbles();\n        break;\n      case 'e':\n        this.purgeEmotionBubbles();\n        break;\n    }\n  }\n  \n  isComplete(time) {\n    return false; // Phase continues indefinitely for now\n  }\n  \n  destroy() {\n    if (this.cleanup) {\n      this.cleanup();\n    }\n  }\n}\n\nmodule.exports = Phase1;","// physics/bubble.js - Enhanced with hierarchy\nconst { reasonsForLeaving, emotionsDuringImmigration } = require('../data/survey-data');\n\n// Base Bubble Class\nclass Bubble {\n  constructor(data, container) {\n    this.word = data.word;\n    this.responses = data.responses;\n    this.container = container;\n    \n    // Physics properties\n    this.targetRadius = this.calculateRadius(data.responses);\n    this.currentRadius = 0;\n    this.x = container.getRandomSpawnX(this.targetRadius);\n    this.y = container.getSpawnY(this.targetRadius);\n    this.velocityX = (Math.random() - 0.5) * 4;\n    this.velocityY = -8 - Math.random() * 6;\n    this.gravity = 0.4;\n    this.bounce = 0.6 + Math.random() * 0.2;\n    this.friction = 0.99;\n    this.mass = this.targetRadius / 20;\n    \n    // Animation properties\n    this.age = 0;\n    this.spawnTime = 0.2;\n    this.animationOffset = Math.random() * Math.PI * 2;\n    \n    // State\n    this.isPopping = false;\n    this.popStartTime = 0;\n    this.popDuration = 0.3;\n  }\n  \n  calculateRadius(responses) {\n    const maxResponses = Math.max(...reasonsForLeaving.map(w => w.responses));\n    return 50 + (responses / maxResponses) * 150;\n  }\n  \n  update(deltaTime) {\n    this.age += deltaTime;\n    this.updatePhysics(deltaTime);\n    this.container.handleCollisions(this);\n  }\n  \n  updatePhysics(deltaTime) {\n    // Handle popping animation when bubble is being destroyed\n    if (this.isPopping) {\n      const popProgress = (this.age - this.popStartTime) / this.popDuration;\n      if (popProgress >= 1) {\n        this.currentRadius = 0; // Bubble is gone\n        return;\n      }\n      // Shrinking pop animation\n      const popScale = 1 - Math.pow(popProgress, 2);\n      this.currentRadius = this.targetRadius * popScale;\n      return;\n    }\n    \n    // Spawn animation (growing)\n    if (this.age < this.spawnTime) {\n      const progress = this.age / this.spawnTime;\n      const popScale = progress < 0.7 ? \n        Math.pow(progress / 0.7, 0.5) : \n        1 + Math.sin((progress - 0.7) / 0.3 * Math.PI) * 0.3;\n      this.currentRadius = this.targetRadius * popScale;\n    } else {\n      this.currentRadius = this.targetRadius;\n    }\n    \n    // Physics (only if not popping and aged enough)\n    if (!this.isPopping && this.age > 0.05) {\n      this.velocityY += this.gravity;\n      this.velocityX *= this.friction;\n      this.velocityY *= this.friction;\n      \n      this.x += this.velocityX * deltaTime * 60;\n      this.y += this.velocityY * deltaTime * 60;\n    }\n  }\n  \n  // Start the popping animation\n  startPop() {\n    if (!this.isPopping) {\n      this.isPopping = true;\n      this.popStartTime = this.age;\n    }\n  }\n  \n  // Check if bubble is completely gone\n  isDestroyed() {\n    return this.isPopping && (this.age - this.popStartTime) >= this.popDuration;\n  }\n  \n  // Override in subclasses\n  render(context, time) {\n    throw new Error('render method must be implemented in subclass');\n  }\n  \n  // Helper to convert hex to RGB\n  hexToRgb(hex) {\n    if (Array.isArray(hex)) {\n      return { r: hex[0] * 255, g: hex[1] * 255, b: hex[2] * 255 };\n    }\n    \n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : { r: 128, g: 128, b: 128 };\n  }\n}\n\n// Reason Bubble (dark, representing hardships)\nclass ReasonBubble extends Bubble {\n  constructor(data, container) {\n    super(data, container);\n    this.type = 'reason';\n    this.color = '#333333'; // Dark gray for reasons\n    this.gravity = 0.4;\n    this.friction = 0.99;\n  }\n  \n  calculateRadius(responses) {\n    const maxResponses = Math.max(...reasonsForLeaving.map(w => w.responses));\n    return 50 + (responses / maxResponses) * 150;\n  }\n  \n  render(context, time) {\n    if (this.currentRadius <= 0) return;\n    \n    // Subtle gradient for depth\n    const gradient = context.createRadialGradient(\n      this.x - this.currentRadius * 0.3,\n      this.y - this.currentRadius * 0.3,\n      0,\n      this.x,\n      this.y,\n      this.currentRadius\n    );\n    \n    gradient.addColorStop(0, '#555555');\n    gradient.addColorStop(0.7, '#333333');\n    gradient.addColorStop(1, '#111111');\n    \n    // Main bubble\n    context.beginPath();\n    context.arc(this.x, this.y, this.currentRadius, 0, Math.PI * 2);\n    context.fillStyle = gradient;\n    context.fill();\n    \n    // Subtle outline\n    context.beginPath();\n    context.arc(this.x, this.y, this.currentRadius, 0, Math.PI * 2);\n    context.strokeStyle = 'rgba(100, 100, 100, 0.6)';\n    context.lineWidth = 2;\n    context.stroke();\n    \n    // Small highlight\n    context.beginPath();\n    context.arc(\n      this.x - this.currentRadius * 0.3,\n      this.y - this.currentRadius * 0.3,\n      this.currentRadius * 0.25,\n      0, Math.PI * 2\n    );\n    context.fillStyle = 'rgba(255, 255, 255, 0.3)';\n    context.fill();\n    \n    // Text\n    if (this.currentRadius > 20 && this.age > this.spawnTime) {\n      context.fillStyle = '#CCCCCC';\n      context.font = `bold ${Math.min(40, this.currentRadius / 4)}px Arial`;\n      context.textAlign = 'center';\n      context.textBaseline = 'middle';\n      context.fillText(this.word, this.x, this.y);\n    }\n  }\n}\n\n// Emotion Bubble (colorful, representing feelings)\nclass EmotionBubble extends Bubble {\n  constructor(data, container) {\n    super(data, container);\n    this.type = 'emotion';\n    this.baseColor = data.color;\n    this.color = this.hexToRgb(data.color);\n    this.gravity = 0.3;\n    this.friction = 0.99;\n    this.spawnTime = 0.25;\n  }\n  \n  calculateRadius(responses) {\n    const maxResponses = Math.max(...emotionsDuringImmigration.map(w => w.responses));\n    return 60 + (responses / maxResponses) * 120;\n  }\n  \n  render(context, time) {\n    if (this.currentRadius <= 0) return;\n    \n    const { r, g, b } = this.color;\n    \n    // Beautiful animated gradient with survey colors\n    const gradient = context.createRadialGradient(\n      this.x - this.currentRadius * 0.4,\n      this.y - this.currentRadius * 0.4,\n      0,\n      this.x,\n      this.y,\n      this.currentRadius\n    );\n    \n    // Create color variations\n    const animationTime = time + this.animationOffset;\n    const wave = Math.sin(animationTime * 2) * 0.2 + 0.8;\n    \n    const color1 = this.baseColor;\n    const color2 = `rgb(${Math.floor(r * 0.6)}, ${Math.floor(g * 0.6)}, ${Math.floor(b * 0.6)})`;\n    const color3 = `rgba(${Math.floor(r * 1.3)}, ${Math.floor(g * 1.3)}, ${Math.floor(b * 1.3)}, 0.8)`;\n    \n    gradient.addColorStop(0, color3); // Bright center\n    gradient.addColorStop(0.5, color1); // Main survey color\n    gradient.addColorStop(1, color2); // Darker edge\n    \n    // Draw main bubble\n    context.beginPath();\n    context.arc(this.x, this.y, this.currentRadius, 0, Math.PI * 2);\n    context.fillStyle = gradient;\n    context.fill();\n    \n    // Animated outline with survey color\n    const outlineAlpha = Math.sin(animationTime * 3) * 0.3 + 0.7;\n    context.beginPath();\n    context.arc(this.x, this.y, this.currentRadius, 0, Math.PI * 2);\n    context.strokeStyle = `rgba(${r}, ${g}, ${b}, ${outlineAlpha})`;\n    context.lineWidth = 3;\n    context.stroke();\n    \n    // Bright highlight\n    context.beginPath();\n    context.arc(\n      this.x - this.currentRadius * 0.4,\n      this.y - this.currentRadius * 0.4,\n      this.currentRadius * 0.2,\n      0, Math.PI * 2\n    );\n    context.fillStyle = 'rgba(255, 255, 255, 0.8)';\n    context.fill();\n    \n    // Sparkle effects for emotions\n    if (this.age > this.spawnTime) {\n      for (let i = 0; i < 3; i++) {\n        const angle = time * 2 + this.animationOffset + i * (Math.PI * 2 / 3);\n        const sparkleX = this.x + Math.cos(angle) * this.currentRadius * 0.7;\n        const sparkleY = this.y + Math.sin(angle) * this.currentRadius * 0.7;\n        const sparkleAlpha = Math.sin(time * 4 + i) * 0.5 + 0.5;\n        \n        context.fillStyle = `rgba(255, 255, 255, ${sparkleAlpha * 0.6})`;\n        context.beginPath();\n        context.arc(sparkleX, sparkleY, 3, 0, Math.PI * 2);\n        context.fill();\n      }\n    }\n    \n    // Text\n    if (this.currentRadius > 20 && this.age > this.spawnTime) {\n      context.fillStyle = '#FFFFFF';\n      context.font = `bold ${Math.min(40, this.currentRadius / 4)}px Arial`;\n      context.textAlign = 'center';\n      context.textBaseline = 'middle';\n      context.fillText(this.word, this.x, this.y);\n    }\n  }\n}\n\n// Bubble collision detection utility\nclass BubblePhysics {\n  static checkCollisions(bubbles) {\n    for (let i = 0; i < bubbles.length; i++) {\n      for (let j = i + 1; j < bubbles.length; j++) {\n        const bubble1 = bubbles[i];\n        const bubble2 = bubbles[j];\n        \n        // Skip if either bubble is too young or popping\n        if (bubble1.age < 0.1 || bubble2.age < 0.1 || \n            bubble1.isPopping || bubble2.isPopping) continue;\n        \n        const dx = bubble2.x - bubble1.x;\n        const dy = bubble2.y - bubble1.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const minDistance = bubble1.currentRadius + bubble2.currentRadius;\n        \n        if (distance < minDistance && distance > 0) {\n          // Collision response\n          const overlap = minDistance - distance;\n          const separationX = (dx / distance) * overlap * 0.5;\n          const separationY = (dy / distance) * overlap * 0.5;\n          \n          bubble1.x -= separationX;\n          bubble1.y -= separationY;\n          bubble2.x += separationX;\n          bubble2.y += separationY;\n          \n          // Velocity exchange based on mass\n          const totalMass = bubble1.mass + bubble2.mass;\n          const velocityChangeX = (bubble2.velocityX - bubble1.velocityX) * 0.5;\n          const velocityChangeY = (bubble2.velocityY - bubble1.velocityY) * 0.5;\n          \n          bubble1.velocityX += velocityChangeX * (bubble2.mass / totalMass);\n          bubble1.velocityY += velocityChangeY * (bubble2.mass / totalMass);\n          bubble2.velocityX -= velocityChangeX * (bubble1.mass / totalMass);\n          bubble2.velocityY -= velocityChangeY * (bubble1.mass / totalMass);\n        }\n      }\n    }\n  }\n  \n  static purgeBubbles(bubbles) {\n    // Start pop animation for all bubbles\n    bubbles.forEach(bubble => bubble.startPop());\n    \n    // Return only non-destroyed bubbles\n    return bubbles.filter(bubble => !bubble.isDestroyed());\n  }\n}\n\nmodule.exports = {\n  Bubble,\n  ReasonBubble,\n  EmotionBubble,\n  BubblePhysics\n};","\nglobal.CANVAS_SKETCH_DEFAULT_STORAGE_KEY = window.location.href;\n"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,KAAAJ,EAAAI,GAAA,KAAAE,EAAA,mBAAAC,iBAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,MAAAI,EAAA,OAAAA,EAAAJ,GAAA,OAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,WAAAK,EAAAE,KAAA,mBAAAF,CAAA,KAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,MAAA,EAAAa,IAAAC,QAAAd,EAAAC,EAAAC,EAAAC,EAAA,QAAAD,EAAAG,GAAAS,OAAA,SAAAL,EAAA,mBAAAD,iBAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,CAAA,eAAAI,EAAAS,EAAAH,GCWAG,EAAAH,QAAA,CAAAI,SAVA,CAEAC,SAAA,EACAC,aAAA,EACAC,YAAA,EACAC,SAAA,EAEAC,aAAA,Y,yBCNA,MAAAC,EACA,WAAAC,CAAAC,EAAAC,GACAC,KAAAF,QACAE,KAAAD,SACAC,KAAAC,QAAA,GACAD,KAAAE,OAAAF,KAAAG,iBACA,CAEA,eAAAA,GAEA,MAAAC,EAAAC,KAAAC,IAAAN,KAAAF,MAAA,EAAAE,KAAAC,QAAA,GAAAD,KAAAF,OACAS,EAAAF,KAAAC,IAAAN,KAAAD,OAAA,EAAAC,KAAAC,QAAA,GAAAD,KAAAD,QAEA,OACAS,GAAAR,KAAAF,MAAAM,GAAA,EACAK,GAAAT,KAAAD,OAAAQ,GAAA,EACAT,MAAAM,EACAL,OAAAQ,EAEA,CAEA,eAAAG,CAAAC,EAAA,IACA,OAAAX,KAAAE,OAAAM,EAAAG,EAAAN,KAAAO,UAAAZ,KAAAE,OAAAJ,MAAA,EAAAa,EACA,CAEA,SAAAE,CAAAF,EAAA,IACA,OAAAX,KAAAE,OAAAO,EAAAT,KAAAE,OAAAH,OAAAY,CACA,CAEA,gBAAAG,CAAAC,GAEA,CAGA,QAAAC,CAAAC,GAEA,EAIA,MAAAC,UAAAtB,EACA,WAAAC,CAAAC,EAAAC,GACAoB,MAAArB,EAAAC,GACAC,KAAAoB,KAAA,eACA,CAEA,gBAAAN,CAAAC,GAEAA,EAAAN,EAAAM,EAAAM,cAAArB,KAAAE,OAAAO,EAAAT,KAAAE,OAAAH,SACAgB,EAAAN,EAAAT,KAAAE,OAAAO,EAAAT,KAAAE,OAAAH,OAAAgB,EAAAM,cACAN,EAAAO,YAAAP,EAAAQ,QAIAR,EAAAP,EAAAO,EAAAM,cAAArB,KAAAE,OAAAM,IACAO,EAAAP,EAAAR,KAAAE,OAAAM,EAAAO,EAAAM,cACAN,EAAAS,YAAAT,EAAAQ,QAIAR,EAAAP,EAAAO,EAAAM,cAAArB,KAAAE,OAAAM,EAAAR,KAAAE,OAAAJ,QACAiB,EAAAP,EAAAR,KAAAE,OAAAM,EAAAR,KAAAE,OAAAJ,MAAAiB,EAAAM,cACAN,EAAAS,YAAAT,EAAAQ,OAIA,CAGA,QAAAP,CAAAC,GACAA,EAAAQ,YAAA,OACAR,EAAAS,UAAA,EACAT,EAAAU,YAGAV,EAAAW,OAAA5B,KAAAE,OAAAM,EAAAR,KAAAE,OAAAO,GACAQ,EAAAY,OAAA7B,KAAAE,OAAAM,EAAAR,KAAAE,OAAAO,EAAAT,KAAAE,OAAAH,QACAkB,EAAAY,OAAA7B,KAAAE,OAAAM,EAAAR,KAAAE,OAAAJ,MAAAE,KAAAE,OAAAO,EAAAT,KAAAE,OAAAH,QACAkB,EAAAY,OAAA7B,KAAAE,OAAAM,EAAAR,KAAAE,OAAAJ,MAAAE,KAAAE,OAAAO,GAEAQ,EAAAa,SAGAb,EAAAc,UAAA,OAIAd,EAAAe,SAAAhC,KAAAE,OAAAM,EAAAyB,EAAAjC,KAAAE,OAAAO,EAAAT,KAAAE,OAAAH,OAAAkC,EAHA,KAMAhB,EAAAe,SAAAhC,KAAAE,OAAAM,EAAAR,KAAAE,OAAAJ,MAAAmC,EAAAjC,KAAAE,OAAAO,EAAAT,KAAAE,OAAAH,OAAAkC,EANA,KASAhB,EAAAe,SAAAhC,KAAAE,OAAAM,EAAAyB,EAAAjC,KAAAE,OAAAO,EAAAwB,EATA,KAYAhB,EAAAe,SAAAhC,KAAAE,OAAAM,EAAAR,KAAAE,OAAAJ,MAAAmC,EAAAjC,KAAAE,OAAAO,EAAAwB,EAZA,IAaA,EAIA,MAAAC,UAAAtC,EACA,WAAAC,CAAAC,EAAAC,GACAoB,MAAArB,EAAAC,GACAC,KAAAoB,KAAA,gBAEA,CAEA,gBAAAN,CAAAC,GAEAI,MAAAL,kBAAAK,MAAAL,iBAAAC,EACA,CAEA,QAAAC,CAAAC,GAEAA,EAAAQ,YAAA,OACAR,EAAAS,UAAA,EACAT,EAAAkB,WAAAnC,KAAAE,OAAAM,EAAAR,KAAAE,OAAAO,EAAAT,KAAAE,OAAAJ,MAAAE,KAAAE,OAAAH,OACA,EAIA,MAAAqC,UAAAxC,EACA,WAAAC,CAAAC,EAAAC,GACAoB,MAAArB,EAAAC,GACAC,KAAAoB,KAAA,iBAEA,CAEA,gBAAAN,CAAAC,GAEAI,MAAAL,kBAAAK,MAAAL,iBAAAC,EACA,CAEA,QAAAC,CAAAC,GAEAA,EAAAQ,YAAA,OACAR,EAAAS,UAAA,EACAT,EAAAkB,WAAAnC,KAAAE,OAAAM,EAAAR,KAAAE,OAAAO,EAAAT,KAAAE,OAAAJ,MAAAE,KAAAE,OAAAH,OACA,EAiBAV,EAAAH,QAAA,CACAU,gBACAsB,wBACAgB,yBACAE,0BACAC,gBAlBA,SAAAjB,EAAAtB,EAAAC,GACA,OAAAqB,GACA,oBACA,WAAAF,EAAApB,EAAAC,GACA,qBACA,WAAAmC,EAAApC,EAAAC,GACA,sBACA,WAAAqC,EAAAtC,EAAAC,GACA,QACA,WAAAH,EAAAE,EAAAC,GAEA,E,yBC1JA,MAAAuC,EAAA,CACAC,KAAA,UACAC,MAAA,UACAC,QAAA,UACAC,SAAA,UACAC,QAAA,UACAC,MAAA,UACAC,OAAA,UACAC,eAAA,UACAC,WAAA,UACAC,OAAA,UACAC,KAAA,WAmCA5D,EAAAH,QAAA,CACAoD,gBACAY,kBAjCA,CACA,CAAAC,KAAA,wBAAAC,MAAA,WAAAC,UAAA,IACA,CAAAF,KAAA,qBAAAC,MAAA,WAAAC,UAAA,GACA,CAAAF,KAAA,WAAAC,MAAA,WAAAC,UAAA,GACA,CAAAF,KAAA,uBAAAC,MAAA,WAAAC,UAAA,GACA,CAAAF,KAAA,mBAAAC,MAAA,WAAAC,UAAA,GACA,CAAAF,KAAA,8BAAAC,MAAA,WAAAC,UAAA,GACA,CAAAF,KAAA,4BAAAC,MAAA,WAAAC,UAAA,GACA,CAAAF,KAAA,iBAAAC,MAAA,WAAAC,UAAA,GACA,CAAAF,KAAA,6BAAAC,MAAA,WAAAC,UAAA,IAyBAC,0BArBA,CACA,CAAAH,KAAA,OAAAC,MAAAd,EAAA,KAAAe,UAAA,IACA,CAAAF,KAAA,OAAAC,MAAAd,EAAA,KAAAe,UAAA,IACA,CAAAF,KAAA,UAAAC,MAAAd,EAAA,QAAAe,UAAA,GACA,CAAAF,KAAA,SAAAC,MAAAd,EAAA,OAAAe,UAAA,GACA,CAAAF,KAAA,aAAAC,MAAAd,EAAA,WAAAe,UAAA,GACA,CAAAF,KAAA,UAAAC,MAAAd,EAAA,QAAAe,UAAA,GACA,CAAAF,KAAA,QAAAC,MAAAd,EAAA,MAAAe,UAAA,GACA,CAAAF,KAAA,QAAAC,MAAAd,EAAA,MAAAe,UAAA,IAcAE,uBAVA,CACA,CAAAJ,KAAA,YAAAC,MAAA,WAAAC,UAAA,IACA,CAAAF,KAAA,UAAAC,MAAA,WAAAC,UAAA,IACA,CAAAF,KAAA,aAAAC,MAAA,WAAAC,UAAA,K,yBC3CA,MAAAG,EAAA5E,EAAA,iBACA6E,EAAA7E,EAAA,wCACAU,YAAAV,EAAA,qBAsDA4E,EApDA,EAAA1D,QAAAC,aACA2D,QAAAC,IAAA,uCAAA7D,QAAAC,WAGA,MAAA6D,EAAA,IAAAH,EAAA3D,EAAAC,GAIA,MAAA8D,EAAAC,IACAF,KAAAC,gBACAD,EAAAC,eAAAC,EAAAC,MAKA,OAFAC,SAAAC,iBAAA,UAAAJ,GAEA,CACA,MAAAK,EAAAjD,UAAAkD,OAAArE,QAAAC,WAEA6D,KAAAM,QACAN,EAAAM,OAAA,CACAjD,UACAkD,OAhBA,EAiBArE,QACAC,UAGA,EAEA,MAAAqE,EAAAtE,QAAAC,WAEA6D,IACAA,EAAA9D,QACA8D,EAAA7D,SAEA6D,EAAAS,YACAT,EAAAS,UAAAvE,QACA8D,EAAAS,UAAAtE,UAGA,EAEA,MAAAuE,GAEAN,SAAAO,oBAAA,UAAAV,GACAD,KAAAY,SACAZ,EAAAY,SAEA,IAKAlF,E,iRClDA,IAAImF,EAAwBC,OAAOD,sBAC/BE,EAAiBD,OAAOE,UAAUD,eAClCE,EAAmBH,OAAOE,UAAUE,qBAsDxC,IAAAC,EA5CA,WACC,IACC,IAAKL,OAAOM,OACX,OAAO,EAMR,IAAIC,EAAQ,IAAIC,OAAO,OAEvB,GADAD,EAAM,GAAK,KACkC,MAAzCP,OAAOS,oBAAoBF,GAAO,GACrC,OAAO,EAKR,IADA,IAAIG,EAAQ,GACH3G,EAAI,EAAGA,EAAI,GAAIA,IACvB2G,EAAM,IAAMF,OAAOG,aAAa5G,IAAMA,EAKvC,GAAwB,eAHXiG,OAAOS,oBAAoBC,GAAOE,IAAI,SAAUhH,GAC5D,OAAO8G,EAAM9G,E,GAEHiH,KAAK,IACf,OAAO,EAIR,IAAIC,EAAQ,GAIZ,MAHA,uBAAuBC,MAAM,IAAIC,QAAQ,SAAUC,GAClDH,EAAMG,GAAUA,C,GAGf,yBADEjB,OAAOkB,KAAKlB,OAAOM,OAAO,GAAIQ,IAAQD,KAAK,G,CAM9C,MAAOM,GAER,OAAO,C,EAIQC,GAAoBpB,OAAOM,OAAS,SAAUe,EAAQC,GAKtE,IAJA,IAAIC,EAEAC,EADAC,EAtDL,SAAkBC,GACjB,GAAIA,QACH,MAAM,IAAIC,UAAU,yDAGrB,OAAO3B,OAAO0B,E,CAiDLE,CAASP,GAGTQ,EAAI,EAAGA,EAAIC,UAAUpH,OAAQmH,IAAK,CAG1C,IAAK,IAAIxC,KAFTkC,EAAOvB,OAAO8B,UAAUD,IAGnB5B,EAAexF,KAAK8G,EAAMlC,KAC7BoC,EAAGpC,GAAOkC,EAAKlC,IAIjB,GAAIU,EAAuB,CAC1ByB,EAAUzB,EAAsBwB,GAChC,IAAK,IAAIxH,EAAI,EAAGA,EAAIyH,EAAQ9G,OAAQX,IAC/BoG,EAAiB1F,KAAK8G,EAAMC,EAAQzH,MACvC0H,EAAGD,EAAQzH,IAAMwH,EAAKC,EAAQzH,I,EAMlC,OAAO0H,C,iJCxFR,IAAAM,EACEC,EAAOC,aACPD,EAAOC,YAAYC,IAAM,WACvB,OAAOD,YAAYC,K,EACjBC,KAAKD,KAAO,WACd,OAAQ,IAAIC,I,ECLhBC,EAEA,SAAmBC,GACjB,QAASA,IAAuB,iBAARA,GAAmC,mBAARA,IAA2C,mBAAbA,EAAIC,I,ECHvF,IAAAC,EAEA,SAAiBb,GACf,SAASA,GAAsB,iBAARA,KAEA,iBAAXc,QAA8C,iBAAhBA,OAAOC,KAC1Cf,aAAec,OAAOC,KACE,iBAAjBf,EAAIgB,UACa,iBAAjBhB,EAAIiB,S,ECJb,SAASC,IACd,MAAyB,oBAAXJ,QAA0BA,OAAO,oB,CAG1C,SAASK,IACd,I,gBAAS9I,EAAI,EAAGA,EAAI+H,UAAUpH,OAAQX,IACpC,GAAoB,MAAhB+I,EAAU/I,GACZ,OAAO+I,EAAU/I,E,CAMhB,SAASgJ,IACd,MAA2B,oBAAbzD,Q,CAYT,SAAS0D,EAAYC,GAC1B,OACEA,GACoB,mBAAbA,EAAIC,MACU,mBAAdD,EAAIE,OACY,mBAAhBF,EAAIG,O,KCrBXC,E,kBCVJ,SAASC,EAAMjB,GACb,IAAInB,EAAO,GACX,IAAK,IAAI7B,KAAOgD,EAAKnB,EAAKqC,KAAKlE,GAC/B,OAAO6B,C,EAPCvG,EAAAH,QAAwC,mBAAhBwF,OAAOkB,KACrClB,OAAOkB,KAAOoC,GAElBA,KAAeA,C,qBCHf,IAAIE,EAEI,sBAFqB,WAC3B,OAAOxD,OAAOE,UAAUuD,SAAShJ,KAAKqH,UACvC,CAF4B,GAO7B,SAAS4B,EAAUC,GACjB,MAAiD,sBAA1C3D,OAAOE,UAAUuD,SAAShJ,KAAKkJ,E,CAIxC,SAASC,EAAYD,GACnB,OAAOA,GACY,iBAAVA,GACiB,iBAAjBA,EAAOjJ,QACdsF,OAAOE,UAAUD,eAAexF,KAAKkJ,EAAQ,YAC5C3D,OAAOE,UAAUE,qBAAqB3F,KAAKkJ,EAAQ,YACpD,C,EAdJnJ,EAAUG,EAAAH,QAAiBgJ,EAAyBE,EAAYE,GAEhEF,UAAoBA,EAKpBlJ,EAAAoJ,YAAsBA,CAQrB,G,gBCnBD,IAAIC,EAASC,MAAM5D,UAAU6D,MAIzBC,EAAYrJ,EAAAH,QAAiB,SAAUyJ,EAAQC,EAAUC,GAG3D,OAFKA,IAAMA,EAAO,IAEdF,IAAWC,IAGJD,aAAkB9B,MAAQ+B,aAAoB/B,KAChD8B,EAAOG,YAAcF,EAASE,WAI3BH,IAAWC,GAA6B,iBAAVD,GAAyC,iBAAZC,EAC9DC,EAAKE,OAASJ,IAAWC,EAAWD,GAAUC,EA0BzD,SAAkB9J,EAAGkK,EAAGH,GACtB,IAAIpK,EAAGsF,EACP,GAAIkF,EAAkBnK,IAAMmK,EAAkBD,GAC5C,OAAO,EAET,GAAIlK,EAAE8F,YAAcoE,EAAEpE,UAAW,OAAO,EAGxC,GAAIsE,EAAYpK,GACd,QAAKoK,EAAYF,KAGjBlK,EAAIyJ,EAAOpJ,KAAKL,GAChBkK,EAAIT,EAAOpJ,KAAK6J,GACTN,EAAU5J,EAAGkK,EAAGH,IAEzB,GAAIM,EAASrK,GAAI,CACf,IAAKqK,EAASH,GACZ,OAAO,EAET,GAAIlK,EAAEM,SAAW4J,EAAE5J,OAAQ,OAAO,EAClC,IAAKX,EAAI,EAAGA,EAAIK,EAAEM,OAAQX,IACxB,GAAIK,EAAEL,KAAOuK,EAAEvK,GAAI,OAAO,EAE5B,OAAO,C,CAET,IACE,IAAI2K,EAAKxD,EAAW9G,GAChBuK,EAAKzD,EAAWoD,E,CACpB,MAAO3K,GACP,OAAO,C,CAIT,GAAI+K,EAAGhK,QAAUiK,EAAGjK,OAClB,OAAO,EAKT,IAHAgK,EAAGE,OACHD,EAAGC,OAEE7K,EAAI2K,EAAGhK,OAAS,EAAGX,GAAK,EAAGA,IAC9B,GAAI2K,EAAG3K,IAAM4K,EAAG5K,GACd,OAAO,EAIX,IAAKA,EAAI2K,EAAGhK,OAAS,EAAGX,GAAK,EAAGA,IAE9B,IAAKiK,EAAU5J,EADfiF,EAAMqF,EAAG3K,IACcuK,EAAEjF,GAAM8E,GAAO,OAAO,EAE/C,cAAc/J,UAAakK,C,CAnElBO,CAASZ,EAAQC,EAAUC,G,EAItC,SAASI,EAAkBO,GACzB,OAAOA,O,CAGT,SAASL,EAAU3I,GACjB,SAAKA,GAAkB,iBAANA,GAAsC,iBAAbA,EAAEpB,UACtB,mBAAXoB,EAAEiJ,MAA0C,mBAAZjJ,EAAEiI,SAGzCjI,EAAEpB,OAAS,GAAqB,iBAAToB,EAAE,I,uBCxB/B,WAGE,IACQkJ,EACAC,EACAC,EAHJC,GACIH,EAAQ,mEACRC,EAAW,uIACXC,EAAe,cAGZ,SAAUE,EAAMC,EAAMC,EAAKC,GAchC,GAXyB,IAArBzD,UAAUpH,QAAiC,YA2KzC,QADEgH,EA1K6B0D,GA4KlC,YAGGI,IAAR9D,EACK,YAGU,iBAARA,SACKA,EAGZoC,MAAM2B,QAAQ/D,GACT,QAGF,GAAG+B,SAAShJ,KAAKiH,GACrBqC,MAAM,GAAI,GAAG2B,gBA5LkD,KAAKC,KAAKP,KACpEC,EAAOD,EACPA,OAAOI,IAGTJ,EAAOA,GAAQ,IAAIjD,gBAEEA,OACnBiD,EAAO,IAAIjD,KAAKiD,IAGdQ,MAAMR,GACR,MAAMzD,UAAU,gBA8J1B,IAAgBD,EAxJJmE,GAHJR,EAAO7E,OAAO2E,EAAWW,MAAMT,IAASA,GAAQF,EAAWW,MAAe,UAGrD/B,MAAM,EAAG,GACZ,SAAd8B,GAAsC,SAAdA,IAC1BR,EAAOA,EAAKtB,MAAM,GAClBuB,GAAM,EACY,SAAdO,IACFN,GAAM,IAIV,IAAIQ,EAAIT,EAAM,SAAW,MACrBU,EAAIZ,EAAKW,EAAI,UACbE,EAAIb,EAAKW,EAAI,SACbG,EAAId,EAAKW,EAAI,WACbhK,EAAIqJ,EAAKW,EAAI,cACbI,EAAIf,EAAKW,EAAI,WACbK,EAAIhB,EAAKW,EAAI,aACblE,EAAIuD,EAAKW,EAAI,aACbM,EAAIjB,EAAKW,EAAI,kBACbjM,EAAIwL,EAAM,EAAIF,EAAKkB,oBACnBC,EA2FZ,SAAiBnB,GAEf,IAAIoB,EAAiB,IAAIrE,KAAKiD,EAAKqB,cAAerB,EAAKsB,WAAYtB,EAAKuB,WAGxEH,EAAeI,QAAQJ,EAAeG,WAAcH,EAAeK,SAAW,GAAK,EAAK,GAGxF,IAAIC,EAAgB,IAAI3E,KAAKqE,EAAeC,cAAe,EAAG,GAG9DK,EAAcF,QAAQE,EAAcH,WAAcG,EAAcD,SAAW,GAAK,EAAK,GAGrF,IAAIE,EAAKP,EAAeF,oBAAsBQ,EAAcR,oBAK5D,OAJAE,EAAeQ,SAASR,EAAeS,WAAaF,GAI7C,EAAIpL,KAAKuL,OADAV,EAAiBM,GAAa,O,CA7GhCK,CAAQ/B,GACZgC,EAuHZ,SAAsBhC,GACpB,IAAIiC,EAAMjC,EAAKyB,SAIf,OAHW,IAARQ,IACDA,EAAM,GAEDA,C,CA5HOC,CAAalC,GACjBmC,EAAQ,CACVvB,EAAMA,EACNwB,GAAMC,EAAIzB,GACV0B,IAAMvC,EAAWwC,KAAKC,SAAS3B,GAC/B4B,KAAM1C,EAAWwC,KAAKC,SAAS3B,EAAI,GACnCC,EAAMA,EAAI,EACV4B,GAAML,EAAIvB,EAAI,GACd6B,IAAM5C,EAAWwC,KAAKK,WAAW9B,GACjC+B,KAAM9C,EAAWwC,KAAKK,WAAW9B,EAAI,IACrCgC,GAAM1H,OAAOzE,GAAGgI,MAAM,GACtBoE,KAAMpM,EACNqM,EAAMjC,EAAI,IAAM,GAChBkC,GAAMZ,EAAItB,EAAI,IAAM,IACpBA,EAAMA,EACNmC,GAAMb,EAAItB,GACVC,EAAMA,EACNmC,GAAMd,EAAIrB,GACVvE,EAAMA,EACN2G,GAAMf,EAAI5F,GACV4G,EAAMhB,EAAIpB,EAAG,GACbA,EAAMoB,EAAI9L,KAAK+M,MAAMrC,EAAI,KACzBxM,EAAMsM,EAAI,GAAKhB,EAAWwC,KAAKgB,UAAU,GAAKxD,EAAWwC,KAAKgB,UAAU,GACxEC,GAAMzC,EAAI,GAAKhB,EAAWwC,KAAKgB,UAAU,GAAKxD,EAAWwC,KAAKgB,UAAU,GACxEE,EAAM1C,EAAI,GAAKhB,EAAWwC,KAAKgB,UAAU,GAAKxD,EAAWwC,KAAKgB,UAAU,GACxEG,GAAM3C,EAAI,GAAKhB,EAAWwC,KAAKgB,UAAU,GAAKxD,EAAWwC,KAAKgB,UAAU,GACxEI,EAAMxD,EAAM,MAAQD,EAAM,OAAS9E,OAAO4E,GAAM4D,MAAM/D,IAAa,CAAC,KAAKgE,MAAMC,QAAQhE,EAAc,IACrGpL,GAAOA,EAAI,EAAI,IAAM,KAAO2N,EAAmC,IAA/B9L,KAAKuL,MAAMvL,KAAKwN,IAAIrP,GAAK,IAAY6B,KAAKwN,IAAIrP,GAAK,GAAI,GACvFsP,EAAM,CAAC,KAAM,KAAM,KAAM,MAAMpD,EAAI,GAAK,EAAI,GAAKA,EAAI,IAAMA,EAAI,IAAM,IAAMA,EAAI,IAC/EO,EAAMA,EACNa,EAAMA,GAGR,OAAO/B,EAAK6D,QAAQlE,EAAO,SAAUgE,GACnC,OAAIA,KAASzB,EACJA,EAAMyB,GAERA,EAAMjF,MAAM,EAAGiF,EAAMtO,OAAS,E,KAoC/C,SAAS+M,EAAI/F,EAAK2H,GAGhB,IAFA3H,EAAMlB,OAAOkB,GACb2H,EAAMA,GAAO,EACN3H,EAAIhH,OAAS2O,GAClB3H,EAAM,IAAMA,EAEd,OAAOA,C,CArCPyD,EAAWW,MAAQ,CACjBwD,QAAyB,2BACzBC,UAAyB,SACzBC,WAAyB,cACzBC,SAAyB,eACzBC,SAAyB,qBACzBC,UAAyB,UACzBC,WAAyB,aACzBC,SAAyB,eACzBC,QAAyB,aACzBC,QAAyB,WACzBC,YAAyB,yBACzBC,eAAyB,+BACzBC,oBAAyB,+BAI3B/E,EAAWwC,KAAO,CAChBC,SAAU,CACR,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC1C,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAEpEI,WAAY,CACV,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC7E,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAEhHW,UAAW,CACT,IAAK,IAAK,KAAM,KAAM,IAAK,IAAK,KAAM,OA2FxChO,EAAAH,QAAiB2K,CAIpB,CAtND,E,GJDIgF,EAAM,GAOVC,EAoBA,SAAgBC,EAAKC,GACnB,GAAmB,iBAARD,EACT,MAAM,IAAI1I,UAAU,qBAItB,GAAY,IAAR2I,EAAW,OAAOD,EACtB,GAAY,IAARC,EAAW,OAAOD,EAAMA,EAE5B,IAAIE,EAAMF,EAAI3P,OAAS4P,EACvB,GAAIjH,IAAUgH,QAAwB,IAAVhH,EAC1BA,EAAQgH,EACRF,EAAM,QACD,GAAIA,EAAIzP,QAAU6P,EACvB,OAAOJ,EAAIK,OAAO,EAAGD,GAGvB,KAAOA,EAAMJ,EAAIzP,QAAU4P,EAAM,GACrB,EAANA,IACFH,GAAOE,GAGTC,IAAQ,EACRD,GAAOA,EAKT,OADAF,GADAA,GAAOE,GACGG,OAAO,EAAGD,E,EKxDtB,ICLIE,EADEC,EAAA,WAAO,EAETC,EAAc,CAAEC,UAAW,GAAIC,OAAQ,GAAIC,OAAQ,IAQjDC,EAAqB,CACzB,YACA,aACA,cAGF,SAASC,EAAQC,EAAS9G,GACxB,Y,UAD+B,IACxB,IAAI+G,QAAJ,SAAaC,EAASC,GAC3BjH,EAAO9D,EAAO,GAAIsK,EAAaxG,GAC/B,IAAMkH,EAAWC,EAAgBtL,OAAOM,OAAO,GAAI6D,EAAM,CACvDyG,UAAW,GACXW,WAAO/F,KAEHgG,EAAOP,EAAU,cAAgB,YACjCQ,EAAS7I,IACf,OAAI6I,GAAUA,EAAOC,QAAkC,mBAAjBD,EAAOD,GACpCC,EAAOD,GAAMnL,EAAO,GAAI8D,EAAM,C,SAAEkH,KACpC/I,KADI,SACCqJ,GAAA,OAAMR,EAAQQ,EAAA,GAEfR,EAAQ,C,SAAEE,EAAUI,QAAQ,G,GA8ClC,SAASG,EAAaC,EAAS1H,GACpC,Y,UAD2C,IArB7C,SAAgC0H,GAC9B,OAAO,IAAIX,QAAJ,SAAaC,GAClB,IAAMW,EAAaD,EAAQE,QAAQ,KACnC,IAAoB,IAAhBD,EAAJ,CAWA,IAPA,IAAME,EAASH,EAAQ9H,MAAM+H,EAAa,GACpCG,EAAazJ,OAAO0J,KAAKF,GACzBtP,EAAOmP,EAAQ9H,MAAM,EAAG+H,GACxBK,EAAY,eAAeC,KAAK1P,GAChC2P,GAAQF,EAAYA,EAAU,GAAK,UAAO3G,EAC1C8G,EAAK,IAAIC,YAAYN,EAAWvR,QAChC8R,EAAK,IAAIC,WAAWH,GACjBvS,EAAI,EAAGA,EAAIkS,EAAWvR,OAAQX,IACrCyS,EAAGzS,GAAKkS,EAAWS,WAAW3S,GAEhCoR,EAAQ,IAAI3I,OAAOmK,KAAK,CAAEL,GAAM,CAAE5P,KAAM2P,I,MAbtClB,EAAQ,IAAI3I,OAAOmK,K,GAkBhBC,CAAsBf,GAC1BvJ,KADI,SACCuK,GAAA,OAAQC,EAASD,EAAM1I,EAAA,E,CAG1B,SAAS2I,EAAUD,EAAM1I,GAC9B,Y,UADqC,IAC9B,IAAI+G,QAAJ,SAAYC,GAEjB,IAAME,GADNlH,EAAO9D,EAAO,GAAIsK,EAAaxG,IACTkH,SAEhBI,EAAS7I,IACf,GAAI6I,GAAqC,mBAApBA,EAAOqB,UAA2BrB,EAAOC,OAE5D,OAAOD,EAAOqB,SAASD,EAAMxM,EAAO,GAAI8D,EAAM,C,SAAEkH,KAC7C/I,KADI,SACCqJ,GAAA,OAAMR,EAAQQ,EAAA,GAGjBlB,KACHA,EAAOnL,SAASyN,cAAc,MACzBC,MAAMC,WAAa,SACxBxC,EAAKpJ,OAAS,UAEhBoJ,EAAKyC,SAAW7B,EAChBZ,EAAK0C,KAAO3K,OAAO4K,IAAIC,gBAAgBR,GACvCvN,SAASgO,KAAKC,YAAY9C,GAC1BA,EAAK+C,QAAL,WACE/C,EAAK+C,QAAU9C,EACf+C,WAAA,WACEjL,OAAO4K,IAAIM,gBAAgBb,GACvBpC,EAAKkD,eAAelD,EAAKkD,cAAcC,YAAYnD,GACvDA,EAAKoD,gBAAgB,QACrB1C,EAAQ,C,SAAEE,EAAUI,QAAQ,G,IAGhChB,EAAKqD,O,GAsBJ,SAASxC,EAAiByC,GAI/B,Q,UAJqC,IAIb,mBAHxBA,EAAM1N,EAAO,GAAI0N,IAGFC,KACb,OAAOD,EAAIC,KAAKD,GACX,GAAIA,EAAIC,KACb,OAAOD,EAAIC,KAGb,IAKMC,ED5I0B5D,EAAKC,EAAK4D,ECuItC3C,EAAQ,KACRX,EAAY,IACa,iBAAlBmD,EAAInD,YAAwBA,EAAYmD,EAAInD,WAE9B,iBAAdmD,EAAIxC,SAGX0C,EAD6B,iBAApBF,EAAIE,YACCF,EAAIE,YAEJtS,KAAK4O,IAAI,IAAOwD,EAAIxC,ODhJNlB,ECkJd7J,OAAOuN,EAAIxC,ODlJQjB,ECkJA9J,OAAOyN,GAAavT,ODlJfwT,ECkJuB,IDjJjE7D,EAAMA,EAAI5G,WCiJR8H,OD/IiB,IAARjB,EACFD,GAIP6D,EADS,IAAPA,EACG,IACIA,EACJA,EAAGzK,WAEH,IAGA2G,EAAO8D,EAAI5D,EAAMD,EAAI3P,QAAU2P,ICsItC,IAAM8D,EAAWC,SAASL,EAAIM,cAAgBD,SAASL,EAAIO,QAAUP,EAAIM,YAAc,EAAtE,GAA6EN,EAAI,MAAU,GAC5G,OAAa,MAATxC,EACK,CAAE4C,EAAU5C,GAAQgD,OAAOC,SAAS3N,KAAK,KAAO+J,EAGhD,CAAEmD,EAAIlD,OAAQkD,EAAIU,MADDV,EAAIW,UACsBP,EAAUJ,EAAIY,KAAMZ,EAAIjD,QAASyD,OAAOC,SAAS3N,KAAK,KAAO+J,C,CCpKnH,IAAMgE,EAAc,CAClBC,UAAW,aACXC,SAAU,UACVC,UAAW,UACXC,KAAM,QACNC,GAAI,KACJC,WAAY,YACZC,QAAS,OACTC,aAAc,UAIVC,EAAU,CACd,aAAc,QAAS,gBAAiB,cACxC,aAAc,cAAe,QAAS,aACtC,mBAAoB,gBAAiB,eACrC,eAAgB,cAAe,SAAU,UAAW,aACpD,SAAU,OAAQ,OAAQ,SAAU,SAAU,UAAW,UACzD,OAAQ,WAAY,cAAe,MAAO,eAAgB,YAC1D,QAAS,OAAQ,QAAS,YAAa,UAAW,KAAM,KACxD,oBAAqB,OAAQ,SAAU,WAAY,mBAKxCC,EAAA,SAAiB1U,GACfoF,OAAOkB,KAAKtG,GACpBoG,QAAL,SAAa3B,GACPA,KAAOuP,EAET5P,QAAQuQ,KAAR,oDAAiElQ,EAAA,oBADlDuP,EAAYvP,GAC6D,MAC9EgQ,EAAQG,SAASnQ,IAC3BL,QAAQuQ,KAAR,oDAAiElQ,EAAA,I,ICjCvE,IAwFAoQ,EAtFa,CAGX,CAAE,WAAY,MAAO,OACrB,CAAE,eAAgB,IAAK,KACvB,CAAE,SAAU,IAAK,KACjB,CAAE,eAAgB,IAAK,KACvB,CAAE,gBAAiB,KAAM,MAGzB,CAAE,KAAM,GAAI,IACZ,CAAE,KAAM,GAAI,KACZ,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,MAAO,IAAK,KACd,CAAE,MAAO,IAAK,KACd,CAAE,MAAO,IAAK,KAGd,CAAE,KAAM,IAAK,MACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,GAAI,KACZ,CAAE,KAAM,GAAI,IACZ,CAAE,KAAM,GAAI,IACZ,CAAE,MAAO,GAAI,IACb,CAAE,MAAO,KAAM,MACf,CAAE,MAAO,KAAM,MACf,CAAE,KAAM,IAAM,MACd,CAAE,KAAM,IAAK,KACb,CAAE,MAAO,IAAK,MACd,CAAE,KAAM,IAAK,KACb,CAAE,MAAO,IAAK,KACd,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,GAAI,KACZ,CAAE,KAAM,GAAI,IACZ,CAAE,KAAM,GAAI,IACZ,CAAE,MAAO,GAAI,IACb,CAAE,MAAO,GAAI,IACb,CAAE,MAAO,GAAI,IACb,CAAE,KAAM,IAAK,MACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,IAAK,KACb,CAAE,KAAM,GAAI,KACZ,CAAE,KAAM,GAAI,IACZ,CAAE,KAAM,GAAI,IACZ,CAAE,MAAO,GAAI,IACb,CAAE,MAAO,GAAI,IACb,CAAE,MAAO,GAAI,IAIb,CAAE,cAAe,IAAK,IAAK,MAC3B,CAAE,SAAU,IAAK,GAAI,MACrB,CAAE,QAAS,IAAK,GAAI,MACpB,CAAE,eAAgB,EAAG,EAAG,MACxB,CAAE,SAAU,GAAI,GAAI,MACpB,CAAE,UAAW,GAAI,GAAI,MACrB,CAAE,SAAU,IAAK,GAAM,MACvB,CAAE,SAAU,GAAM,GAAM,MACxB,CAAE,SAAU,GAAM,GAAM,MACxB,CAAE,SAAU,GAAM,GAAM,MACxB,CAAE,SAAU,GAAM,GAAM,MACxB,CAAE,SAAU,EAAG,GAAI,MACnB,CAAE,SAAU,GAAI,GAAI,MACpB,CAAE,SAAU,GAAI,GAAI,MACpB,CAAE,SAAU,GAAI,GAAI,MACpB,CAAE,SAAU,GAAI,GAAI,MACpB,CAAE,UAAW,GAAI,GAAI,MACrB,CAAE,UAAW,GAAI,GAAI,MACrB,CAAE,UAAW,GAAI,GAAI,OAGHC,OAAL,SAAaC,EAAMC,GAChC,IAAMC,EAAO,CACXC,MAAOF,EAAO,IA1FG,KA2FjBG,WAAY,CAAEH,EAAO,GAAIA,EAAO,KAIlC,OAFAD,EAAKC,EAAO,IAAMC,EAClBF,EAAKC,EAAO,GAAG1G,QAAQ,KAAM,MAAQ2G,EAC9BF,C,EACN,IC/FCG,EAAQ,CAAE,KAAM,KAAM,IAAK,KAAM,KAAM,KAAM,KAAM,MAEnDE,EAAc,CAEhB9J,EAAG,CACD+J,OAAQ,SACRC,OAAQ,GAEVC,GAAI,CACFF,OAAQ,SACRC,OAAQ,KAEVpI,GAAI,CACFmI,OAAQ,SACRC,OAAQ,MAGVE,GAAI,CACFH,OAAQ,WACRC,OAAQ,EAAI,IAEdG,GAAI,CACFJ,OAAQ,WACRC,OAAQ,EAAI,GAEdI,GAAI,CACFL,OAAQ,WACRC,OAAQ,GAEVK,GAAI,CACFN,OAAQ,WACRC,OAAQ,KAIZ,MAAMM,EAAU,CACdC,OAAQ,CACNzB,KAAM,IACN0B,MAAO,EAAI,OAEbC,SAAU,CACR3B,KAAM,KACN0B,MAAO,QA+DX,IAAAE,EAvDA,SAA0B9L,EAAO+L,EAAUC,EAAQ3M,GACjD,GAAqB,iBAAVW,IAAuBsJ,SAAStJ,GAAQ,MAAM,IAAIzK,MAAM,iCACnE,IAAKwW,IAAaC,EAAQ,MAAM,IAAIzW,MAAM,kCAG1C,IAAI0W,ECxDW,WACb,IAAK,IAAIhX,EAAI,EAAGA,EAAI+H,UAAUpH,OAAQX,IAClC,QAAqByL,IAAjB1D,UAAU/H,GAAkB,OAAO+H,UAAU/H,E,CDsDnCiX,EADpB7M,EAAOA,GAAQ,IACkB4M,cAAe,IAC5CE,EAAY9M,EAAK8M,UACjBC,GAAiC,IAApB/M,EAAK+M,WAKtB,GAHAL,EAAWA,EAASnL,cACpBoL,EAASA,EAAOpL,eAEiB,IAA7BoK,EAAM/D,QAAQ8E,GAAkB,MAAM,IAAIxW,MAAM,sBAAwBwW,EAAW,sBAAwBf,EAAMjP,KAAK,OAC1H,IAA+B,IAA3BiP,EAAM/D,QAAQ+E,GAAgB,MAAM,IAAIzW,MAAM,sBAAwByW,EAAS,sBAAwBhB,EAAMjP,KAAK,OAEtH,GAAIgQ,IAAaC,EAEf,OAAOhM,EAGT,IAAIqM,EAAW,EACXC,EAAa,EACbC,GAAY,EAEC,OAAbR,IACFO,EAAa,EAAIL,EACjBF,EAAW,MAEE,OAAXC,IACFO,GAAY,EACZF,EAAWJ,EACXD,EAAS,MAGX,IAAIQ,EAAetB,EAAYa,GAC3BU,EAAavB,EAAYc,GAGzBU,EAAS1M,EAAQwM,EAAapB,OAASkB,EAGvCE,EAAarB,SAAWsB,EAAWtB,SAErCuB,GAAUhB,EAAQc,EAAarB,QAAQS,OAGzC,IAAIe,EAASD,EAASD,EAAWrB,OAASiB,EAM1C,OALIE,GAAaH,EACfO,EAAS9V,KAAK+M,MAAM+I,GACU,iBAAdR,GAA0B7C,SAAS6C,KACnDQ,EAtDJ,SAAgB3M,EAAO4M,GACrB,OAAOC,OAAOhW,KAAK+M,MAAM5D,EAAQ,IAAM4M,GAAY,KAAOA,E,CAqD/ChJ,CAAM+I,EAAQR,IAElBQ,C,EErFF,SAASG,EAAiB/C,EAAWgD,EAAkBC,EAAgBf,GAC5E,Y,UADsD,W,UAAgB,W,UAAsB,IACrFH,EAAc/B,EAAWgD,EAAWC,EAAS,C,cAClDf,EACAE,UAAW,EACXC,YAAY,G,CCMD,SAASa,EAAcC,EAAOpX,GAC3C,IAAIQ,EAAOC,EACP4W,EAAYC,EACZC,EAAaC,EAEXrQ,EAAUgB,IACVgN,EAAanV,EAASmV,WACtBsC,EAhCR,SAA+BzX,GAC7B,SAAKA,EAASmV,YACqB,iBAAxBnV,EAASmV,cAChBjM,MAAM2B,QAAQ7K,EAASmV,aAAenV,EAASmV,WAAWrV,QAAU,G,CA6BlD4X,CAAqB1X,GACrC2X,EAAYP,EAAMO,UACpBxX,IAAasX,IAAwC,IAAxBzX,EAASG,WACtCD,KAAgByX,GAAaF,IAAiBzX,EAASE,YAEtDiH,IAAShH,EAAaD,GAAc,GACzC,IAOI0X,EAAYC,EAPV3C,EAAQlV,EAASkV,MACjBiB,EAAmD,iBAA3BnW,EAASmW,eAA8B3C,SAASxT,EAASmW,eAAkBnW,EAASmW,cAAgB,GAC5H2B,EAAQ7P,EAAQjI,EAAS8X,MAAO,GAEhCC,EAAmB5Q,EAAUS,OAAOmQ,iBAAmB,EACvDC,EAAiB9X,EAAc6X,EAAmB,EAQrB,iBAAxB/X,EAAS4X,YAA2BpE,SAASxT,EAAS4X,YAG/DC,EAAmB5P,EAAQjI,EAAS6X,iBADpCD,EAAa5X,EAAS4X,YAGlBH,GAEFG,EAAaI,EAGbH,EAAmB5P,EAAQjI,EAAS6X,iBAAkB,IAKtDA,EAAmB5P,EAAQjI,EAAS6X,iBAFpCD,EAAaG,GAOqB,iBAA3B/X,EAASiY,eAA8BzE,SAASxT,EAASiY,iBAClEL,EAAa7W,KAAKC,IAAIhB,EAASiY,cAAeL,IAI5CD,IACFC,EAAaC,GAMf,IACIK,EAAWC,EADfC,EA5EF,SAAwBhB,EAAOpX,GAE7B,IAAKmI,IACH,MAAO,CAAE,IAAK,KAGhB,IAAIkQ,EAAUrY,EAASsY,QAAU1Q,OAEjC,GAAIyQ,IAAYzQ,QACZyQ,IAAY3T,UACZ2T,IAAY3T,SAASgO,KACvB,MAAO,CAAE9K,OAAO2Q,WAAY3Q,OAAO4Q,aAEnC,IAAAJ,EAA0BC,EAAQI,wBAClC,MAAO,CADCL,EAAA5X,MAAO4X,EAAA3X,O,CA+DmBiY,CAActB,EAAOpX,GAAnD2Y,EAAAP,EAAA,GAAaQ,EAAAR,EAAA,GAInB,GAAIX,EAAe,CACjB,IAAMZ,EDxFH,SAAkC1B,EAAY+B,EAAgBf,GACnE,Q,UAD6D,W,UAAsB,IACzD,iBAAfhB,EAAyB,CAClC,IAAM1Q,EAAM0Q,EAAWrK,cACvB,KAAMrG,KAAOoQ,GACX,MAAM,IAAIpV,MAAJ,yBAAmC0V,EAAA,sFAE3C,IAAMH,EAASH,EAAWpQ,GAC1B,OAAOuQ,EAAOG,WAAWnP,IAAlB,SAAsBoF,GAAA,OACpB4L,EAAgB5L,EAAG4J,EAAOE,MAAOgC,EAASf,EAAA,E,CAGnD,OAAOhB,C,CC6EQ0D,CAAwB1D,EAAYD,EAAOiB,GACpD2C,EAAU/X,KAAK4O,IAAIkH,EAAO,GAAIA,EAAO,IACrCkC,EAAShY,KAAKC,IAAI6V,EAAO,GAAIA,EAAO,IAC1C,GAAI7W,EAASgZ,YAAa,CACxB,IAAMC,EAAqC,cAAzBjZ,EAASgZ,YAC3BxY,EAAQyY,EAAYH,EAAUC,EAC9BtY,EAASwY,EAAYF,EAASD,C,MAE9BtY,EAAQqW,EAAO,GACfpW,EAASoW,EAAO,GAGlBqB,EAAY1X,EACZ2X,EAAa1X,EAGbD,GAAiB,EAARsX,EACTrX,GAAkB,EAARqX,C,MAIVI,EAFA1X,EAAQmY,EAGRR,EAFA1X,EAASmY,EAMX,IAAIM,EAAY1Y,EACZ2Y,EAAa1Y,EAYjB,GAXIgX,GAAiBvC,IAEnBgE,EAAYlC,EAAgBxW,EAAO0U,EAAO,KAAMiB,GAChDgD,EAAanC,EAAgBvW,EAAQyU,EAAO,KAAMiB,IAIpDkB,EAAatW,KAAK+M,MAAMoL,GACxB5B,EAAcvW,KAAK+M,MAAMqL,GAGrBhZ,IAAewX,GAAaF,EAAe,CAC7C,IAAM2B,EAAS5Y,EAAQC,EACjB4Y,EAAeV,EAAcC,EAC7BU,EAAoBrR,EAAQjI,EAASsZ,kBAAmB,IACxDC,EAAWxY,KAAK+M,MAAM6K,EAAkC,EAApBW,GACpCE,EAAYzY,KAAK+M,MAAM8K,EAAmC,EAApBU,IACxCjC,EAAakC,GAAYjC,EAAckC,KACrCH,EAAeD,GACjB9B,EAAckC,EACdnC,EAAatW,KAAK+M,MAAMwJ,EAAc8B,KAEtC/B,EAAakC,EACbjC,EAAcvW,KAAK+M,MAAMuJ,EAAa+B,I,CAe5C,MAAO,C,MACLtB,E,WACAF,E,MACApX,E,OACAC,EACA0U,WAAY,CAAE3U,EAAOC,GACrByU,MAAOA,GAAS,K,QAhBlBqC,EAAcrX,EAAca,KAAK+M,MAAM8J,EAAaP,GAActW,KAAK+M,MAAM8J,EAAasB,IAM7D1Y,E,QAL7BgX,EAAetX,EAAca,KAAK+M,MAAM8J,EAAaN,GAAevW,KAAK+M,MAAM8J,EAAauB,IAM9D1Y,E,cAY5B0V,E,cAhBoBjW,EAAca,KAAK+M,MAAMuJ,GAActW,KAAK+M,MAAMoL,G,eACjDhZ,EAAca,KAAK+M,MAAMwJ,GAAevW,KAAK+M,MAAMqL,G,YAkBxE5B,E,aACAC,E,UACAU,E,WACAC,E,WACAd,E,YACAC,E,SHnEmBpC,EI3GvB,IAAAuE,EACA,SAA2B3X,EAAMyH,GAC/B,GAAoB,iBAATzH,EACT,MAAM,IAAIiF,UAAU,4BAKtB,GAFAwC,EAAOA,GAAQ,GAES,oBAAb7E,WAA6B6E,EAAKmQ,OAC3C,OAAO,KAGT,IAAIA,EAASnQ,EAAKmQ,QAAUhV,SAASyN,cAAc,UACzB,iBAAf5I,EAAK/I,QACdkZ,EAAOlZ,MAAQ+I,EAAK/I,OAEK,iBAAhB+I,EAAK9I,SACdiZ,EAAOjZ,OAAS8I,EAAK9I,QAGvB,IACIkZ,EADAC,EAAUrQ,EAEd,IACE,IAAIsQ,EAAQ,CAAE/X,GAEgB,IAA1BA,EAAKqP,QAAQ,UACf0I,EAAMlR,KAAK,gBAAkB7G,GAG/B,IAAK,IAAI3C,EAAI,EAAGA,EAAI0a,EAAM/Z,OAAQX,IAEhC,GADAwa,EAAKD,EAAOI,WAAWD,EAAM1a,GAAIya,GACzB,OAAOD,C,CAEjB,MAAO5a,GACP4a,EAAK,I,CAEP,OAAQA,GAAM,I,ECzBD,SAASI,EAAc/Z,GACpC,IAAI2B,EAAS+X,O,UADkC,IAE/C,IAAIM,GAAa,EACjB,IAAwB,IAApBha,EAAS0Z,OAAkB,CAG7B,KADA/X,EAAU3B,EAAS2B,UACgB,iBAAZA,EAAsB,CAC3C,IAAIsY,EAAYja,EAAS0Z,OACpBO,IACHA,EAhBR,WACE,IAAK9R,IACH,MAAM,IAAI1I,MAAM,iIAElB,OAAOiF,SAASyN,cAAc,S,CAYZ+H,GACZF,GAAa,GAEf,IAAMlY,EAAOH,GAAW,KACxB,GAAoC,mBAAzBsY,EAAUH,WACnB,MAAM,IAAIra,MAAM,2GAGlB,KADAkC,EAAU8X,EAAiB3X,EAAM2D,EAAO,GAAIzF,EAASma,WAAY,CAAET,OAAQO,MAEzE,MAAM,IAAIxa,MAAJ,gCAA0CqC,EAAA,gH,CAMpD,GAFA4X,EAAS/X,EAAQ+X,OAEb1Z,EAAS0Z,QAAUA,IAAW1Z,EAAS0Z,OACzC,MAAM,IAAIja,MAAM,4FAIdO,EAASoa,YACXzY,EAAQ0Y,uBAAwB,EAChC1Y,EAAQ2Y,0BAA2B,EACnC3Y,EAAQ4Y,wBAAyB,EACjC5Y,EAAQ6Y,6BAA8B,EACtC7Y,EAAQ8Y,yBAA0B,EAClCf,EAAOtH,MAAM,mBAAqB,Y,CAGtC,MAAO,C,OAAEsH,E,QAAQ/X,E,WAASqY,E,CCtB5B,IAAMU,EACJ,W,gBACOC,UAAY,G,KACZC,OAAS,G,KACTC,aAAUjQ,E,KACVkQ,KAAO,K,KACPC,eAAiB,K,KAGjBC,uBAAoBpQ,E,KACpBqQ,eAAgB,E,KAEhBC,mBCrCM,SAAU/H,Q,UAAM,IAC7B,IAAMgI,EAAA,SAAUpK,GACd,GAAKoC,EAAIiI,UAAT,CAEA,IAAMvK,EAAS7I,IACI,KAAf+I,EAAGsK,SAAmBtK,EAAGuK,SAAWvK,EAAGwK,UAAWxK,EAAGyK,QAI/B,KAAfzK,EAAGsK,QAGZlI,EAAIsI,WAAW1K,GACNF,IAAWE,EAAGuK,QAAyB,KAAfvK,EAAGsK,UAAmBtK,EAAGwK,SAAWxK,EAAGyK,WAExEzK,EAAG2K,iBACHvI,EAAIwI,OAAO5K,KATXA,EAAG2K,iBACHvI,EAAI7K,KAAKyI,GANS,C,EA0BtB,MAAO,C,OARD,WACJnJ,OAAOjD,iBAAiB,UAAWwW,E,SAG/B,WACJvT,OAAO3C,oBAAoB,UAAWkW,E,GDYZS,CAAkB,C,mBACjC,OAAgC,IAA1BC,EAAK7b,SAASI,OAAY,E,cAClC2Q,GACDA,EAAG+K,SACDD,EAAKzE,MAAM2E,W,EACRC,Y,EACAC,OACAJ,EAAKK,SACFL,EAAKzE,MAAM2E,W,EAChBI,a,wBAIHN,EAAKzE,MAAMgF,QAASP,EAAKQ,QACxBR,EAAKS,M,kBAEHvL,G,EACFoL,YAAY,C,QAAU,G,SAI1BI,gBAAL,WAAuB,OAAMV,EAAK5b,SAAL,E,KAExBuc,eAAL,WACkBX,EAAK/W,U,EAGdF,Q,qFAKP6X,OAAAC,IAAA,W,OACKhc,KAAKma,O,IAGV7a,SAAA0c,IAAA,W,OACKhc,KAAKia,S,IAGVvD,MAAAsF,IAAA,W,OACKhc,KAAKka,M,cAGd+B,iBAAA,SAAiBC,EAAaC,G,MACY,iBAAbA,GAAyBrJ,SAASqJ,GACxCD,EAAcC,EAAW,C,cAGhDC,cAAA,SAAcC,EAAUlY,EAAMwO,EAAa2J,G,OAClCxJ,SAASH,IAAgBA,EAAc,EAC1CtS,KAAKuL,MAAMyQ,GAAY1J,EAAc,IACrCtS,KAAKuL,MAAM0Q,EAAMnY,E,cAGvBoY,qBAAA,W,OACSvc,KAAKoc,cACVpc,KAAK0W,MAAM2F,SACXrc,KAAK0W,MAAMvS,KACXnE,KAAK0W,MAAM/D,YACX3S,KAAK0W,MAAM4F,I,cAIfE,cAAA,W,IACQ9F,EAAQ1W,KAAK0W,M,MACZ,C,MACEA,EAAM5W,M,OACL4W,EAAM3W,O,WACF2W,EAAMQ,W,YACLR,EAAMG,Y,aACLH,EAAMI,a,cACLJ,EAAM+F,c,eACL/F,EAAMgG,e,cAI1BnB,IAAA,W,IACOvb,KAAK+b,OACR,MAAM,IAAIhd,MACR,8D,OAI0B,IAA1BiB,KAAKV,SAASoc,S,KACXE,OAI4B,mBAAxB5b,KAAK+b,OAAOY,S,QACb1I,KACN,4EAKCjU,KAAK0W,MAAMkG,U,KACTC,e,KACAnG,MAAMkG,SAAU,G,KAIlBE,O,KACA5Y,SACElE,I,cAGT+c,gBAAA,WAEiB,MAAb/c,KAAKoa,MACa,oBAAXlT,QACgC,mBAAhCA,OAAO8V,uB,OAEPA,qBAAqBhd,KAAKoa,M,KAC5BA,KAAO,MAEa,MAAvBpa,KAAKqa,iB,aACMra,KAAKqa,gB,KACbA,eAAiB,K,cAI1BuB,KAAA,W,IACMrc,EAAUS,KAAKV,SAASC,QACxB,cAAeS,KAAKV,W,GACZ,E,QACF2U,KACN,kEAGC1U,IACAkI,IAMDzH,KAAK0W,MAAMgF,UACV1b,KAAK0W,MAAMkG,U,KACTC,e,KACAnG,MAAMkG,SAAU,G,KAMlBlG,MAAMgF,SAAU,E,KAChBqB,kB,KACAE,UAAYxW,I,KACZ2T,KAAOlT,OAAOgW,sBAAsBld,KAAK6b,kB,QAjBpCsB,MACN,2E,cAmBNxB,MAAA,WACM3b,KAAK0W,MAAM2E,WAAWrb,KAAKsb,Y,KAC1B5E,MAAMgF,SAAU,E,KAEhBqB,iB,cAGPhC,WAAA,WACM/a,KAAK0W,MAAMgF,QAAS1b,KAAK2b,QACxB3b,KAAK4b,M,cAIZwB,KAAA,W,KACOzB,Q,KACAjF,MAAMzG,MAAQ,E,KACdyG,MAAM2F,SAAW,E,KACjB3F,MAAMvS,KAAO,E,KACbuS,MAAM2G,UAAY,E,KAClB3G,MAAMkG,SAAU,E,KAChB1Y,Q,cAGPsX,OAAA,W,eACMxb,KAAK0W,MAAM2E,U,GACV5T,I,MAOA2V,O,KACA1G,MAAMgF,SAAU,E,KAChBhF,MAAM2E,WAAY,E,IAEjBiC,EAAatd,KAAKud,qBAAqB,C,UAAY,IAEnDC,EAAgB,EAAIxd,KAAK0W,MAAM4F,I,KAEhCS,kB,IThMoBlU,ESiMnBiU,EAAA,W,OACC3B,EAAKzE,MAAM2E,W,EACX3E,MAAM2G,UAAYG,E,EAClBV,OACE3B,EAAKM,YAAY6B,GAAYtW,KAA7B,WACAmU,EAAKzE,MAAM2E,Y,EACX3E,MAAM2G,UAAY,E,EAClB3G,MAAMzG,QACPkL,EAAKzE,MAAMzG,MAAQkL,EAAKzE,MAAM/D,a,EAC3B+D,MAAMvS,MAAQqZ,E,EACd9G,MAAM2F,SAAWlB,EAAKc,iBACzBd,EAAKzE,MAAMvS,KACXgX,EAAKzE,MAAMyF,U,EAER9B,eAAiBlI,WAAW2K,EAAM,K,QAE/BnZ,IAAI,sB,EACP8Z,a,EACAnC,Y,EACA8B,O,EACA7B,O,IAnByB3L,QAAQC,S,EAyBvC7P,KAAK0W,MAAMkG,U,KACTC,e,KACAnG,MAAMkG,SAAU,GAInB5c,KAAK+b,QAA6C,mBAA5B/b,KAAK+b,OAAO2B,a,KAC/BC,kBAAL,SAAwBjH,GAAA,OAAUyE,EAAKY,OAAO2B,YAAYhH,EAAA,ITlOnC7N,ESsObyU,O,UTtOoB,IAC3B5N,GAAO,EAAM7G,ISsOf+U,MADH,SACU/X,G,QACEsX,MAAMtX,E,GAEfmB,KAJH,SAIS6W,G,EACAzD,KAAOlT,OAAOgW,sBAAsBJ,E,gBAzDnCK,MACN,oE,cA4DNN,aAAA,W,WACM7c,KAAK+b,QAAuC,mBAAtB/b,KAAK+b,OAAO+B,O,KAC/BH,kBAAL,SAAwBjH,GAAA,OAAUyE,EAAKY,OAAO+B,MAAMpH,EAAA,E,cAIxD+G,WAAA,W,WACMzd,KAAK+b,QAAqC,mBAApB/b,KAAK+b,OAAOgC,K,KAC/BJ,kBAAL,SAAwBjH,GAAA,OAAUyE,EAAKY,OAAOgC,IAAIrH,EAAA,E,cAItD4E,UAAA,W,ITvPyBzS,E,OSwPjBmV,EAAehe,KAAK0W,MAAM2E,U,YAE3B0B,kB,KACArG,MAAM2E,WAAY,E,KAClB3E,MAAM2G,UAAY,E,KAClB3G,MAAMgF,SAAU,Q,UT7PS,IACzBhM,GAAO,EAAO7G,ISgQhB+U,MADI,SACG/X,G,QACEsX,MAAMtX,E,GAEfmB,KAJI,WAODgX,GACA7C,EAAKY,QAC4B,mBAA1BZ,EAAKY,OAAOT,W,EAEdqC,kBAAL,SAAwBjH,GAAA,OAAUyE,EAAKY,OAAOT,UAAU5E,EAAA,E,gBAKhE6G,qBAAA,SAAqB9K,G,sBAAM,IAClB,C,SACKA,EAAIwL,S,KACRxL,EAAI7K,K,IACL5H,KAAK0W,MAAM4F,I,MACT7J,EAAIwL,SAAWje,KAAK0W,MAAMzG,WAAQ/F,E,KACnClK,KAAKV,SAASoT,K,KACd1S,KAAKV,SAAS6T,K,OACZnT,KAAKV,SAASiQ,O,OACdvP,KAAKV,SAASkQ,O,SACZxP,KAAKV,SAAS4e,S,gBACPle,KAAKV,SAAS6e,gB,UACpB1L,EAAIW,WTxMZgL,EAAW,IAAIvX,KADA,uB,YS0MLiM,SAAS9S,KAAK0W,MAAM/D,aAC7BtS,KAAK4O,IAAI,EAAGjP,KAAK0W,MAAM/D,aACvB,I,cAIR8I,YAAA,SAAYhJ,G,6BAAM,KACXzS,KAAK+b,OAAQ,OAAOnM,QAAQyO,IAAI,IACA,mBAA1Bre,KAAK+b,OAAOuC,W,KAChBvC,OAAOuC,Y,IAIVhB,EAAatd,KAAKud,qBAAqB9K,GAErCtC,EAAS7I,IACXrI,EAAI2Q,QAAQC,U,GACZM,GAAUsC,EAAIwI,QAAmC,mBAAlB9K,EAAO8K,OAAuB,C,IACzDsD,EAAaxZ,EAAO,GAAIuY,GACxBjK,EAAOlD,EAAO8K,OAAOsD,GACNtf,EAAjB6H,EAAUuM,GAAWA,EAChBzD,QAAQC,QAAQwD,E,QAGpBpU,EACJ+H,KADI,SACEqM,GAAA,OACE8H,EAAKqD,eACVzZ,EAAO,GAAIuY,EAAY,C,KAAQjK,GAAQ,K,GAG1CrM,KANI,SAMEmP,G,OAGiB,IAAlBA,EAAO/W,OAAqB+W,EAAO,GAC3BA,C,gBAIlBqI,eAAA,SAAelB,G,0BAAa,I,KACrBpD,OAAOjD,WAAY,E,KAGnB7S,S,IAGDqa,EAAaze,KAAKkE,S,YAMI,IAAfua,I,EACI,CAJAze,KAAK0W,MAAMsC,S,KAMb,GAAG0F,OAAOD,GAAYxL,OAAOC,UAIlB5N,IAAX,SAAgB6Q,G,IhB3VRwB,EgB4VbgH,EACc,iBAAXxI,GACPA,IACC,SAAUA,GAAU,YAAaA,GAC9ByI,EAAOD,EAAgBxI,EAAOyI,KAAOzI,EACrCtN,EAAO8V,EAAgB5Z,EAAO,GAAIoR,EAAQ,C,KAAEyI,IAAU,C,KAAEA,G,GhB/VhE3X,EAFqB0Q,EgBkWNiH,IhB/Vf,UAAUvU,KAAKsN,EAAQtQ,WACO,mBAAvBsQ,EAAQyB,WgB8VO,C,MT1VnB,SAAuBJ,EAAQvG,Q,UAAM,IAC1C,IAAMyL,EAAWzL,EAAIyL,UAAY,YACjC,IAAKzO,EAAmByE,SAASgK,GAAW,MAAM,IAAInf,MAAJ,2BAAqCmf,GACvF,IAAI5O,GAAa4O,EAASzY,MAAM,KAAK,IAAM,IAAImI,QAAQ,QAAS,OAEhE,OADI0B,IAAWA,GAAY,IAAIA,GAAYlF,eACpC,C,UACLkF,EACAlO,KAAM8c,EACN3N,QAASyI,EAAO6F,UAAUX,EAAUzL,EAAI0L,iB,CSyVCW,CAAaF,EAAM,C,SANvC/V,EAAKqV,UAAYZ,EAAWY,S,gBACrB3W,EACtBsB,EAAKsV,gBACLb,EAAWa,gBACX,O,OAMKzZ,OAAOM,OAAO6D,EAAM,C,QAJnB6O,EAAAnH,Q,UAASmH,EAAApI,U,KAAWoI,EAAAtW,M,QAMrByH,C,QAKNqR,OAAOjD,WAAY,E,KACnB7S,S,KACAF,SAGE0L,QAAQyO,IACbI,EAAWnZ,IAAX,SAAgB6Q,EAAQ1X,EAAGsgB,G,IAEnBC,EAASja,EACb,C,UACa,G,OACH,G,OACA,IAEVuY,EACAnH,EACA,C,MACS1X,E,YACMsgB,EAAU3f,SAMrB6f,GAAgC,IAApB3B,EAAW1V,MAAyBuO,EAAOvO,K,IAWxD,IAAIsX,K,EAVFtX,MAAqB,IAAdqX,E,EAGPlP,SAAWC,EAAgBgP,UAG3BA,EAAOd,gBACPc,EAAOb,gBAGAa,OACa,IAAdA,EAAOE,WAA2BF,EAAOE,G,IAGlDC,EAAcvP,QAAQC,QAAQ,I,GAC9BmP,EAAOpX,KAAM,C,IAETgX,EAAOI,EAAOJ,K,GAChBI,EAAOzO,Q,EAEKD,EADE0O,EAAOzO,QACYyO,Q,ETjVxC,SAAmBJ,EAAM/V,Q,UAAO,IACrC,IAAMuW,EAAQ5W,MAAM2B,QAAQyU,GAAQA,EAAO,CAAEA,GAE7C,OAAOpN,EADM,IAAItK,OAAOmK,KAAK+N,EAAO,CAAEhe,KAAMyH,EAAKzH,MAAQ,KACnCyH,E,CSgVEwW,CAAST,EAAMI,E,QAG1BG,EAAYnY,KAAZ,SAAkBsY,GAAA,OAChB5a,OAAOM,OAAO,GAAIga,EAAQM,EAAA,E,IAGrCtY,KAjDK,SAiDCqJ,G,IACAkP,EAAclP,EAAG4C,OAAH,SAAW5U,GAAA,OAAMA,EAAEuJ,IAAA,G,GACnC2X,EAAYngB,OAAS,EAAG,C,IAKtBmV,EAHEiL,EAAkBD,EAAYE,KAAZ,SAAkBphB,GAAA,OAAMA,EAAEqhB,UAAA,GAC5CC,EAAWJ,EAAYK,KAAZ,SAAkBvhB,GAAA,OAAMA,EAAE8R,MAAA,GACrC0P,EAAcN,EAAYK,KAAZ,SAAkBvhB,GAAA,OAAMA,EAAEqR,MAAA,GAGlB6E,EAAxBgL,EAAYngB,OAAS,EAAUmgB,EAAYngB,OAEtCogB,EACGA,EAAgB,eAAcD,EAAY,GAAG,SAE7C,GAAGA,EAAY,GAAG,S,IAC1BO,EAAQ,G,GACRxC,EAAWW,S,EACUnL,SAASqI,EAAKzE,MAAM/D,aACnC,YACO2K,EAAWrN,MAAQ,SAAOkL,EAAKzE,MAAM,2BACrC4G,EAAW,eACjBiC,EAAYngB,OAAS,I,EACtB,U,QAIFuE,IAAR,OAFegc,EAAW,oBAAsB,iBAGxC,QAFOE,EAAc,iBAAmB,YAE3B,MAAYtL,EAAA,KAASuL,EACxC,kBACA,kBACA,qBACA,wB,OAGkC,mBAA3B3E,EAAKY,OAAOgE,Y,EAChBhE,OAAOgE,aAEP1P,C,gBAIXsN,kBAAA,SAAkBqC,G,KACXC,a,EACFjgB,KAAK0W,O,KACHwJ,a,cAGPD,WAAA,W,IACQvJ,EAAQ1W,KAAK0W,MAGfhP,EAAYgP,EAAMzV,WAAayV,EAAMyJ,I,EACjClf,QAAQ2G,QACqB,IAA/B5H,KAAKV,SAAS8gB,c,EACVnf,QAAQ4G,MAAM6O,EAAM2J,OAAQ3J,EAAM4J,SAEjC5J,EAAMyJ,I,EACTA,GAAGtY,MACP6O,EAAM2J,OAAS3J,EAAMQ,WACrBR,EAAM4J,OAAS5J,EAAMQ,W,cAK3BgJ,YAAA,W,IACQxJ,EAAQ1W,KAAK0W,MAEfhP,EAAYgP,EAAMzV,WAAayV,EAAMyJ,I,EACjClf,QAAQ6G,UAOZ4O,EAAMuC,KAA8B,IAAxBjZ,KAAKV,SAASihB,QAAoB7J,EAAMyJ,I,EAChDlH,GAAGsH,O,cAIbzD,KAAA,WACM9c,KAAK+b,QAAsC,mBAArB/b,KAAK+b,OAAOe,O,KAC/BmD,a,KACAlE,OAAOe,KAAK9c,KAAK0W,O,KACjBwJ,c,cAIThc,OAAA,W,OACMlE,KAAK0W,MAAMyJ,I,KACR7F,uBAAoBpQ,E,KACpBwM,MAAMyJ,GAAGK,SACPxgB,KAAKsa,mBAELta,KAAKygB,gB,cAIhBA,eAAA,W,GACOzgB,KAAK+b,O,KAKN0C,EAHE/H,EAAQ1W,KAAK0W,M,YACduJ,aAIsB,mBAAhBjgB,KAAK+b,O,EACD/b,KAAK+b,OAAOrF,GACc,mBAAvB1W,KAAK+b,OAAO7X,S,EACflE,KAAK+b,OAAO7X,OAAOwS,I,KAG7BwJ,cAEEzB,CAfW,C,cAkBpBiC,OAAA,SAAOjO,G,0BAAM,I,IAILkO,EAAkB,CAAC,W,OAElB/a,KAAK6M,GAAK/M,QAAjB,SAA0B3B,G,GACpB4c,EAAgBlQ,QAAQ1M,IAAQ,E,MAC5B,IAAIhF,MAAJ,gBACYgF,EAAA,gD,OAKhB6c,EAAY5gB,KAAKia,UAAUjB,OAC3B6H,EAAa7gB,KAAKia,UAAUhZ,Q,IAG7B,IAAI8C,KAAO0O,EAAK,C,IACbjJ,EAAQiJ,EAAI1O,QACG,IAAVyF,I,EAEJyQ,UAAUlW,GAAOyF,E,KAKpBsX,EAAWpc,OAAOM,OAAO,GAAIhF,KAAKia,UAAWxH,G,GAC/C,SAAUA,GAAO,UAAWA,EAC9B,MAAM,IAAI1T,MAAM,yD,GACT,SAAU0T,SAAYqO,EAAS7Q,MAC/B,UAAWwC,UAAYqO,EAAS3c,KACrC,aAAcsO,GAAO,gBAAiBA,EACxC,MAAM,IAAI1T,MACR,mEAEK,aAAc0T,SAAYqO,EAASnO,YACnC,gBAAiBF,UAAYqO,EAAS3E,SAG3C,SAAU1J,IAAKzS,KAAKka,OAAO0E,KAAOnM,EAAImM,M,IAEpCmC,EAAY/gB,KAAKghB,aAAaF,G,UAC7B9b,OAAOhF,KAAKka,OAAQ6G,GAIzBH,IAAc5gB,KAAKia,UAAUjB,QAC7B6H,IAAe7gB,KAAKia,UAAUhZ,QAC9B,C,MAC4BoY,EAAarZ,KAAKia,WAA9BhZ,EAAAyW,EAAAzW,Q,KAEXyV,MAAMsC,OAFHtB,EAAAsB,O,KAGHtC,MAAMzV,QAAUA,E,KAGhBggB,c,KAGAC,uB,QAIHzO,EAAI0N,IAAwB,mBAAX1N,EAAI0N,K,KAClBzJ,MAAMyJ,GAAK1N,EAAI0N,G,KACfzJ,MAAMyJ,GAAGgB,KAAd,WACMhG,EAAKZ,gB,EACJD,kBAAoBa,EAAKsF,iB,GAK9B,YAAahO,IACXA,EAAIiJ,QAAS1b,KAAK4b,OACjB5b,KAAK2b,S,EAGE3b,KAAKia,W,KAGd7V,S,KACAF,SACElE,KAAK0W,K,cAGdtS,OAAA,W,IACQgd,EAAWphB,KAAKwc,gBAEhBld,EAAWU,KAAKV,SAChBoX,EAAQ1W,KAAK0W,MAGb2K,EAAW5K,EAAaC,EAAOpX,G,OAG9B0F,OAAOhF,KAAKka,OAAQmH,G,MAIzBrhB,KAAK0W,MADCQ,EAAAQ,EAAAR,WAAYL,EAAAa,EAAAb,YAAaC,EAAAY,EAAAZ,aAAcH,EAAAe,EAAAf,WAAYC,EAAAc,EAAAd,YAIrDoC,EAAShZ,KAAK0W,MAAMsC,OACtBA,IAAoC,IAA1B1Z,EAASmX,eACjBC,EAAMyJ,GAEJnH,EAAOlZ,QAAU+W,GAAemC,EAAOjZ,SAAW+W,I,KAC/CyD,eAAgB,E,EAEf4F,GAAGmB,aAAapK,G,EAChBiJ,GAAG1J,aACPI,EAAcK,EACdJ,EAAeI,GACf,G,KAEGqD,eAAgB,IAInBvB,EAAOlZ,QAAU+W,IAAamC,EAAOlZ,MAAQ+W,GAC7CmC,EAAOjZ,SAAW+W,IAAckC,EAAOjZ,OAAS+W,IAGlDrP,MAAwC,IAAzBnI,EAASiiB,c,EACnB7P,MAAM5R,MAAQ6W,EAAA,K,EACdjF,MAAM3R,OAAS6W,EAAA,O,IAIpB4K,EAAWxhB,KAAKwc,gBAClBiF,GAAWC,EAAUN,EAAUI,G,OAC/BC,G,KACGE,eAEAF,C,cAGTE,aAAA,WAEM3hB,KAAK+b,QAAwC,mBAAvB/b,KAAK+b,OAAO3X,Q,KAC/B2X,OAAO3X,OAAOpE,KAAK0W,M,cAI5BnX,QAAA,W,GACOS,KAAK0W,MAAMgF,Q,GACXjU,I,MAMA2S,KAAOlT,OAAOgW,sBAAsBld,KAAK6b,iB,IAE1CjV,EAAMH,IAGJmb,EAAkB,IADZ5hB,KAAK0W,MAAM4F,IAEnBuF,EAAcjb,EAAM5G,KAAKid,UAEvBd,EAAWnc,KAAK0W,MAAMyF,SACtB2F,EAAkC,iBAAb3F,GAAyBrJ,SAASqJ,GAEzD4F,GAAa,EACXpiB,EAAeK,KAAKV,SAASK,aACd,UAAjBA,E,EACYiiB,EACY,aAAjBjiB,EACLkiB,EAAcD,E,KAEX3E,U,GADQ4E,EAAcD,E,GAGd,E,KAGV3E,UAAYrW,E,IAGbyW,EAAYwE,EAAc,IAC5BG,EAAUhiB,KAAK0W,MAAMvS,KAAOkZ,EAAYrd,KAAK0W,MAAMuL,UAGnDD,EAAU,GAAKF,I,EACP3F,EAAW6F,G,IAInBE,GAAa,EACbC,GAAc,E,GAIdL,GAAeE,GAAW7F,KAFS,IAAvBnc,KAAKV,SAAS8iB,M,GAKb,E,GACOjG,E,GACN,I,GAED,E,EACHA,E,GACG,G,KAGVsB,cAGHsE,EAAY,C,KACTrL,MAAM2G,UAAYA,E,KAClB3G,MAAMvS,KAAO6d,E,KACbtL,MAAM2F,SAAWrc,KAAKic,iBAAiB+F,EAAS7F,G,IAC/CkG,EAAYriB,KAAK0W,MAAMzG,M,KACxByG,MAAMzG,MAAQjQ,KAAKuc,uBACpB4F,GAAaniB,KAAK6c,eAClBwF,IAAcriB,KAAK0W,MAAMzG,OAAOjQ,KAAK8c,O,KACpC5Y,S,KACAwS,MAAM2G,UAAY,C,CAGrB6E,G,KACGvG,O,cAzEGwB,MACN,kE,cA4ENmF,SAAA,SAAStC,G,GACW,mBAAPA,EACT,MAAM,IAAIjhB,MAAM,sC,EACfiB,KAAK0W,O,KACHxS,Q,cAGPqe,MAAA,W,KACOrB,uB,cAGPsB,QAAA,WACM/a,M,OACKlD,oBAAoB,SAAUvE,KAAK8b,gB,KACrCtB,mBAAmBiI,UAEtBziB,KAAK0W,MAAMsC,OAAO3G,e,KACfqE,MAAMsC,OAAO3G,cAAcC,YAAYtS,KAAK0W,MAAMsC,O,cAI3DkI,sBAAA,WACOzZ,OAEsB,IAAzBzH,KAAKV,SAASsY,QACd5X,KAAK0W,MAAMsC,SACVhZ,KAAK0W,MAAMsC,OAAO3G,gBAEGrS,KAAKV,SAASsY,QAAU5T,SAASgO,MACzCC,YAAYjS,KAAK0W,MAAMsC,Q,cAIzCiI,YAAA,WhBlzBK,IAAwBtZ,EgBmzBvB3H,KAAK0W,MAAMzV,WhBnzBY0G,EgBozBN3H,KAAK0W,MAAMzV,UhBjzBX,mBAAd0G,EAAI+a,OACe,mBAAnB/a,EAAIgb,YACe,mBAAnBhb,EAAIib,W,KgBgzBF1I,OAAOjB,GAAKjZ,KAAK0W,MAAMzV,eAErBjB,KAAKka,OAAOjB,G,cAKzB+H,aAAA,SAAa1hB,Q,UAAW,I,IAElB6c,EAAW7c,EAAS6c,SACpBxJ,EAAcrT,EAASqT,YACrBsP,EAAY1a,EAAQjI,EAAS2iB,UAAW,GACxC3F,EAAM/U,EAAQjI,EAASgd,IAAK,IAC5BwF,EAAkC,iBAAb3F,GAAyBrJ,SAASqJ,GACvD0G,EACmB,iBAAhBlQ,GAA4BG,SAASH,GAExCmQ,EAA0BhB,EAC5BzhB,KAAKuL,MAAM0Q,EAAMH,QACjBjS,EACE6Y,EAA0BF,EAC5BlQ,EAAc2J,OACdpS,E,GAEF4X,GACAe,GACAC,IAA4BnQ,E,MAEtB,IAAI5T,MACR,sGAK6B,IAAxBO,EAASmV,iBACU,IAAnBnV,EAASkV,O,QAERP,KACN,4F,EAIU1M,EAAQoL,EAAamQ,EAAyBE,U,EACjDzb,EAAQ4U,EAAU4G,EAAyBC,U,IAEhDC,EAAY3jB,EAAS6E,KACrB+e,EAAa5jB,EAAS2Q,MACtBkT,EAAoC,iBAAdF,GAA0BnQ,SAASmQ,GACzDG,EACkB,iBAAfF,GAA2BpQ,SAASoQ,GAGzC/e,EAAO,EACP8L,EAAQ,EACRoM,EAAW,E,GACX8G,GAAgBC,E,MACZ,IAAIrkB,MACR,gE,OAEOokB,G,EAGEnjB,KAAKic,iB,EADTgH,EACgC9G,G,EAC/Bnc,KAAKoc,cAAcC,EAAUlY,EAAMwO,EAAa2J,IAC/C8G,I,EAIEpjB,KAAKic,iB,KAFRiH,GACO5G,EACwBH,IAGlC,C,SACLE,E,KACAlY,E,MACA8L,E,SACAkM,E,YACAxJ,E,IACA2J,E,UACA2F,E,cAIJoB,MAAA,SAAM/jB,G,6BAAW,IACXU,KAAK+b,OACP,MAAM,IAAIhd,MAAM,6C,KAEbkb,UAAYvV,OAAOM,OAAO,GAAI1F,EAAUU,KAAKia,W,EAEpCja,KAAKia,W,MAGSZ,EAAarZ,KAAKia,WAAtChZ,EAAAyW,EAAAzW,QAAS+X,EAAAtB,EAAAsB,OAEX+H,EAAY/gB,KAAKghB,aAAahhB,KAAKia,W,KAGpCC,OAASxV,OAAAM,OAAA,GACT+b,E,QACH/H,E,QACA/X,E,UACW,E,SACF,E,WACE,E,SACF,E,WACE,E,SACDjB,KAAKV,S,KACTU,KAAKV,SAASsf,K,kBAGZ,OAAMzD,EAAKjX,QAAL,E,sBACF,OAAMiX,EAAKJ,YAAL,E,kBACPiF,GAAA,OAAO7E,EAAKmH,SAAStC,EAAA,E,gBAC1B,OAAM7E,EAAK2B,MAAL,E,kBACJ,OAAM3B,EAAK/W,QAAL,E,gBACLqO,GAAA,OAAQ0I,EAAKuF,OAAOjO,EAAA,E,qBACfA,GAAA,OAAQ0I,EAAKM,YAAYhJ,EAAA,E,kBAC/B,OAAM0I,EAAKK,QAAL,E,gBACR,OAAML,EAAKS,MAAL,E,iBACL,OAAMT,EAAKQ,OAAL,E,gBACP,OAAMR,EAAKiC,MAAL,I,KAIT6D,c,KAIA7c,Q,cAGPkf,WAAA,SAAW9f,EAAc+f,G,kBAChBvjB,KAAKwjB,KAAKhgB,EAAc+f,GAAavc,KAArC,W,SACAuU,MACEJ,C,gBAIX7W,OAAA,W,gBACOqX,QACA3b,KAAK+b,SACwB,mBAAvB/b,KAAK+b,OAAOzX,Q,KAChBqZ,kBAAL,SAAwBjH,GAAA,OAAUyE,EAAKY,OAAOzX,OAAOoS,EAAA,G,KAElDyD,QAAU,K,cAGjB3V,QAAA,W,KACOF,S,KACAke,S,cAGPgB,KAAA,SAAKC,EAAcF,G,cAEW,mBAAjBE,E,MACH,IAAI1kB,MACR,oHAIAiB,KAAK+b,Q,KACFzX,cAGoB,IAAhBif,G,KACJ7C,OAAO6C,G,KAMTtD,a,IAEDyD,EAAU9T,QAAQC,U,GAIlB7P,KAAKV,SAAS6gB,GAAI,C,IACf1Y,I,MACG,IAAI1I,MACR,kE,EAGM,IAAI6Q,QAAJ,SAAaC,G,IAEjB6T,EADAC,EAAgBxI,EAAK7b,SAAS6gB,GAE9BwD,EAAcxD,K,EACNwD,EAAcD,Q,EACRC,EAAcxD,I,IAI1ByD,EAAA,SAAYzD,GAEZuD,IAASvD,EAAGuD,QAAH,WAAa,OAAMA,EAAQvD,EAAA,G,EACrCkD,MAAH,W,IACQ3M,EAAQyE,EAAKzE,MACbmN,EAAiC,UAA1B1I,EAAK7b,SAAS2B,QACrB6iB,EAAWD,EAAO1D,EAAG4D,MAAQ5D,EAAG6D,I,EACnCC,S,EACA3C,aAAa5K,EAAMQ,Y,EACnBmC,aACD3C,EAAM+F,cACN/F,EAAMgG,eACNoH,GAEED,GAAQ1I,EAAK7b,SAASma,Y,EACrByK,cAAc/I,EAAK7b,SAASma,Y,EAG5BiH,OAAO,C,GACVP,E,OACQA,EAAGnH,O,QACFmH,EAAGgE,UAAUC,iB,SAOC,mBAAlBT,E,IACLA,EAAcC,OACb,C,GAC8B,mBAAxB1c,OAAOmS,a,MACV,IAAIta,MACR,4J,EAGKmI,O,WAKRwc,EACJ1c,KADI,W,IAGCqd,EAASZ,EAAatI,EAAKzE,O,OAC1B5P,EAAUud,K,EACJzU,QAAQC,QAAQwU,IAEpBA,C,GAERrd,KATI,SASE+U,G,OACAA,IAAQA,EAAS,I,EACjB5B,QAAU4B,EAGXtU,M,EACG+S,mBAAmB8J,S,OACjBrgB,iBAAiB,SAAUkX,EAAKW,iB,EAGpCoE,c,EAMAyB,eACExG,C,GAERyC,MA5BI,SA4BG/X,G,cACEoO,KACN,0FACEpO,EAAI0e,SAEF1e,C,2CE/kCd,IAAM2e,EAAQ,eACRC,EAAoB,GA0B1B,SAASjhB,EAAcuY,EAAQzc,GAC7B,Q,UADwC,IACpCA,EAAS6gB,GAAI,CACf,GAAI7gB,EAAS0Z,QAAW1Z,EAAS2B,SAAuC,iBAArB3B,EAAS2B,QAC1D,MAAM,IAAIlC,MAAM,8GAKlBO,EAAWoF,OAAOM,OAAO,GAAI1F,EAAU,CAAE0Z,QAAQ,E,QADL,iBAArB1Z,EAAS2B,SAAuB3B,EAAS2B,S,CAIlE,IAlCMkP,EAmCFuU,EADEC,GAlCAxU,EAAS7I,MACE6I,EAAOyU,IAmCpBD,IAIFD,EAAQnd,EAAQjI,EAASulB,GAAI,mCAE/B,IAAIC,EAAcH,GAA0B,iBAAVD,EAE9BI,GAAeL,EAAkBvQ,SAASwQ,KAC5ChhB,QAAQuQ,KAAK,oKAAqKyQ,GAClLI,GAAc,GAGhB,IAAIpB,EAAU9T,QAAQC,UAEtB,GAAIiV,EAAa,CAEfL,EAAkBxc,KAAKyc,GAEvB,IAAMK,EAnDV,SAAmBF,GACjB,IAAM1U,EAAS7I,IACf,GAAK6I,EAEL,OADAA,EAAOqU,GAASrU,EAAOqU,IAAU,GAC1BrU,EAAOqU,GAAOK,E,CA+CEG,CAASN,GAC9B,GAAIK,EAAc,CAChB,IAAME,EAAA,WAEJ,IAzCcC,EAyCR7D,GAzCQ6D,EAyCeH,EAAaI,QAAS7lB,EAvCtCC,QAAU,CAAE4E,KAAM+gB,EAAWxO,MAAMvS,WAAS+F,GA2CzD,OAFA6a,EAAaI,QAAQ3gB,UAEd6c,C,EAITqC,EAAUqB,EAAavB,KAAKxc,KAAKie,GAAMrH,MAAMqH,E,EAIjD,OAAOvB,EAAQ1c,KAAR,SAAaqa,GAClB,IACIlL,EADEgP,EAAU,IAAInL,EAoBpB,OAlBI+B,GAEFzc,EAAWoF,OAAOM,OAAO,GAAI1F,EAAU+hB,GAGvC8D,EAAQ9B,MAAM/jB,GAGd6lB,EAAQ5C,QAGRpM,EAASgP,EAAQ7B,WAAWvH,IAE5B5F,EAASvG,QAAQC,QAAQsV,GAEvBL,GA9ER,SAAmBD,EAAIjG,GACrB,IAAMzO,EAAS7I,IACV6I,IACLA,EAAOqU,GAASrU,EAAOqU,IAAU,GACjCrU,EAAOqU,GAAOK,GAAMjG,E,CA2EhBwG,CAASV,EAAO,CAAElB,KAAMrN,E,QAAQgP,IAE3BhP,C,UAKX3S,EAAaA,aAAeA,EAC5BA,EAAa6hB,WAAalR,E,2JCzG1B,MAAA9R,mBAAAzD,EAAA,mCACAsE,oBAAAI,6BAAA1E,EAAA,wBACA0mB,eAAAC,gBAAAC,iBAAA5mB,EAAA,qBA+LAS,EAAAH,QA7LA,MACA,WAAAW,CAAAC,EAAAC,GACAC,KAAAF,QACAE,KAAAD,SACAC,KAAAqE,UAAAhC,EAAA,gBAAAvC,EAAAC,GAGAC,KAAAylB,cAAA,GACAzlB,KAAA0lB,eAAA,GAGA1lB,KAAA2lB,eAAA,EACA3lB,KAAA4lB,YAAA,EACA5lB,KAAA6lB,cAAA,EAGA7lB,KAAA8lB,iBAAA,EACA9lB,KAAA+lB,mBAAA,EACA/lB,KAAAgmB,mBAAA,EACAhmB,KAAAimB,gBAAA,EAEAviB,QAAAC,IAAA,kDAGA3D,KAAAkmB,oBACA,CAEA,kBAAAA,GACA,MAAAC,EAAA,KACAnmB,KAAA8lB,kBAAA9lB,KAAA+lB,oBACA/lB,KAAA+lB,mBAAA,EACA/lB,KAAAimB,gBAAA,EACAviB,QAAAC,IAAA,wCAIAK,SAAAC,iBAAA,QAAAkiB,GACAnmB,KAAAomB,QAAA,IAAApiB,SAAAO,oBAAA,QAAA4hB,EACA,CAGA,kBAAAE,CAAAC,GACA,WAAAhB,EAAAgB,EAAAtmB,KAAAqE,UACA,CAGA,mBAAAkiB,CAAAD,GACA,WAAAf,EAAAe,EAAAtmB,KAAAqE,UACA,CAGA,kBAAAmiB,GACA9iB,QAAAC,IAAA,gDACA3D,KAAAylB,cAAAD,EAAAiB,aAAAzmB,KAAAylB,eACAzlB,KAAA4lB,YAAA,EACA5lB,KAAA8lB,iBAAA,CACA,CAGA,mBAAAY,GACAhjB,QAAAC,IAAA,iDACA3D,KAAA0lB,eAAAF,EAAAiB,aAAAzmB,KAAA0lB,gBACA1lB,KAAAgmB,mBAAA,EACAhmB,KAAA+lB,mBAAA,CACA,CAEA,MAAA7hB,EAAAjD,UAAAkD,OAAArE,QAAAC,WACA,MAAAsd,EAAA,KAGA,IAAArd,KAAA8lB,iBAAA3hB,EAAAnE,KAAA2lB,eAAA,CAEA,GAAA3lB,KAAAylB,cAAArmB,OADA8D,EAAA9D,OAAAY,KAAA6lB,cACA,CACA,MAAAc,EAAA3mB,KAAA4lB,YAAA1iB,EAAA9D,OACAY,KAAAylB,cAAAxd,KAAAjI,KAAAqmB,mBAAAnjB,EAAAyjB,KACA3mB,KAAA4lB,cACA5lB,KAAA2lB,eAAAxhB,EAAA,MAAA9D,KAAAO,SACA8C,QAAAC,IAAA,wBAAAT,EAAAyjB,GAAAxjB,OACA,MACAnD,KAAA8lB,iBAAA,EACApiB,QAAAC,IAAA,0DAEA,CAGA,GAAA3D,KAAA+lB,mBAAA5hB,EAAAnE,KAAAimB,iBACAjmB,KAAAgmB,mBAAA1iB,EAAAlE,OAAA,CACA,MAAAwnB,EAAAtjB,EAAAtD,KAAAgmB,oBACAhmB,KAAA0lB,eAAAzd,KAAAjI,KAAAumB,oBAAAK,IACA5mB,KAAAgmB,qBACAhmB,KAAAimB,gBAAA9hB,EAAA,MAAA9D,KAAAO,SACA8C,QAAAC,IAAA,yBAAAijB,EAAAzjB,OACA,CAIAnD,KAAAylB,cAAA/f,QAAA3E,KAAA2f,OAAArD,IACArd,KAAA0lB,eAAAhgB,QAAA3E,KAAA2f,OAAArD,IAGArd,KAAAylB,cAAAzlB,KAAAylB,cAAAxS,OAAAlS,MAAA8lB,eACA7mB,KAAA0lB,eAAA1lB,KAAA0lB,eAAAzS,OAAAlS,MAAA8lB,eAGA,MAAAC,EAAA,IAAA9mB,KAAAylB,iBAAAzlB,KAAA0lB,gBACAF,EAAAuB,gBAAAD,GAGA7lB,EAAAc,UAAA,UACAd,EAAAe,SAAA,IAAAlC,EAAAC,GAGAC,KAAAqE,UAAArD,SAAAC,GAGAjB,KAAAylB,cAAA/f,QAAA3E,KAAAmD,OAAAjD,EAAAkD,IACAnE,KAAA0lB,eAAAhgB,QAAA3E,KAAAmD,OAAAjD,EAAAkD,IAGAnE,KAAAgnB,SAAA/lB,EAAAnB,EAAAC,EACA,CAEA,QAAAinB,CAAA/lB,EAAAnB,EAAAC,GAEAkB,EAAAc,UAAA,2BACAd,EAAAgmB,KAAA,aACAhmB,EAAAimB,UAAA,OACAjmB,EAAAkmB,SAAA,mBAAAnnB,KAAAylB,cAAArmB,SAAA,OACA6B,EAAAkmB,SAAA,oBAAAnnB,KAAA0lB,eAAAtmB,SAAA,OACA6B,EAAAkmB,SAAA,WAAArnB,OAAAC,IAAA,OAGAkB,EAAAc,UAAA,2BACAd,EAAAgmB,KAAA,kBACAhmB,EAAAimB,UAAA,SACAjmB,EAAAkmB,SAAA,wDAAArnB,EAAA,MAGAE,KAAA8lB,kBAAA9lB,KAAA+lB,mBACA9kB,EAAAc,UAAA,UACAd,EAAAgmB,KAAA,kBACAhmB,EAAAimB,UAAA,SACAjmB,EAAAkmB,SAAA,gCAAArnB,EAAA,EAAAC,EAAA,KACAC,KAAA+lB,oBACA9kB,EAAAc,UAAA,UACAd,EAAAgmB,KAAA,kBACAhmB,EAAAimB,UAAA,SACAjmB,EAAAkmB,SAAA,wBAAArnB,EAAA,EAAAC,EAAA,KAIAC,KAAAylB,cAAArmB,OAAA,IACA6B,EAAAc,UAAA,uBACAd,EAAAgmB,KAAA,aACAhmB,EAAAimB,UAAA,QACAjmB,EAAAkmB,SAAA,2BAAArnB,EAAA,GAAAC,EAAA,MAGAC,KAAA0lB,eAAAtmB,OAAA,IACA6B,EAAAc,UAAA,uBACAd,EAAAgmB,KAAA,aACAhmB,EAAAimB,UAAA,QACAjmB,EAAAkmB,SAAA,4BAAArnB,EAAA,GAAAC,EAAA,IAEA,CAGA,cAAA8D,CAAAE,GACA,OAAAA,EAAAqG,eACA,QACApK,KAAAwmB,qBACA,MACA,QACAxmB,KAAA0mB,sBAGA,CAEA,UAAAU,CAAAjjB,GACA,QACA,CAEA,OAAAK,GACAxE,KAAAomB,SACApmB,KAAAomB,SAEA,E,yGC9LA,MAAAljB,oBAAAI,6BAAA1E,EAAA,uBAGA,MAAAyoB,EACA,WAAAxnB,CAAA+e,EAAAva,GACArE,KAAAmD,KAAAyb,EAAAzb,KACAnD,KAAAqD,UAAAub,EAAAvb,UACArD,KAAAqE,YAGArE,KAAAsnB,aAAAtnB,KAAAunB,gBAAA3I,EAAAvb,WACArD,KAAAqB,cAAA,EACArB,KAAAQ,EAAA6D,EAAA3D,gBAAAV,KAAAsnB,cACAtnB,KAAAS,EAAA4D,EAAAxD,UAAAb,KAAAsnB,cACAtnB,KAAAwB,UAAA,GAAAnB,KAAAO,SAAA,IACAZ,KAAAsB,WAAA,IAAAjB,KAAAO,SACAZ,KAAAwnB,QAAA,GACAxnB,KAAAuB,OAAA,MAAAlB,KAAAO,SACAZ,KAAAynB,SAAA,IACAznB,KAAA0nB,KAAA1nB,KAAAsnB,aAAA,GAGAtnB,KAAA2nB,IAAA,EACA3nB,KAAA4nB,UAAA,GACA5nB,KAAA6nB,gBAAAxnB,KAAAO,SAAAP,KAAAynB,GAAA,EAGA9nB,KAAA+nB,WAAA,EACA/nB,KAAAgoB,aAAA,EACAhoB,KAAAioB,YAAA,EACA,CAEA,eAAAV,CAAAlkB,GAEA,UAAAA,EADAhD,KAAA4O,OAAA/L,EAAAoC,IAAA4iB,KAAA7kB,YACA,GACA,CAEA,MAAAqd,CAAArD,GACArd,KAAA2nB,KAAAtK,EACArd,KAAAmoB,cAAA9K,GACArd,KAAAqE,UAAAvD,iBAAAd,KACA,CAEA,aAAAmoB,CAAA9K,GAEA,GAAArd,KAAA+nB,UAAA,CACA,MAAAK,GAAApoB,KAAA2nB,IAAA3nB,KAAAgoB,cAAAhoB,KAAAioB,YACA,GAAAG,GAAA,EAEA,YADApoB,KAAAqB,cAAA,GAIA,MAAAgnB,EAAA,EAAAhoB,KAAAioB,IAAAF,EAAA,GAEA,YADApoB,KAAAqB,cAAArB,KAAAsnB,aAAAe,EAEA,CAGA,GAAAroB,KAAA2nB,IAAA3nB,KAAA4nB,UAAA,CACA,MAAAW,EAAAvoB,KAAA2nB,IAAA3nB,KAAA4nB,UACAS,EAAAE,EAAA,GACAloB,KAAAioB,IAAAC,EAAA,OACA,KAAAloB,KAAAmoB,KAAAD,EAAA,OAAAloB,KAAAynB,IACA9nB,KAAAqB,cAAArB,KAAAsnB,aAAAe,CACA,MACAroB,KAAAqB,cAAArB,KAAAsnB,cAIAtnB,KAAA+nB,WAAA/nB,KAAA2nB,IAAA,MACA3nB,KAAAsB,WAAAtB,KAAAwnB,QACAxnB,KAAAwB,WAAAxB,KAAAynB,SACAznB,KAAAsB,WAAAtB,KAAAynB,SAEAznB,KAAAQ,GAAAR,KAAAwB,UAAA6b,EAAA,GACArd,KAAAS,GAAAT,KAAAsB,UAAA+b,EAAA,GAEA,CAGA,QAAAoL,GACAzoB,KAAA+nB,YACA/nB,KAAA+nB,WAAA,EACA/nB,KAAAgoB,aAAAhoB,KAAA2nB,IAEA,CAGA,WAAAd,GACA,OAAA7mB,KAAA+nB,WAAA/nB,KAAA2nB,IAAA3nB,KAAAgoB,cAAAhoB,KAAAioB,WACA,CAGA,MAAA/jB,CAAAjD,EAAAkD,GACA,UAAApF,MAAA,gDACA,CAGA,QAAA2pB,CAAAC,GACA,GAAAngB,MAAA2B,QAAAwe,GACA,OAAAvqB,EAAA,IAAAuqB,EAAA,GAAAC,EAAA,IAAAD,EAAA,GAAA3f,EAAA,IAAA2f,EAAA,IAGA,MAAAxS,EAAA,4CAAArF,KAAA6X,GACA,OAAAxS,EAAA,CACA/X,EAAAyqB,SAAA1S,EAAA,OACAyS,EAAAC,SAAA1S,EAAA,OACAnN,EAAA6f,SAAA1S,EAAA,QACA,CAAA/X,EAAA,IAAAwqB,EAAA,IAAA5f,EAAA,IACA,EAwNA3J,EAAAH,QAAA,CACAmoB,SACA/B,aAtNA,cAAA+B,EACA,WAAAxnB,CAAA+e,EAAAva,GACAlD,MAAAyd,EAAAva,GACArE,KAAAoB,KAAA,SACApB,KAAAoD,MAAA,UACApD,KAAAwnB,QAAA,GACAxnB,KAAAynB,SAAA,GACA,CAEA,eAAAF,CAAAlkB,GAEA,UAAAA,EADAhD,KAAA4O,OAAA/L,EAAAoC,IAAA4iB,KAAA7kB,YACA,GACA,CAEA,MAAAa,CAAAjD,EAAAkD,GACA,GAAAnE,KAAAqB,eAAA,SAGA,MAAAynB,EAAA7nB,EAAA8nB,qBACA/oB,KAAAQ,EAAA,GAAAR,KAAAqB,cACArB,KAAAS,EAAA,GAAAT,KAAAqB,cACA,EACArB,KAAAQ,EACAR,KAAAS,EACAT,KAAAqB,eAGAynB,EAAAE,aAAA,aACAF,EAAAE,aAAA,cACAF,EAAAE,aAAA,aAGA/nB,EAAAU,YACAV,EAAAgoB,IAAAjpB,KAAAQ,EAAAR,KAAAS,EAAAT,KAAAqB,cAAA,IAAAhB,KAAAynB,IACA7mB,EAAAc,UAAA+mB,EACA7nB,EAAAioB,OAGAjoB,EAAAU,YACAV,EAAAgoB,IAAAjpB,KAAAQ,EAAAR,KAAAS,EAAAT,KAAAqB,cAAA,IAAAhB,KAAAynB,IACA7mB,EAAAQ,YAAA,2BACAR,EAAAS,UAAA,EACAT,EAAAa,SAGAb,EAAAU,YACAV,EAAAgoB,IACAjpB,KAAAQ,EAAA,GAAAR,KAAAqB,cACArB,KAAAS,EAAA,GAAAT,KAAAqB,cACA,IAAArB,KAAAqB,cACA,IAAAhB,KAAAynB,IAEA7mB,EAAAc,UAAA,2BACAd,EAAAioB,OAGAlpB,KAAAqB,cAAA,IAAArB,KAAA2nB,IAAA3nB,KAAA4nB,YACA3mB,EAAAc,UAAA,UACAd,EAAAgmB,KAAA,QAAA5mB,KAAAC,IAAA,GAAAN,KAAAqB,cAAA,aACAJ,EAAAimB,UAAA,SACAjmB,EAAAkoB,aAAA,SACAloB,EAAAkmB,SAAAnnB,KAAAmD,KAAAnD,KAAAQ,EAAAR,KAAAS,GAEA,GAwJA8kB,cApJA,cAAA8B,EACA,WAAAxnB,CAAA+e,EAAAva,GACAlD,MAAAyd,EAAAva,GACArE,KAAAoB,KAAA,UACApB,KAAAopB,UAAAxK,EAAAxb,MACApD,KAAAoD,MAAApD,KAAA0oB,SAAA9J,EAAAxb,OACApD,KAAAwnB,QAAA,GACAxnB,KAAAynB,SAAA,IACAznB,KAAA4nB,UAAA,GACA,CAEA,eAAAL,CAAAlkB,GAEA,UAAAA,EADAhD,KAAA4O,OAAA3L,EAAAgC,IAAA4iB,KAAA7kB,YACA,GACA,CAEA,MAAAa,CAAAjD,EAAAkD,GACA,GAAAnE,KAAAqB,eAAA,SAEA,MAAAjD,IAAAwqB,IAAA5f,KAAAhJ,KAAAoD,MAGA0lB,EAAA7nB,EAAA8nB,qBACA/oB,KAAAQ,EAAA,GAAAR,KAAAqB,cACArB,KAAAS,EAAA,GAAAT,KAAAqB,cACA,EACArB,KAAAQ,EACAR,KAAAS,EACAT,KAAAqB,eAIAgoB,EAAAllB,EAAAnE,KAAA6nB,gBAGAyB,GAFAjpB,KAAAmoB,IAAA,EAAAa,GAEArpB,KAAAopB,WACAG,EAAA,OAAAlpB,KAAAuL,MAAA,GAAAxN,OAAAiC,KAAAuL,MAAA,GAAAgd,OAAAvoB,KAAAuL,MAAA,GAAA5C,MACAwgB,EAAA,QAAAnpB,KAAAuL,MAAA,IAAAxN,OAAAiC,KAAAuL,MAAA,IAAAgd,OAAAvoB,KAAAuL,MAAA,IAAA5C,WAEA8f,EAAAE,aAAA,EAAAQ,GACAV,EAAAE,aAAA,GAAAM,GACAR,EAAAE,aAAA,EAAAO,GAGAtoB,EAAAU,YACAV,EAAAgoB,IAAAjpB,KAAAQ,EAAAR,KAAAS,EAAAT,KAAAqB,cAAA,IAAAhB,KAAAynB,IACA7mB,EAAAc,UAAA+mB,EACA7nB,EAAAioB,OAGA,MAAAO,EAAA,GAAAppB,KAAAmoB,IAAA,EAAAa,GAAA,GAmBA,GAlBApoB,EAAAU,YACAV,EAAAgoB,IAAAjpB,KAAAQ,EAAAR,KAAAS,EAAAT,KAAAqB,cAAA,IAAAhB,KAAAynB,IACA7mB,EAAAQ,YAAA,QAAArD,MAAAwqB,MAAA5f,MAAAygB,KACAxoB,EAAAS,UAAA,EACAT,EAAAa,SAGAb,EAAAU,YACAV,EAAAgoB,IACAjpB,KAAAQ,EAAA,GAAAR,KAAAqB,cACArB,KAAAS,EAAA,GAAAT,KAAAqB,cACA,GAAArB,KAAAqB,cACA,IAAAhB,KAAAynB,IAEA7mB,EAAAc,UAAA,2BACAd,EAAAioB,OAGAlpB,KAAA2nB,IAAA3nB,KAAA4nB,UACA,QAAAnpB,EAAA,EAAAA,EAAA,EAAAA,IAAA,CACA,MAAAirB,EAAA,EAAAvlB,EAAAnE,KAAA6nB,gBAAAppB,GAAA,EAAA4B,KAAAynB,GAAA,GACA6B,EAAA3pB,KAAAQ,EAAAH,KAAAupB,IAAAF,GAAA1pB,KAAAqB,cAAA,GACAwoB,EAAA7pB,KAAAS,EAAAJ,KAAAmoB,IAAAkB,GAAA1pB,KAAAqB,cAAA,GACAyoB,EAAA,GAAAzpB,KAAAmoB,IAAA,EAAArkB,EAAA1F,GAAA,GAEAwC,EAAAc,UAAA,0BAAA+nB,KACA7oB,EAAAU,YACAV,EAAAgoB,IAAAU,EAAAE,EAAA,MAAAxpB,KAAAynB,IACA7mB,EAAAioB,MACA,CAIAlpB,KAAAqB,cAAA,IAAArB,KAAA2nB,IAAA3nB,KAAA4nB,YACA3mB,EAAAc,UAAA,UACAd,EAAAgmB,KAAA,QAAA5mB,KAAAC,IAAA,GAAAN,KAAAqB,cAAA,aACAJ,EAAAimB,UAAA,SACAjmB,EAAAkoB,aAAA,SACAloB,EAAAkmB,SAAAnnB,KAAAmD,KAAAnD,KAAAQ,EAAAR,KAAAS,GAEA,GA0DA+kB,cAtDA,MACA,sBAAAuB,CAAAgD,GACA,QAAAtrB,EAAA,EAAAA,EAAAsrB,EAAA3qB,OAAAX,IACA,QAAAurB,EAAAvrB,EAAA,EAAAurB,EAAAD,EAAA3qB,OAAA4qB,IAAA,CACA,MAAAC,EAAAF,EAAAtrB,GACAyrB,EAAAH,EAAAC,GAGA,GAAAC,EAAAtC,IAAA,IAAAuC,EAAAvC,IAAA,IACAsC,EAAAlC,WAAAmC,EAAAnC,UAAA,SAEA,MAAAoC,EAAAD,EAAA1pB,EAAAypB,EAAAzpB,EACA4pB,EAAAF,EAAAzpB,EAAAwpB,EAAAxpB,EACA4pB,EAAAhqB,KAAAiqB,KAAAH,IAAAC,KACAG,EAAAN,EAAA5oB,cAAA6oB,EAAA7oB,cAEA,GAAAgpB,EAAAE,GAAAF,EAAA,GAEA,MAAAG,EAAAD,EAAAF,EACAI,EAAAN,EAAAE,EAAAG,EAAA,GACAE,EAAAN,EAAAC,EAAAG,EAAA,GAEAP,EAAAzpB,GAAAiqB,EACAR,EAAAxpB,GAAAiqB,EACAR,EAAA1pB,GAAAiqB,EACAP,EAAAzpB,GAAAiqB,EAGA,MAAAC,EAAAV,EAAAvC,KAAAwC,EAAAxC,KACAkD,EAAA,IAAAV,EAAA1oB,UAAAyoB,EAAAzoB,WACAqpB,EAAA,IAAAX,EAAA5oB,UAAA2oB,EAAA3oB,WAEA2oB,EAAAzoB,WAAAopB,GAAAV,EAAAxC,KAAAiD,GACAV,EAAA3oB,WAAAupB,GAAAX,EAAAxC,KAAAiD,GACAT,EAAA1oB,WAAAopB,GAAAX,EAAAvC,KAAAiD,GACAT,EAAA5oB,WAAAupB,GAAAZ,EAAAvC,KAAAiD,EACA,CACA,CAEA,CAEA,mBAAAlE,CAAAsD,GAKA,OAHAA,EAAArkB,QAAA3E,KAAA0nB,YAGAsB,EAAA9W,OAAAlS,MAAA8lB,cACA,G,yEClUAiE,EAAAC,kCAAA7jB,OAAA8jB,SAAAnZ,I","ignoreList":[]}